---
title: SerCx2 I/O トランザクションの概要
description: SerCx2 シリアル コント ローラーのドライバーを 1 つまたは複数の I/O トランザクションを発行して、クライアントからの読み取りまたは書き込み要求を処理します。
ms.assetid: 04DDFE53-4855-4029-BE1E-9D184B02A998
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: c29685682913abc8e3f9976aebbeb164ceb86ded
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56560738"
---
# <a name="overview-of-sercx2-io-transactions"></a>SerCx2 I/O トランザクションの概要


SerCx2 シリアル コント ローラーのドライバーを 1 つまたは複数の I/O トランザクションを発行して、クライアントからの読み取りまたは書き込み要求を処理します。 各トランザクションは、このドライバーは、シリアル コント ローラーと、要求のデータ バッファー間でデータを転送する I/O 操作を自己完結型として扱います。

チップ (SoC) の統合型回線上のシステムには、シリアル コント ローラー (または Uart) は同じプリント回路基板をはんだ付けするその他の統合型の回線での高速シリアル通信を有効にする頻度が含まれます。 これら Soc 上のプロセッサは、下手順 I/O (PIO) を使用して、これらのシリアル コント ローラーでのメモリがマップされたデータ レジスタとの間のデータを直接転送できます。 さらに、これらの Soc は通常、シリアル コント ローラーとメモリの間でデータ移動の高度な DMA ハードウェアを提供します。

PIO、短いデータ転送のための十分な場合がありますが、プロセッサ上非常に高い負荷 PIO 転送を使用して長い高いデータ レートで配置されます。 プロセッサからこのような転送をオフロードするには、DMA が必要です。

## <a name="types-of-io-transactions"></a>I/O のトランザクションの種類


SerCx2 では、I/O のトランザクションの次の 3 つの一般的な種類を定義します。

-   PIO
-   DMA システム
-   カスタム

シリアル コント ローラーのすべてのドライバーでは、データを転送する PIO を使用する I/O トランザクションをサポートする必要があります。 シリアル コント ローラー ドライバーは、システム DMA またはシリアル コント ローラーと関連付けられているハードウェアの機能によって、カスタム データの転送メカニズムを使用する I/O トランザクションをサポートも可能性があります。 ドライバーは、システムの DMA トランザクションまたはカスタムのトランザクションの両方ではなくいずれかをサポートできます。

シリアル コント ローラーのハードウェアでサポートされている I/O トランザクションの種類ごとに、シリアル コント ローラー ドライバーは SerCx2 でサポート パッケージを登録します。 このパッケージは、関連するハードウェアの機能について説明し、一連イベントのドライバーに実装されているコールバック関数にはを開始し、この種類の I/O トランザクションを制御するには、その SerCx2 呼び出しが含まれています。

シリアル コント ローラーは、他のデバイスと共有される、このシステム DMA コント ローラーを使用できるシリアル コント ローラー ドライバーがサポート システム DMA トランザクション可能性があります。 これらのトランザクションは、SerCx2 はシステムの DMA コント ローラーを設定し、DMA の転送を開始します。 シリアル コント ローラー ドライバーは、比較的簡単に調整をシステム DMA トランザクション中には。

シリアル コント ローラーにデータを転送するためのいくつかのカスタム ハードウェア メカニズムがある場合は、シリアル コント ローラー ドライバーはこのメカニズムを使用するカスタムのトランザクションをサポート可能性があります。 たとえば、シリアル コント ローラーのハードウェアにバス マスター DMA の組み込みの機能がある場合は、シリアル コント ローラー ドライバーは SerCx2 でこの機能を使用できるようにするカスタムのトランザクションをサポートできます。

カスタム トランザクションは、種類のデータ転送のメカニズムをサポートできる柔軟性です。 ただし、これらのトランザクションは PIO トランザクションまたはシステム DMA トランザクションよりも実装よりも困難です。 カスタム トランザクションをサポートするために、シリアル コント ローラー ドライバーが通常を設定してデータを転送するために使用するハードウェアを初期化する必要があります。 さらに、保留中の読み取りまたは書き込み要求が関連付けられている custom-receive する前に取り消されたまたは、カスタムの送信トランザクションが完了すると、ドライバーする必要がありますトランザクションを終了させるし、要求を完了します。

I/O の各トランザクションは、比較的単純な操作です。 な I/O トランザクションいずれかはまたはシリアル コント ローラーからデータを読み取り、コント ローラーにデータを書き込み、読み取りと書き込みを混合しません。 I/O、トランザクションが 1 つの転送モードを使用して、PIO、DMA、システムまたはカスタム — ミックスがモードを転送することはありません。

SerCx2 が満たす読み取りまたは書き込み要求を PIO または DMA を使用するかどうかを適切に判断できます。 たとえば、SerCx2 は非常に短い読み取りを提示したり PIO トランザクションとして直列コント ローラー ドライバーに要求を記述できます。 または、SerCx2 の長い読み取りを提示または DMA のトランザクションとして直列コント ローラーに要求を書き込む可能性があります。

## <a name="breaking-a-read-or-write-request-into-multiple-transactions"></a>読み取りまたは書き込み要求を複数のトランザクションに分割します。


一部のシステム DMA コント ローラーを SerCx2 中断時間の読み取りまたは書き込み I/O の 2 つ以上のトランザクションに要求を必要とする制限事項があります。 たとえば、システム DMA コント ローラーには、DMA の転送を開始および偶数バイト境界にメモリ内の終了が必要ですが、読み取り要求のデータ バッファーが起動し、奇数バイトの境界で終了する場合、SerCx2 使用 PIO 最初と最後のバイトをバッファーに転送するには、最初と最後のバイトまでのすべてのデータを転送する DMA のシステムを使用します。 この例では、SerCx2 は示されている順序でシリアル コント ローラー ドライバーに次の 3 つの I/O トランザクションを発行します。

1.  最初のバイトの PIO 受信トランザクション。
2.  中間のバイトの受信 DMA システム トランザクション。
3.  最後のバイトの PIO 受信トランザクション。

同様に、カスタムのデータ転送のメカニズムが開始および終了する場合、トランザクション、メモリ内の任意のバイト境界でのカスタムの送信が、書き込み要求、バッファーのサイズは、転送の最大長を超えています、トランザクション、SerCx2 パーティションのカスタムの送信2 つ (または複数) に書き込み要求は、転送の最大長を超えないそれぞれのトランザクションをカスタムに送信します。

SerCx2 分割読み取りまたは書き込み I/O の 2 つ以上のトランザクションに要求する場合、シリアル コント ローラー ドライバーがこれらのトランザクションと、要求を相互にリレーションシップを無視してかまいません。 SerCx2 には、データが受信または正しい順序で送信されることを保証するためにトランザクションがシリアル化します。

シリアル コント ローラー ドライバーが一連のトランザクションのサポート システム DMA またはカスタムのトランザクションをコールバック関数を登録する場合、ドライバーは、これらのトランザクションを実行するハードウェアの機能を記述するパラメーター値を提供します。 たとえば、システム DMA のトランザクション パラメーターは含めるアラインメントの要件および DMA コント ローラーのシステムをサポートする転送の最小値と最大の長さです。 SerCx2 では、これらのパラメーターを使用して、読み取りを処理または PIO トランザクションまたはシステム DMA のトランザクションとして要求を記述するかどうかと 2 つまたは複数の I/O トランザクションに要求を分割するかどうかを決定します。

ただし、シリアル コント ローラーには、パラメーター SerCx2 にシリアル コント ローラーのドライバーを提供することによって適切に記述できない特殊なハードウェア機能があります。 そのため、ドライバーでは、パーティションを読み取りまたは書き込みを 1 つまたは複数の I/O トランザクションに要求する方法について SerCx2 より良い決定を行えるにドライバーを可能にするハードウェア依存の情報へのアクセスがあります。 オプションとして、このようなドライバーを実装できます[ *EvtSerCx2SelectNextReceiveTransactionType* ](https://msdn.microsoft.com/library/windows/hardware/dn265225)と[ *EvtSerCx2SelectNextTransmitTransactionType*](https://msdn.microsoft.com/library/windows/hardware/dn265226)イベント コールバック関数。 SerCx2 は実装されている場合、ドライバーを使用して満たす読み取りまたは書き込み I/O のトランザクションの要求を決定できるように、これらの関数を呼び出します。

 

 




