---
title: 読み取り/書き込み要求の SerCx2 処理
description: 周辺ドライバーは、ポートに接続されている周辺機器との間でデータを転送するために、シリアルコントローラー上のポートに write (IRP_MJ_WRITE) および read (IRP_MJ_READ) 要求を送信します。
ms.assetid: 98100680-7D27-42B7-A445-C539B2DF95AD
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 283ff84025de76b66ad6eacfa18354232435adb7
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72843047"
---
# <a name="sercx2-handling-of-read-and-write-requests"></a>読み取り/書き込み要求の SerCx2 処理


周辺ドライバーは、ポートに接続されている周辺機器との間でデータを転送するために、書き込み ([**irp\_MJ\_書き込み**](https://docs.microsoft.com/previous-versions/ff546904(v=vs.85))) と読み取り ([**irp\_MJ\_読み取り**](https://docs.microsoft.com/previous-versions/ff546883(v=vs.85))) 要求をシリアルコントローラー上のポートに送信します。 要求がタイムアウトまたは取り消された場合でも、SerCx2 がこれらの要求を処理する方法は、適切に定義されています。

## <a name="cancellation-of-a-read-or-write-request"></a>読み取り要求または書き込み要求の取り消し


読み取り要求または書き込み要求を完了する前に、この要求がオペレーティングシステムまたは要求を送信した周辺機器ドライバーによって取り消される可能性があります。 SerCx2 が要求のデータを転送する前にキャンセルが発生した場合、SerCx2 は状態\_キャンセル状態コードを使用して要求を完了します。

ただし、要求に対して1バイト以上のデータが転送された後に読み取り要求または書き込み要求が取り消された場合、要求のすべてのデータが転送される前に、SerCx2 は状態\_成功状態コードで要求を完了します。 完了した要求は、要求の処理中に SerCx2 によって読み取られた、または書き込まれたバイト数を報告します。 必要に応じて、要求を送信した周辺機器は、この情報を使用して2番目の要求を送信し、部分的に完了した読み取りまたは書き込み操作を完了することができます。

## <a name="requests-that-time-out"></a>タイムアウトした要求


要求の処理に時間がかかりすぎる場合に、読み取り要求または書き込み要求がタイムアウトする可能性がある場合。 また、シリアルコントローラーによって受信された2つの連続するバイト間の時間が最大許容時間を超えると、読み取り要求がタイムアウトすることがあります。 どちらの場合も、タイムアウト条件が検出されると、SerCx2 は、ステータス\_タイムアウト状態コードを使用して直ちに要求を完了します。 完了した要求は、要求の処理中に SerCx2 によって読み取られた、または書き込まれたバイト数を報告します。 必要に応じて、要求を送信した周辺機器は、この情報を使用して2番目の要求を送信し、部分的に完了した読み取りまたは書き込み操作を完了することができます。 タイムアウトの詳細については、「 [**SERIAL\_のタイムアウト**](https://docs.microsoft.com/windows-hardware/drivers/ddi/ntddser/ns-ntddser-_serial_timeouts)」を参照してください。

## <a name="impact-of-hardware-limitations"></a>ハードウェアの制限の影響


通常、SerCx2 は、タイムアウトまたは取り消される読み取り要求または書き込み要求によって転送されたバイト数を正確に報告します。 ただし、システムの DMA トランザクションを実行するために使用されるハードウェアによっては、部分的に完了した読み取りまたは書き込みトランザクションによって転送されたバイト数が正確にカウントされない場合があります。 その場合、関連付けられている読み取り要求または書き込み要求で、転送されたバイト数の概数のみが報告される可能性があります。

## <a name="requests-to-transfer-zero-bytes"></a>0バイトの転送要求


SerCx2 は、読み取り要求または書き込み要求に応答して0バイトを転送しますが、要求は成功の状態コード\_完了しますが、操作は実行されません。

 

 




