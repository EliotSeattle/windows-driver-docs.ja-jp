---
title: シリアル接続される周辺デバイスの接続 ID
description: SerCx2 によって管理されるシリアルポートに接続されている周辺機器用のドライバーを作成する場合、ドライバーが受信するハードウェアリソースの一覧には、プラットフォームファームウェアからのデバイス接続情報をカプセル化する接続 ID が含まれます。
ms.assetid: 9A688552-DFAF-48A1-935D-70C3B13F30EC
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: aec6d7b96dd2b8707c9324da099aa76f91aef46a
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72845313"
---
# <a name="connection-ids-for-serially-connected-peripheral-devices"></a>シリアル接続される周辺デバイスの接続 ID

SerCx2 は、周辺機器が常時接続されているシリアルポートを管理します。 これらの物理接続は固定されているため、ハードウェアプラットフォームの ACPI ファームウェアに記述できます。 SerCx2 によって管理されるシリアルポートに接続されている周辺機器用のドライバーを作成する場合、そのドライバーが受信するハードウェアリソースの一覧には、プラットフォームからのデバイス接続情報をカプセル化する*接続 ID*が含まれます。アップデート.

システムの起動時に、プラグアンドプレイ (PnP) マネージャーは、PnP デバイスと非 PnP デバイスの両方を列挙します。 シリアルポートへの接続が固定されている PnP 以外の周辺機器の場合、PnP マネージャーは、ハードウェアプラットフォームの ACPI ファームウェアに問い合わせて、デバイスへのアクセス方法を説明する一連の接続パラメーターを取得します。 これらの接続パラメーターは、デバイスが接続されているポートのシリアルコントローラーを識別し、シリアルコントローラーがデバイスとの通信に必要とする他の情報 (ボーレートやフロー制御の設定など) を含めます。

PnP マネージャーによって、この周辺機器の接続パラメーターを表す接続 ID が割り当てられます。 PnP マネージャーは、この ID と接続パラメーターを、*リソースハブ*と呼ばれるシステムデータストアに格納します。 (リソースハブは、接続されているシリアルの周辺機器に関する構成情報を PnP マネージャーが格納する内部データストアです)。接続 ID は、周辺機器ドライバーが不透明として扱うことができるように、これらのパラメーターをカプセル化します。

周辺機器ドライバーは、ドライバーに割り当てられたハードウェアリソースの一部として、シリアル接続されている周辺機器の接続 ID を受け取ります。 周辺機器ドライバーがシステム関数を呼び出して周辺機器への接続を開くと、ドライバーは接続 ID を提供します。この ID はシステム関数がリソースハブからデバイスの接続パラメーターを取得するために使用します。

接続 Id を使用して、シリアル接続された周辺機器への論理接続を開く、UMDF および KMDF ドライバーのコード例については、次のトピックを参照してください。

[UMDF 周辺機器ドライバーをシリアルポートに接続する](connecting-a-umdf-peripheral-device-driver-to-a-serial-port.md)

[KMDF 周辺ドライバーをシリアルポートに接続する](connecting-a-kmdf-peripheral-device-driver-to-a-serial-port.md)

シリアルポートの周辺機器への接続を開くクライアントは、接続が切断されるまでポートに排他的にアクセスできます。 別のクライアントが同じポートへの2番目の接続を開こうとすると失敗します。

シリアルポートを開くと、クライアントはポートが不明または未定義の状態であると想定する必要があります。 クライアントは、使用できるようにポートを構成する必要があります。

操作用のシリアルポートを構成するために、クライアントは i/o 制御 (IOCTL) 要求をシリアルコントローラーに送信します。 通常、クライアントは[**IOCTL\_シリアル\_** ](https://docs.microsoft.com/windows-hardware/drivers/ddi/ntddser/ni-ntddser-ioctl_serial_apply_default_configuration)送信し、既定の\_構成要求をコントローラーに\_適用して、ポートを既定の構成に設定します。 必要に応じて、クライアントは追加のシリアル Ioctl を送信して、1つまたは複数の既定の構成設定を上書きできます。 たとえば、Windows では、ボーレート、フロー制御パラメーター、行制御の設定、および読み取り要求と書き込み要求のタイムアウト値を変更するために、シリアル Ioctl が定義されています。 SerCx2 でサポートされているシリアル Ioctl の一覧については、「[直列 I/o 要求インターフェイス](serial-i-o-request-interface.md)」を参照してください。
