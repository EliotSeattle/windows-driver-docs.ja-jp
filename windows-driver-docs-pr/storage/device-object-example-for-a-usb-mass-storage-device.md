---
title: USB 大容量記憶装置のデバイス オブジェクトの例
description: USB 大容量記憶装置のデバイス オブジェクトの例
ms.assetid: 402b99f2-a253-4a43-9c73-d3d2fd066c23
keywords:
- ストレージ ドライバー WDK、デバイス オブジェクト
- デバイス オブジェクトの WDK ストレージ
- USB 大容量記憶装置デバイス例 WDK
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 32e55fa061397ef29909427bc8bd7c3581f015ba
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63331740"
---
# <a name="device-object-example-for-a-usb-mass-storage-device"></a>USB 大容量記憶装置のデバイス オブジェクトの例


## <span id="ddk_device_object_example_for_a_usb_mass_storage_device_kg"></span><span id="DDK_DEVICE_OBJECT_EXAMPLE_FOR_A_USB_MASS_STORAGE_DEVICE_KG"></span>


次の図には、スマート メディア スロットとコンパクト フラッシュのスロットの両方を含む複合 USB 大容量記憶装置デバイスに対して作成されたデバイス オブジェクトが表示されます。

![スマート メディア スロットとコンパクト フラッシュのスロットの両方を含む複合 USB 大容量記憶装置デバイスに対して作成されたデバイス オブジェクト](images/usbstor.png)

複合 USB 大容量記憶装置のデバイス オブジェクトのツリー

以降、図の下部では、次の一覧には、各デバイス オブジェクト、またはデバイス オブジェクトのスタックとその関連するドライバーが説明します。

1.  PCI バス ドライバーでは、USB ホスト コント ローラーを列挙します。 システム ドライバーを読み込み、ポート、 *usbport.sys*、およびその付属のミニポート (の図に示されていません)。 次に、 *usbport.sys* FDO ホスト コント ローラーを作成します。

2.  ポート ドライバーでは、システム ルート ハブでの USB ハブを列挙します。 *Usbhub.sys*ドライバーは、すべての USB ハブを管理します。 図がデバイス オブジェクトのみハブの 1 つのレベルに表示されますが、USB がある可能性がある多くの複数のハブ デバイス オブジェクト ツリーで、デイジー チェーンのハブのデバイスを許可します。 ハブのドライバーは、検出し USB 大容量記憶装置のデバイスを列挙し、PDO を作成します。

3.  USB 記憶域のポート ドライバーを提供する Windows *usbstor.sys*、USB スタックとネイティブの Windows 記憶域クラス ドライバー間のインターフェイスとして機能します。 USB 記憶域ポート ドライバーは、独自の機能のデバイス オブジェクト (FDO) を作成します。 USB 記憶域ポート ドライバーでは、16 個の論理ユニットに物理記憶装置を分割できます。 図に示す例では、USB ストレージ デバイスには、コンパクト フラッシュ デバイスとメディアのスマート デバイス用の別のスロットが含まれています。 そのため、この例では、USB 記憶域ポート ドライバーは、コンパクト フラッシュ デバイスとメディアのスマート デバイス用に別の 2 つの個別 Pdo を作成します。

4.  USB ストレージ ポート ドライバーの上位スタックは、通常の方法でネイティブのディスクのクラス ドライバーによって管理されます。 ディスク クラス ドライバーは、ディスクの PDO と FDO 全体 (0 のパーティション)、ディスクとパーティションごとの Pdo を作成します。

5.  パーティション マネージャーは、各ディスク パーティションの FDO を作成します。

 

 




