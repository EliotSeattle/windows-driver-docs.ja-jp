---
title: SCSI HBA のデバイス オブジェクトの例
description: SCSI HBA のデバイス オブジェクトの例
ms.assetid: 695ccf9a-a18f-4f1f-bfdc-24fefc2846b4
keywords:
- ストレージ ドライバー WDK、デバイス オブジェクト
- デバイス オブジェクトの WDK ストレージ
- SCSI HBA WDK ストレージ デバイスのオブジェクトの例
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 31bd35a38ec4a4707914335d1e1c3c480e02a0ee
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63331720"
---
# <a name="device-object-example-for-a-scsi-hba"></a>SCSI HBA のデバイス オブジェクトの例


## <span id="ddk_device_object_example_for_a_scsi_hba_kg"></span><span id="DDK_DEVICE_OBJECT_EXAMPLE_FOR_A_SCSI_HBA_KG"></span>


次の図は、PCI IEEE 1394 のコント ローラーとシステムおよび PCI SCSI アダプタをバーチャル CD-ROM と接続されている分割可能なディスクのデバイスで作成されたデバイス オブジェクトを示します。 オブジェクトの IEEE 1394 コント ローラーに接続されているデバイスが表示されで説明されている[IEEE 1394 コント ローラーのデバイス オブジェクトの例](device-object-example-for-an-ieee-1394-controller.md)します。

![PCI の IEEE 1394 のコント ローラーとシステムおよび PCI SCSI アダプタをバーチャル CD-ROM と接続されている分割可能なディスク デバイスに対して作成されたデバイス オブジェクト](images/kg201-2.png)

CD-ROM と SCSI HBA のディスク デバイスのデバイス オブジェクトのツリー

以降、図の下部では、次に示します各デバイス オブジェクトとその関連するドライバー。

1.  記憶域バス ドライバーでは、記憶域バスの FDO を作成し、記憶域バス (この図では表示されません)、PnP マネージャーによって作成された PDO にアタッチします。 記憶域バス FDO のデバイス オブジェクト ツリーの構造は、記憶域バスと、システムに統合された方法によって異なります。 ポート ドライバー レベルより上の記憶装置ドライバーと下位のオブジェクトはこれらの連携を行いません。

    この図では、記憶域バス FDO PCI バスを備えたシステムの PCI バス ドライバー作成者を示します。

2.  PCI バス ドライバーを列挙し、そのバス上の各記憶域アダプターの PDO を作成します。 ストレージに対応するポート ドライバーでは、FDO を作成し、そのアダプターの PDO を結び付けます。

    この図は 2 つのアダプター Pdo: IEEE 1394 コント ローラーのいずれか (で説明されている[IEEE 1394 コント ローラーのデバイス オブジェクトの例](device-object-example-for-an-ieee-1394-controller.md)) と SCSI HBA の。 SCSI ポート ドライバーと関連付けられているミニポート ドライバー FDO の作成し、PDO SCSI アダプターにアタッチします。

3.  記憶域ポート ドライバーは、そのアダプターにアタッチされている各デバイスの PDO を作成して、ターゲット デバイスを仮想化します。 この図は、SCSI ポート/ミニポート ドライバーによって作成されたこのような 2 つの Pdo: 1 つは、ハード ディスク ドライブ、cd-rom のいずれか。

4.  1 つまたは複数のフィルター ドライバーは、ターゲット デバイス ストレージ ポート ドライバーによってエクスポートされた PDO をフィルター デバイス オブジェクト (フィルター操作を実行) をアタッチできます。 このようなフィルター ドライバーは、インターセプトし、ジェネリック クラスまたはポート ドライバーに固有のハードウェアを変更しなくてもデバイスに固有の問題を回避するクラスのドライバーによってターゲット デバイスに送信された要求を変更できます。

    この図では、フィルター、CD-ROM の PDO を CD オーディオ フィルター ドライバーが接続されている操作を示します。

5.  ストレージ クラス ドライバーは FDO を作成し、いずれか、ターゲット デバイス ストレージ ポート ドライバーまたはフィルター、介在するフィルター ドライバーによって、スタックに接続されている操作を実行してエクスポート PDO となる次の下位のデバイス オブジェクトにアタッチします。 クラス ドライバーは、下位のドライバーのデバイス オブジェクトを介してストレージ デバイスをすべての後続の要求を発行します。

    この図はこのような 2 つの Fdo: CD-ROM デバイスを表す 1 つと、ハード ディスク ドライブのパーティション 0 を表す 1 つ。 0 のパーティションは、raw ディスク全体を表し、かどうか、ドライブがパーティション分割されているかどうかを常に存在します。

6.  クラスのドライバー、PnP マネージャーがその子デバイスを照会したときに、Pdo の一覧を返す、バス ドライバーとしても機能 (IRP\_MN\_クエリ\_デバイス\_とリレーション**BusRelations**). たとえば、リムーバブル ディスクなどのパーティション分割されたメディア デバイスのドライバー返す可能性があります Pdo の一覧のパーティションを表します。 高度なドライバーは、これらの Pdo を Fdo をアタッチします。

    この図では、それぞれを表すディスク パーティション、ターゲット デバイスとしてアドレス指定することができますが、このような 3 つの Pdo を示します。

    固定のディスクの場合は、パーティション マネージャーは FDO パーティション 0 を表し、すべてのパーティションの代わりに PnP 操作の処理にアタッチします。 パーティション マネージャーのアクティビティでは、ディスクのクラス ドライバーと上位レベルのフィルター ドライバーに透過的です。

7.  1 つまたは複数のフィルター ドライバーは、クラス ドライバーの上位接続できます。 下位のレベルのフィルター ドライバーとは異なりは、上位レベルのフィルター ドライバーは Irp クラス ドライバーの送信をインターセプトし、次の下位のデバイス オブジェクトを転送する前に変更します。 フィルター ドライバーことができます、読み取り/書き込み要求をインターセプトし必要に応じて、データを変換するだけでなくパスワードやその他の関連情報を指定するユーザーのアプリケーションを有効にするなど、追加の I/O 制御コード (Ioctl) を定義します。

    この図では、ディスク暗号化のフィルター ドライバーによって作成し、PDO パーティション 1 用のディスクに接続されているはフィルターを示します。

 

 




