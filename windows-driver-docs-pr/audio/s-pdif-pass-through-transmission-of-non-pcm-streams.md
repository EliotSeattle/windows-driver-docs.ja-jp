---
title: PCM 以外のストリームの S/PDIF パススルー送信
description: PCM 以外のストリームの S/PDIF パススルー送信
ms.assetid: c06b880e-20d1-417b-9868-a4fb3b418dbf
keywords:
- S/PDIF パススルー WDK オーディオ
- AC-3-フェールオーバー-S/PDIF 形式の WDK オーディオ
- PCM 以外のオーディオ形式 WDK
- 非 PCM オーディオの形式、WDK S/PDIF
- WMA Pro WDK オーディオ
- Ac-3 WDK オーディオ
- Sony/Philips デジタル インターフェイス
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 01e38c1e16935a44861547f95eb5eb385d79c1d3
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63328652"
---
# <a name="spdif-pass-through-transmission-of-non-pcm-streams"></a>PCM 以外のストリームの S/PDIF パススルー送信


## <span id="s_pdif_pass_through_transmission_of_non_pcm_streams"></span><span id="S_PDIF_PASS_THROUGH_TRANSMISSION_OF_NON_PCM_STREAMS"></span>


主に、PCM のオーディオ データを送信するため、Sony/Philips デジタル インターフェイス (S/PDIF) の形式が定義されているが、PCM 以外のデータを送信するように適合することが簡単にします。 S/PDIF パススルー送信の原則は、PCM のストリームと同様に S/PDIF リンクを介して PCM 以外のデータ ストリームを渡すことができます。 パススルー送信は、S/PDIF 送信と受信ポートを PCM 非ストリームのエンコーディングを理解するには必要ありません。

WMA Pro と ac-3 は、同期のフレームと呼ばれる単位でのデジタル オーディオ ストリームを送信する両方の PCM で非圧縮形式です。 各同期フレームは、独自のヘッダーが含まれ、ストリーム内の他の同期フレームとは無関係にデコードすることができます。 48 kHz サンプル速度でなど、WMA Pro 同期フレームが含まれます (42.67 ミリ秒) のサンプルのクロックの 2048 のタイマー刻みを再生するには、十分なデータには。 この速度でも同じ、ac-3 同期フレームには、1536 のタイマー刻み (32 ミリ秒) のための十分なデータが含まれています。

48 kHz サンプル速度で 5.1 チャネル WMA Pro 同期フレーム超えることはありません 8,192 バイトは、16 ビット PCM サンプル 2048 ステレオ (2 つのチャネル)、によって占有されるバイト数であります。 同様に、5.1 チャネル ac-3 同期フレーム超えることはありません 6144 (バイト単位) は 1536 ステレオ、16 ビット PCM サンプルによって占有されるバイト数。 (このルールでは、例外もありますが ac-3 同期フレームのそれらの型は、非常に一般的ではない、S/PDIF を経由して送信されることはできず、ここでは無視できます)。

48 kHz WMA Pro または ac-3 オーディオ ストリームは、デコードすることがなく、デジタル形式で、S/PDIF リンクを通過、ときに、S/PDIF ポートを送受信することができます、ストリームと同様に処理ステレオ、16 ビット、48 kHz PCM ストリーム。 WMA Pro-オーバー-S/PDIF または AC-3-フェールオーバー-S/PDIF ストリームを送信できる、暗証番号 (pin) のデータ範囲を指定する場合、wave 形式のタグ自体は S/PDIF ポート経由で、PCM ストリームを送信する、暗証番号 (pin) のデータ範囲とは異なることだけに。 例については、データ範囲の宣言を参照してください。 [WMA Pro データの範囲を指定する](specifying-wma-pro-data-ranges.md)します。

S/PDIF インターフェイス経由で WMA Pro 圧縮されたストリームをリアルタイムによりも高速配信を回避するために (つまりより小さい 43 のミリ秒単位でのオーディオの 43 (ミリ秒) の配信を回避する)、オーディオのアプリケーションは、WMA Pro 同期フレーム、同期されるまでのゼロを埋め込む必要がありますフレームは、サンプルを 2048 ステレオ PCM と同じバイト数を占有します。 1536 のサイズ ac-3 同期フレームがパディング同様にする必要がありますステレオ PCM サンプル。

WaveCyclic を使用する PortCls アダプター ドライバーに埋め込まれていない WMA Pro または ac-3 同期のフレームを送信しようとしたことを認識するときにポート ドライバーが (データ ストリームには、2 つのチャネルの圧縮されていないストリームはバイト数が含まれている) ために、データの消費を検知、空き領域がなくなるサイレント状態を循環バッファー。 PCM 非ストリーム デコーダー PCM 以外の形式ではなく、PCM 内にあるこれらの期間、無音状態の解釈の問題になります。

次の図は、パススルー送信を S/PDIF のアプリケーションの例を示します。

![コネクターのパススルー送信を示す図](images/passthru.png)

図は、外部に接続されている PC のオーディオ/ビデオを示しています (A/V) 受信者同軸ケーブルを使用します。 PC のオーディオ デバイスで S/PDIF 出力ポートを a S/PDIF 入力ポートに接続するは、ケーブル/V レシーバー。

図の左エッジは、オーディオのアプリケーションは、8192 バイト バッファーの先頭に WMA Pro オーディオ ストリームから同期フレームを挿入します。 (図の容易さの純粋にこのバッファー サイズが使用されます。 実際には、4096 バイトまたは 10240 (バイト単位) のバッファー サイズなどの可能性があります代用されます。)アプリケーションでは、0 で、バッファー内の残りのスペースを埋めます。 オーディオ ドライバーでは、8192 バイトの PCM のデータが存在するものとして、バッファーの内容を送信する S/PDIF 出力ポートをプログラムします。

同様に、A 上のポートの入力、S/PDIF/V レシーバーは、8192 バイトの PCM のデータのように、ストリームを受信します。 この例では、8192 バイトのサイズがありますが、入力バッファーにデータを読み込みます。 デコーダーは、WMA Pro 同期フレームを抽出し、入力バッファーから、5.1 チャネルのオーディオ ストリームに同期フレームをデコードし、図の右エッジでのサラウンド スピーカーを通じて、ストリームの再生します。

オーディオ ストリームが非 PCM 形式であること、接続の反対側に、デコーダーができるように、オーディオ ドライバーは S/PDIF トランシーバー ビット/AUDIO を設定する必要があります。 デコーダーは、データ ストリームが非 PCM 形式でエンコードされたかどうかを判断する S/PDIF チャネル状態ブロックからこのビットを読み取ります。 このビットを設定すると、ドライバーは、PCM 非ストリームを対応するためにする必要がある特別なですだけです。 その他のすべての方法で、ドライバーは、PCM のデータが含まれている場合と同様に、ストリームを扱います。

S/PDIF パススルーの送信をサポートする数のコンシューマー デバイスが USB および 1394 などの他のデジタル インターフェイスは、外部のオーディオ デコーダーに PCM 以外のデータのデジタル パススルー伝送のも応用できます。

Dolby Laboratories では、1992 年に ac-3 (ドルビー デジタル) 圧縮オーディオ形式が導入されました。 最初のコンシューマー A/V サポート ac-3 S/PDIF 経由で受信側が約 1997 年に利用可能になりました。 WMA Pro オーディオ ストリーム形式のソフトウェアのサポートは、2003、Microsoft Windows Media 9 シリーズ テクノロジのリリースで利用できるようになりました。 A/V レシーバー WMA Pro-オーバー-S/PDIF をサポートするは、2003年で導入されました。

Windows XP 以降では、waveOut、DirectSound、および DirectShow Api は、PCM 以外の形式をサポートします。 DirectSound と waveOut Api は、ドライバーが公開している PCM または PCM 以外の形式がこれらの Api のクライアントが自動的に使用できるように実装されます。

 

 




