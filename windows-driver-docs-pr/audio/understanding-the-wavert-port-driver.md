---
title: WaveRT ポート ドライバーについて
description: WaveRT ポート ドライバーについて
ms.assetid: 2627615a-3fde-4ed6-9f7f-f6d7e5d82b3b
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: c495206b0b47b05d8c099e3e76093a26e624c51a
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63335357"
---
# <a name="understanding-the-wavert-port-driver"></a>WaveRT ポート ドライバーについて


WaveRT ポート ドライバーでは、WavePci ポート ドライバーのハードウェア アクセラレータを使用したパフォーマンスと、以前の WaveCyclic ポート ドライバの簡潔さを結合します。

WaveRT ポート ドライバーでは、継続的にマップし、データ バッファーに直接アクセスできるメインのクライアント (通常、オーディオ エンジン) を提供することで、オーディオ データをコピーする必要があります。 また、この直接アクセスには、ドライバーのオーディオ ストリームのデータの操作を必要があります。 したがって、WaveRT ポート ドライバーには、一部のオーディオ デバイスがダイレクト メモリ アクセス (DMA) コント ローラーのニーズが対応しています。

他のウェーブ レンダリングと wave キャプチャ デバイスから区別自体、WaveRT ポート ドライバーに登録して自身[ **KSCATEGORY\_リアルタイム**](https://msdn.microsoft.com/library/windows/hardware/ff548485)に加えて[ **KSCATEGORY\_オーディオ**](https://msdn.microsoft.com/library/windows/hardware/ff548261)、 [ **KSCATEGORY\_レンダリング**](https://msdn.microsoft.com/library/windows/hardware/ff548493)と[ **KSCATEGORY\_キャプチャ**](https://msdn.microsoft.com/library/windows/hardware/ff548325)します。 この自己登録では、アダプターのドライバーのインストール中に発生します。

Windows Vista およびそれ以降のオペレーティング システムでは、オペレーティング システムを起動し、オーディオ エンジンが初期化されるとき、オーディオ エンジンはオーディオ デバイスを表す KS フィルターを列挙します。 列挙中には、オーディオ エンジンには、検出されたオーディオ デバイスのドライバーがインスタンス化します。 このプロセスは、これらのデバイスのフィルター オブジェクトの作成時になります。 WaveRT のオーディオ デバイスの場合は、結果のフィルター オブジェクトは、次のコンポーネントは。

-   フィルターの一般的なシステム機能を管理する WaveRT ポート ドライバーのインスタンス

-   フィルターのすべてのハードウェア固有の関数を処理するために、WaveRT ミニポート ドライバーのインスタンス

フィルター オブジェクトを作成すると、オーディオ エンジンと WaveRT ミニポート ドライバーが必要なオーディオの処理の種類のオーディオのストリームを開く整います。 オーディオのレンダリング (再生) KS フィルターを準備するには、などオーディオ エンジンと WaveRT ミニポート ドライバー、以下の再生のストリームを開きます。

1.  オーディオ エンジンは、KS フィルターに暗証番号 (pin) を開き、WaveRT ミニポート ドライバーは、暗証番号 (pin) のインスタンスを作成します。 オーディオ エンジンでは、pin が開いたら、また、ドライバーを wave 形式のストリームを渡します。 ドライバーでは、wave 形式の情報を使用して、次の手順で、適切なバッファー サイズを選択します。

2.  オーディオ エンジンは、循環バッファーを作成する特定のサイズのミニポート ドライバーに要求を送信します。 用語*循環バッファー*という事実を指すことバッファーの位置の登録には、再生またはレコードの操作でバッファーの末尾に達すると、位置、レジスタできます自動的にラップ バッファーの先頭にします。 物理メモリの連続したブロックを設定する、WaveCyclic ミニポート ドライバーとは異なり、WaveRT ミニポート ドライバーを物理メモリ内で連続しているバッファーする必要はありません。 ドライバーを使用して、 [ **KSPROPERTY\_RTAUDIO\_バッファー** ](https://msdn.microsoft.com/library/windows/hardware/ff537370)プロパティ バッファーの容量を割り当てます。 オーディオ デバイスのハードウェアは、要求されたサイズのバッファーからストリーミングできない、ドライバーは、最も近いサイズで最初に要求されたサイズにバッファーを作成するオーディオ デバイスのリソース制限内では動作します。 ドライバーは、オーディオ デバイスの DMA エンジンにバッファーをマップし、ユーザー モードでバッファーをオーディオ エンジンにアクセスできるようにします。

3.  オーディオ エンジンは、定期的にオーディオ データを循環バッファーを書き込むのスレッドをスケジュールします。

4.  オーディオ デバイスのハードウェアが循環バッファーを直接サポートを提供されていない場合、ミニポート ドライバーは、引き続き同じバッファーを使用するオーディオ デバイスを定期的に reprograms します。 などハードウェアがバッファーのループをサポートしていない場合、ドライバーする必要があります、DMA アドレス設定、バッファーの先頭に戻るバッファーの末尾に到達するたびにします。 この更新プログラムは、割り込みサービス ルーチン (ISR) または優先度の高いスレッドのいずれかで実行できます。

結果の構成は循環バッファーをサポートするか、そのハードウェアを定期的に更新するミニポート ドライバーで動作するオーディオ デバイス ハードウェアの障害回復力のあるオーディオ信号を提供します。

KS フィルター (記録) オーディオ キャプチャを準備するには、オーディオ エンジンと WaveRT ミニポート ドライバーはレコードのストリームを開くと同様の手順を使用します。

WaveRT ポート ドライバーによって提供されるパフォーマンスの向上の 1 つは wave レンダリングまたは wave キャプチャ中に、オーディオ ストリームのエンド ツー エンドの処理に遅延の削減です。 この遅延は、ストリームの潜在期間と呼ばれます。

ストリームの待機時間のこれら 2 つの種類の詳細については、次のトピックを参照してください。

-   [再生中に、Stream の待機時間](stream-latency-during-playback.md)

-   [記録中に、Stream の待機時間](stream-latency-during-recording.md)

WaveRT ポート ドライバーを補完する WaveRT ミニポート ドライバーを開発する方法については、次を参照してください。、 [WaveRT ミニポート ドライバーを開発](developing-a-wavert-miniport-driver.md)トピック。

 

 




