---
title: 動的トポロジを管理します。
description: 動的トポロジを管理します。
ms.assetid: 324c372b-c8d6-4eed-b4ea-071b3d5412b1
keywords:
- 動的トポロジ WDK オーディオ
- 回線のモジュラー ジャック プレゼンス検出 WDK オーディオ
- サブデバイスを登録します。
- 動的サブデバイス WDK オーディオ
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 6d2d15b75ea0368eaae4f07acb10bbcd31d6488b
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56560467"
---
# <a name="managing-dynamic-topologies"></a>動的トポロジを管理します。


オーディオのアダプターには、サブデバイス スピーカー、マイク、ユーザーは、アダプターの前面または背面パネルのオーディオ ジャックに接続するなど、外部のオーディオ デバイスを提供するためのいくつかの数が含まれています。 各サブデバイス サービスの特定のオーディオ ジャックまたはジャックのグループ。

オーディオ ドライバーには、内部接続のマップでは基本的には、トポロジを表示して、サブデバイス内の要素の処理で各サブデバイスがについて説明します。 システム提供の Windows API モジュールとベンダーから提供されたコントロール パネル アプリケーション、サブデバイスの機能を決定し、コントロールの内部のポイントを識別するために、トポロジ情報を使用します。 詳細については、[フィルター トポロジを公開する](exposing-filter-topology.md)を参照してください。

前に開発された WDM オーディオ ドライバー、 [IUnregisterSubdevice](https://msdn.microsoft.com/library/windows/hardware/ff537030)と[IUnregisterPhysicalConnection](https://msdn.microsoft.com/library/windows/hardware/ff537022)インターフェイスが利用可能になったほぼ静的なトポロジを持ちます。 これらのドライバーのアダプター ドライバー、サブデバイスを管理するためのミニポート ドライバー オブジェクトが作成された後オブジェクトとその関連付けられているサブデバイス永続化アダプターのドライバー オブジェクトの有効期間。

ただしでオーディオ アダプターを動的に構成可能なアダプターのドライバーを作成し、サブデバイスのように、ユーザーがオーディオ ジャックに外部デバイスを差し込むし、それらを削除しますハードウェア構成の変更を反映するように実行時に削除します。 この動作により、ハードウェアの論理的に独立した機能として動作するサブデバイスです。 つまり、各サブデバイスできます電源がオンに、構成、および他サブデバイスとは無関係にシャット ダウンします。

各サブデバイスでは、次で構成される内部のトポロジがあります。

-   サブデバイス、を介してデータ パス。

-   データを処理トポロジのノード (たとえば、ボリューム コントロール) では、そのフロー データ パスに沿ったをストリームします。

-   サブデバイスの同じアダプターでは、その他のサブデバイスへの物理的な接続です。

アダプターのドライバーは、サブデバイスを動的に削除するときに、サブデバイスの内部のトポロジにバインドされているハードウェア リソースを解放します。 アダプターのドライバーは、おそらくさまざまなトポロジを使用した新しいサブデバイスを作成するのにこれらのリソースを使用できます。

アダプターのドライバーが 1 つまたは複数のインスタンスとしてサブデバイスのドライバー インターフェイスを登録する新しいオーディオ サブデバイスを構成するときに[デバイス インターフェイス クラス](https://msdn.microsoft.com/library/windows/hardware/ff541339)、I/O マネージャーは、シンボルが含まれている 1 つまたは複数のレジストリ エントリを追加しますインターフェイス クラスとインターフェイスのインスタンスの関連付けリンク。 サブデバイスにアクセスするに、ユーザー モードのクライアントがレジストリからシンボリック リンクを取得し、呼び出しのパラメーターとして渡します、 [ **CreateFile** ](https://msdn.microsoft.com/library/windows/desktop/aa363858)関数。 通常、クライアントは、Dsound.dll または Wdmaud.drv、またはベンダーから提供されたコントロール パネルまたはオーディオ ユーティリティ プログラムなどの Windows API モジュールです。 詳細については**CreateFile**、Microsoft Windows SDK のドキュメントを参照してください。

ミニポート ドライバーを呼び出すと、 [ **IUnregisterSubdevice::UnregisterSubdevice** ](https://msdn.microsoft.com/library/windows/hardware/ff537032)を削除するメソッド、サブデバイス、PortCls システム ドライバー (Portcls.sys) I/O マネージャーに通知シンボリック リンクを削除するにはレジストリからデバイスの関連付けられているインターフェイスのリンク。 インターフェイスの削除イベントをデバイスに登録されているコンポーネントは、インターフェイスが削除されたときに通知を受け取ります。

オーディオのアダプターは、プラグが挿入またはオーディオ ジャックから削除されたときに、ミニポート ドライバーに通知する回線のモジュラー ジャック プレゼンス回路を含めることができます。 ユーザーは、のオーディオ ジャックにプラグを挿入するときにアダプター ドライバーは、レジストリに関連付けられているサブデバイスのデバイスのインターフェイスを追加します。 ユーザーは、のオーディオ ジャックからプラグを削除するとき、レジストリから、対応するデバイス インターフェイス アダプターのドライバーを削除します。

動的トポロジをサポートするオーディオのアダプターには、次の利点があります。

-   ユーザー フレンドリです

    デスクトップのスピーカー、ヘッドホン、およびその他の外部のオーディオ デバイスは、オーディオ、アダプターの前面または背面パネル上のオーディオ ジャックに接続される実際には、しない限り、これらのデバイスを使用するため利用可能なオーディオのアプリケーションには表示されません。

-   効率的な電源

    ユーザーは、のオーディオ ジャックからプラグを削除するとき、ドライバーの jack サービスを提供するアダプターの回路の一部電源ことができます。

-   構成可能

    サブデバイスを削除した後には、ドライバーは、おそらくさまざまなトポロジを使用した新しいサブデバイスを作成するサブデバイスの内部のトポロジにバインドされていたハードウェア リソースを使用できます。

 

 




