---
title: アダプター ドライバーの構築
description: アダプター ドライバーの構築
ms.assetid: e4a151b9-57aa-402f-8a0d-70547eb67917
keywords:
- オーディオミニポートドライバー WDK、アダプタードライバー
- ミニポートドライバー WDK オーディオ、アダプタードライバー
- アダプタードライバー WDK オーディオ、ミニポートドライバー
- カーネルモードドライバーサービス WDK オーディオ
- ポートクラスドライバー WDK オーディオ
- PortCls WDK オーディオ、アダプタードライバー
- オーディオアダプター WDK
- オーディオアダプター WDK、構築
- アダプタードライバー WDK オーディオ、構築
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 8a3f653f9b8887820f37a304eb0e614128fe53f7
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72831595"
---
# <a name="adapter-driver-construction"></a>アダプター ドライバーの構築


## <span id="adapter_driver_construction"></span><span id="ADAPTER_DRIVER_CONSTRUCTION"></span>


特定のオーディオアダプターカードのドライバーサポートには、アダプタードライバーの形式が使用されます。 アダプタードライバーは、次の要素で構成されています。

-   ドライバーの起動と初期化を実行し、アダプターカードのすべてのオーディオ機能に共通するすべての操作を実装する汎用アダプターコード。

-   アダプターカード上の特定のオーディオ機能を管理するミニポートドライバーのセット。

ハードウェアベンダーは、システムによって提供されていないすべてのミニポートドライバーの汎用アダプターコードとコードの両方を提供します。

一般的なアダプターコードの例については、Microsoft Windows Driver Kit (WDK) の「Sb16、Msvad、および Ac97 サンプルオーディオドライバーの**Cadaptercommon**インターフェイスの実装」を参照してください。

レイヤー化されたアプローチを使用することにより、ベンダーは、アダプターのハードウェア機能に応じて、複数のレベルのいずれかで動作するアダプタードライバーを作成できます。 特定のハードウェア機能に必要なサポートレベルを決定するときは、まず、その機能をサポートするシステム提供のミニポートドライバーが既に存在するかどうかを確認する必要があります (「 [**Pcnewminiport ポート**](https://docs.microsoft.com/windows-hardware/drivers/ddi/portcls/nf-portcls-pcnewminiport)関数の一覧」を参照してください)。システムが提供するミニポートドライバー)。 そうでない場合、ベンダーは専用のミニポートドライバーを実装する必要がありますが、システムが提供するポートドライバーのいずれかを使用できます ( [**Pcnewport**](https://docs.microsoft.com/windows-hardware/drivers/ddi/portcls/nf-portcls-pcnewport)関数のシステム提供のポートドライバーの一覧を参照してください)。

デバイスの WDM サポートを実装するには、次の手順を実行します。

1.  システムが提供するミニポートドライバーで既にハードウェア機能がサポートされている場合は、既存のミニポートドライバーを使用して機能を管理します。

2.  ハードウェアの機能がシステムによって提供されるミニポートドライバーと互換性がない場合は、その関数がシステム指定のポートドライバーの少なくとも1つと互換性があるかどうかを確認します。 システム提供のポートドライバーがハードウェア機能をサポートしている場合は、その機能を管理するミニポートドライバーの部分を書き込みます。 そのミニポートドライバーは、所有ポートドライバーが要求するミニポートインターフェイスの仕様に準拠している必要があります。

3.  システム指定のポートドライバーでハードウェア機能がサポートされていない場合は、関数をサポートするためにミニドライバーを記述します。 ミニドライバーは、ストリーミングクラスドライバーのインターフェイスの仕様に準拠している必要があります。

このセクションでは、次のトピックについて説明します。

[スタートアップシーケンス](startup-sequence.md)

[サブデバイスの作成](subdevice-creation.md)

 

 




