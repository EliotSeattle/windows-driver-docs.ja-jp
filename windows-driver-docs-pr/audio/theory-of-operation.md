---
title: 操作の理論
description: この理論上の操作トピックは、新しい Windows 8.1 の内部動作の背後にある理論を説明します。
ms.assetid: 5897946A-5319-404B-BE9E-91FF8801652F
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: bc30f92ce72ee1ebebf4762bae82dedb7ee15a03
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63335234"
---
# <a name="theory-of-operation"></a>操作の理論


この理論上の操作トピックは、Bluetooth バイパス オーディオ ストリーミング用の新しい Windows 8.1 のサポートの内部動作の背後にある理論を説明します。

オーディオが Bluetooth をバイパス モード、ホスト コント ローラー インターフェイス (HCI) ではなく、Bluetooth コント ローラーにいくつかその他のハードウェアの接続の使用にオーディオ コントロール パスが送られます。 この他のハードウェアの接続は通常、I2S ですが、任意のインターフェイスで決定できます、Bluetooth ホスト コント ローラー。 このトピックのセットは、この接続を「バイパス」または「側波帯」接続を指します。

バイパス接続を介してオーディオの I/O が発生したときに、無線による同期接続指向 (SCO) オーディオ ストリームは、HCI によって引き続き管理されます。 Windows 8 では、ハンズフリー プロファイル (HFP) ドライバー SCO 接続し、ハンズフリー プロファイルの他の側面の管理の複雑さのほとんどを非表示を提供します。 ただし、カスタム オーディオ ドライバーは、Windows とバイパス接続間でのオーディオ データ I/O を制御します。

HFP ドライバーと I/O のオーディオ データは、カスタム コントロールのドライバーの役割の分離は、Windows HFP ドライバーとカスタム オーディオ ドライバーの間の効率的な通信を確立する必要があることを意味します。 この通信は、一連のカスタム オーディオ ドライバーから Windows HFP ドライバーに渡される Ioctl によって処理されます。

通常、バイパス接続自体では、常に存在します。 PnP サービスは、常に、この接続が含まれていて、必要なオーディオ ドライバーをロードするハードウェアを列挙します。 ただし、オーディオ システム可能性がありますまたは可能性がありますが、HFP ヘッドセット ペアになっていません、バイパス接続のみ HFP ヘッドセットを少なくとも 1 つは、ペアになっている場合に便利です。

Windows HFP ドライバー ペアになっている HFP デバイスごとに登録し、GUID でデバイスのインターフェイスを有効に\_DEVINTERFACE\_BLUETOOTH\_HFP\_SCO\_HCIBYPASS インターフェイス クラス。 したがって、次の条件が HFP デバイスの該当します。

-   Windows を起動 (通常、起動時に) HFP ドライバー、HFP ドライバーのレジスタ、および有効にしたときのインターフェイスを各ペア HFP デバイスになります。

-   HFP、デバイスが最初にペアになって、Windows を既にアップされ実行されている、HFP ドライバー登録し、インターフェイス、デバイスを有効にします。

-   N のペアになっている HFP デバイスがある場合、Windows HFP ドライバーは、デバイス インターフェイスの n 個のインスタンスを登録します。

-   ペアになる HFP デバイスが削除されると、Windows HFP ドライバーは、デバイス インターフェイスを無効にします。

-   Windows では、HFP ドライバーを停止 (シャット ダウンまたは再起動) 中では通常、HFP ドライバーには、各ペアになっている HFP デバイス用のインターフェイスが無効にします。

-   オーディオ ドライバーする必要があります複数到着と処理インターフェイスの削除、いつでもスタートアップまたはシャット ダウン中にだけでなく。

次のトピックでは、接続のライフ サイクルの詳細についてと、HFP デバイスと、オーディオ ドライバーの一部のデザイン機能を使用しています。

[HFP デバイスのスタートアップ](startup.md)

[HFP デバイスの接続](hfp-device-connection.md)

[HFP デバイスの削除](removal.md)

[カーネルのストリーミングに関する考慮事項](kernel-streaming-considerations.md)

[コンテナーのオーディオのエンドポイント ID](audio-endpoint-container-id.md)

[I2S および SCO リソースの管理](management-of-i2s-and-sco-resources.md)

 

 




