---
title: システム全体にわたる一意のデバイス Id
description: システム全体にわたる一意のデバイス Id
ms.assetid: 628577b6-05fe-4b63-929f-6d63e93c9266
keywords:
- オーディオ アダプター WDK、一意のデバイス Id
- アダプターのドライバー WDK オーディオ、一意のデバイス Id
- ポート クラス オーディオのアダプター WDK、一意のデバイス Id
- MF バス ドライバー WDK オーディオ
- システム提供の多機能デバイス WDK オーディオ
- 多機能オーディオ デバイス WDK、オーディオのアダプター
- 一意のデバイス Id の WDK オーディオ
- デバイス Id の WDK オーディオ
- デバイス Id を識別します。
- サブデバイス WDK オーディオ
- 独自のバス ドライバー WDK オーディオ
- デバイス ID の文字列の WDK オーディオ
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 457fefef9c81a3b7a1bc7fa79f8b0b193f5f73ad
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56560341"
---
# <a name="system-wide-unique-device-ids"></a>システム全体にわたる一意のデバイス Id


## <span id="system_wide_unique_device_ids"></span><span id="SYSTEM_WIDE_UNIQUE_DEVICE_IDS"></span>


一般的なオーディオ アダプター用のドライバーは、システムで同じのオーディオのアダプター カードの複数のインスタンスをサポートできる簡単に。 ドライバーはほぼすべてのデータ構造がデバイス拡張機能のバッファーに格納されます (の説明を参照して、 [**デバイス\_オブジェクト**](https://msdn.microsoft.com/library/windows/hardware/ff543147)構造体の**DeviceExtension**フィールド)。 ドライバーの複数のインスタンスは、任意のグローバル データを共有、ただし、それらのインスタンスはこのデータへのアクセスを同期する必要があります。

1 つの追加要件は、各サブデバイス アダプター カードの特定のインスタンスで使用する、[デバイス ID の文字列](https://msdn.microsoft.com/library/windows/hardware/ff541224)を一意に識別、サブデバイス同じアダプター カードのすべてのインスタンス間で、システムにします。

これを実現する最も簡単な方法では、プラグ アンド プレイのマネージャーに論理的に個別のデバイスとしてアダプター カードの各サブデバイスを公開します。 オプション (1) として表示されるこの[多機能オーディオ デバイス](multifunction-audio-devices.md)します。

2 番目のアプローチでは、アダプター カードのサブデバイスを管理するシステム提供の多機能バス ドライバーを使用します。 MF バス ドライバーは、各サブデバイスにシステムには、同じアダプター カードの複数のインスタンスが含まれている場合でも、システム全体で一意であることが保証されるデバイス ID を割り当てます。 MF バス ドライバーには、設計、サブデバイス レジスタの共通セットを共有するが、各サブデバイスが PCI ベース アドレスのレジスタの独自セットが対応しています。 付与しない非表示の依存関係で相互のサブデバイスとシステムまたは他のデバイスを妨げることがなく同時に操作できる必要があります。 オプション (2)、これは[多機能オーディオ デバイス](multifunction-audio-devices.md)します。

3 番目のアプローチでは、アダプター カード サブデバイスを管理する独自のバス ドライバーを使用します。 サブデバイス、一元的に管理する必要のある相互依存している場合に頻繁に必要です。 このような依存関係は、いくつかの方法で発生することができます。

-   サブデバイスには、いくつかのカードのリソースを共有可能性があります。 たとえば、サブデバイス デジタル シグナル プロセッサ (DSP) を共有する場合は、バス ドライバーが DSP で最初のサブデバイスを開始する前に実行されている独自のオペレーティング システムをダウンロードする必要があります。

-   設計上の欠陥サブデバイス間の依存関係があります。 たとえば、設計上の欠陥では、特定の順序で上または下の電源をサブデバイスを必要があります。

依存関係のいずれかの型が存在する場合は、独自のバス ドライバーがほとんど常に、プラグ アンド プレイのマネージャーに直接、サブデバイスを提示して、依存関係を非表示にしようとしています。 より優れたソリューションにします。

アダプター カードのバス ドライバーを指定する場合は、デバイス Id を割り当てるには、バス ドライバーがシステム全体で一意であることを確認する必要があります。

バス ドライバーへの応答には、その子のいずれかのデバイス ID を提供する、 [ **IRP\_MN\_クエリ\_ID** ](https://msdn.microsoft.com/library/windows/hardware/ff551679)プラグ アンド プレイ マネージャーからのクエリ。 バス ドライバーがへの応答を示す 2 つの方法のいずれかで、ID を指定することができます、 [ **IRP\_MN\_クエリ\_機能**](https://msdn.microsoft.com/library/windows/hardware/ff551664) を設定することによってクエリ[**デバイス\_機能**](https://msdn.microsoft.com/library/windows/hardware/ff543095)構造体の**UniqueID**フィールドを**TRUE**または**FALSE**:

-   **UniqueID** = **は TRUE。**

    これは、システム全体で一意である子の名前が保証されることを意味します。 デバイス ID の文字列には、デバイス ID のほか、ハードウェアのインスタンスを一意に識別するシリアル番号は、インスタンス ID が含まれています。

-   **UniqueID** = **FALSE**

    つまり、子の名前が親に関してのみ一意であります。 ほとんどのデバイスでは、この識別手段を使用します。 この場合、プラグ アンド プレイ マネージャーは、システムを一意になるように受信したデバイス ID の文字列を拡張します。 拡張文字列は、関数の親デバイスの一意の id です。

すべてのオーディオ バス ドライバーを設定する必要があります**UniqueID** = **FALSE**子。 これにより、コンピューターの ID を一意にするデバイスの親に関する情報を追加して、子のデバイス ID の文字列を拡張するプラグ アンド プレイ マネージャーです。

 

 




