---
title: IEEE 1394 デバイスの等時性同期のオプション
description: IEEE 1394 デバイスの等時性同期のオプション
ms.assetid: 27137890-09e7-45d5-b268-7e93c943b489
keywords:
- アイソクロナス i/o WDK IEEE 1394 bus、同期
- 同期 WDK IEEE 1394 バス
- WDK IEEE 1394 バスのフィルター処理
- サイクル時間の同期 WDK IEEE 1394 バス
- バッファー WDK IEEE 1394 バス
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: d16aaa9f3ddf6be51eb48357b133a9ccc8733a84
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72841534"
---
# <a name="isochronous-synchronization-options-for-ieee-1394-devices"></a>IEEE 1394 デバイスの等時性同期のオプション





IEEE 1394 ドライバースタックでは、 [**ISOCH\_の要求**](https://msdn.microsoft.com/library/windows/hardware/ff537655)中に特定の種類の同期とフィルター処理がサポートされています。これは\_がリッスンし、[**要求\_ISOCH\_トーク**](https://msdn.microsoft.com/library/windows/hardware/ff537660)操作です。

ドライバーでフィルター処理を開始するには、バッファーの[**ISOCH\_記述子**](https://docs.microsoft.com/windows-hardware/drivers/ddi/1394/ns-1394-_isoch_descriptor)構造体の**flags**メンバーの\_タグフラグに\_SY または記述子\_同期するように記述子\_\_同期します。 バスドライバーは、そのバッファーに送信されるデータから、isoch 記述子に示されている Sy または Tag の値に一致する Sy 値またはタグ値を持たないデータストリームからすべてのパケットを削除します。 このフィルター処理は、次のバッファーから続行されます。\_SY と\_記述子のどちらの記述子\_同期\_でも、それらのバッファーの isoch 記述子に\_タグフラグが設定されます。

\_SY または\_記述子の\_同期\_に記述子を設定するだけでなく、\_タグフラグの同期\_を設定することに加え、クライアントドライバーは\_SY\_タグを使用\_記述子も設定し\_\_最初のフラグでは、バスドライバーは isoch 記述子のクライアントドライバーによって提供される Sy または Tag の値を使用して、データフローを同期します。 この場合、バスドライバーは、Sy またはタグ値が isoch 記述子に示されている値と一致するものを受け取るまで、すべてのデータパケットを破棄します。 一致を検出すると、バスドライバーはパケットを破棄し、*すべて*のパケットのクライアントドライバーへの転送を再開します。

ホストコントローラーでサポートされている場合、クライアントドライバーはサイクル時間を使用して、アイソクロナスデータストリームを同期できます。 このコンテキストの "サイクル時間" は、[**サイクル\_時間**](https://docs.microsoft.com/windows-hardware/drivers/ddi/1394/ns-1394-_cycle_time)の構造体で定義されます。 これには、2番目のカウント、 **cl\_** 2 回目のカウントが含まれます。これは、128秒ごとに、サイクル数、 **cl\_CycleCount**、現在の秒で経過したアイソクロナスサイクルの数、およびクロックティック数を示します。**CL\_CycleOffset**、現在のサイクル内で経過した IEEE 1394 バスクロックティックの数を示します。

クライアントは、特定のバッファー内の同期操作を開始するか、特定のサイクル時間にデータストリーム全体を同期することができます。

特定のバッファー内の同期操作を開始するには、クライアントドライバーが、そのバッファーの isoch 記述子の記述子の\_の\_時フラグに対し**て、\_** 記述子を同期するように設定する必要があります。 また、データストリームの同期に使用されるサイクル時間で、記述子の**CycleTime**メンバーを初期化する必要があります。 バスドライバーは、isoch 記述子を調べた後、指定されたサイクル時間を使用して同期操作を開始します。 バスドライバーは、指定されたサイクル時間がないすべてのパケットを破棄し、正しいサイクル時間のパケットを検出したらパケットの配信を再開します。

特定のサイクル時間にデータストリーム全体を同期するには、クライアントドライバーでチャネルを構成する必要があります。これにより、チャネルで開始されるすべての要求が、指定されたサイクル時間を使用してデータストリームを自動的に同期するようになります。 これにより、特定の isoch 記述子のサイクル時間の設定に基づいて同期をトリガーする方法が提供されます。 この方法でチャネルを構成するには、クライアントドライバーが次の2つの手順を実行する必要があります。

1.  クライアントは、要求\_使用してチャネルのリソースハンドルを割り当て[ **\_\_リソース**](https://msdn.microsoft.com/library/windows/hardware/ff537649)の要求を割り当てるときに、\_の\_**時フラグに**リソース\_同期を設定する必要があります。IRB.

2.  クライアントがチャネルでリッスンまたは対話操作を要求するときに、IRB の**StartTime**メンバーのデータストリームの同期に使用されるサイクル時間を指定します。 Listen および talk 要求の詳細については、「 [**request\_ISOCH\_listen**](https://msdn.microsoft.com/library/windows/hardware/ff537655) and [**request\_ISOCH\_talk**](https://msdn.microsoft.com/library/windows/hardware/ff537660)」を参照してください。

ホストコントローラーがサイクル時間の同期をサポートしているかどうかを判断するには、クライアントドライバーが\_要求を送信し、IRB の**Nlevel**メンバーを2に設定して、バスドライバーに[ **\_ローカル\_ホスト\_情報**](https://msdn.microsoft.com/library/windows/hardware/ff537644)要求を送信する必要があります。 バスドライバーは、この要求に応じて、 [**GET\_ローカル\_ホスト\_INFO2**](https://docs.microsoft.com/windows-hardware/drivers/ddi/1394/ns-1394-_get_local_host_info2)構造体を返します。 バスドライバーによってホスト\_情報が設定されている場合\_は、GET\_LOCAL\_HOST\_INFO2 の**Hostcapabilities**メンバーの\_サイクルフラグに\_開始\_をサポートします。これは、ホストコントローラーがサイクル時間を使用したアイソクロナス操作の同期をサポートしていることを示します。

 

 




