---
title: モバイルプランの統合
description: このトピックでは、モバイルプランプログラムの統合手順について説明します。
ms.assetid: F818B69D-DFA3-4296-B420-43F59D370E3C
keywords:
- Windows Mobile プラン統合, モバイルプラン統合モバイルオペレーター
ms.date: 03/25/2019
ms.localizationpriority: medium
ms.openlocfilehash: 882a5995c7558be761a0dca9974e2e7755c94897
ms.sourcegitcommit: f89a978ee23b9d2f925b13ea56b2c6cd48b4603a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/10/2019
ms.locfileid: "68948037"
---
# <a name="mobile-plans-integration"></a>モバイルプランの統合

## <a name="overview"></a>概要

このトピックでは、モバイルプランソリューションのモバイルオペレーター実装を統合および検証するために必要な手順について説明します。

## <a name="mobile-plans-service-environments"></a>モバイルプランサービス環境

2つのモバイルプランサービス環境、*ステージング*環境、*運用*環境があります。 統合と検証は*ステージング*環境で実行されますが、*運用*環境は商用の起動にのみ使用されます。

## <a name="validation"></a>［確認］

このセクションでは、統合フェーズに移行する準備ができていることを確認するために必要なテストと検証について説明します。

### <a name="mobile-operator-web-portal"></a>携帯電話会社の web ポータル

定義した50エンドツーエンドのユーザーケースを実行できることを検証します。 以下に例を示します。

- ESIM プロファイルをインストールします。
- ウォーム SIM をアクティブにします。
- サブスクリプションに残高を追加します。
- トランザクションをキャンセルしています。

### <a name="walled-garden"></a>Walled 庭園

ユーザーが残高を持っていない場合は、ユーザーが[Walled 庭園](mobile-plans-walled-garden.md)で定義されている Walled 庭園サイトにアクセスできることを確認します。

### <a name="getting-balance"></a>残高を取得する

1. ユーザーが Walled 庭園状態にある場合、返される残高はゼロである必要があります。
2. ユーザーがデータを使用する場合、返される残高は、残りのデータを反映するためにデクリメントする必要があります。
3. `Create Order` API が呼び出された後に割り当てられた時間が経過になると、残りの残り時間を減らす必要があります。

### <a name="test-with-expired-mtls-certificate"></a>有効期限が切れた MTLS 証明書を使用してテストする

1. MTLS 証明書を使用せずに MO Api を検証します。 期待される状態:401は許可されていません。
2. 有効期限が切れた MTLS 証明書で検証します。 期待される状態:401は許可されていません。

### <a name="getbalance-negative-tests"></a>GetBalance の否定テスト

1. 無効な SIM で検証します。 期待される状態:404が見つかりません。
2. 不明な場所または不適切な場所の文字列/数値で検証します。 期待される状態:400 (無効な要求)。
3. 負の数としてフィルターの制限を使用し、INT の制限を超えることを検証します。 期待される状態:400-要求が正しくありません。 フィルターの制限 (整数) に対して、状態が "200 OK" であることが必要です。
4. 任意の*場所*( `GetBalance`または空の場所)、 *fieldtemplate*、 *limit*、およびその他のパラメーターの組み合わせを使用せずに、への呼び出しを検証します。 期待される状態:400 (bad Request) に無効なパラメーターの値が含まれています。 予期される状態は200– OK です。

### <a name="getbalance-api-load-test"></a>GetBalance API のロードテスト

`GetBalance` API を運用環境で有効にする前に、モバイルプランサービスとモバイルオペレーターサービスの両方をテストして、予想される負荷を処理できるかどうかを確認する必要があります。 携帯電話会社は、ロードテストを実行することが想定されています。 それが完了すると、モバイルプランはロードテストを実行します。 携帯電話事業者は、ロードテストで使用される一時的に 1000 ICCIDs の一覧を提供する必要があります。

このテスト構成は、1万 SIMs の予想されるトラフィックから生成されます。 ピークの RPS は、このトラフィックプロジェクションの3倍に基づいて計算されます。

- ロードテストは25個のテストエージェントから実行されます。
- ロードテストは次の場合に実行されます。
  - 1000異なるユーザー (#ICCIDs) と3つの RPS (ピーク) で1時間。
- 負荷分散クロス Api は次のようになります。

| API | 負荷分散 | 予想される RPS | ピーク時の RPS |
| --- | --- | --- | --- |
| GetBalance | 96% | 1 | 3 |

テストの実行中、予想される成功率は次のとおりです。**99.9%** と平均待機時間:**400ms**。 この成功率を達成すると、MO API はモバイルプランの運用サービスで有効になります。
