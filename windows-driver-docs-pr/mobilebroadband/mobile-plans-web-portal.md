---
title: モバイルプラン Web ポータル
description: このトピックでは、モバイルプランプログラムの実装手順について説明します。
ms.assetid: 283E45EF-D421-429B-A9AF-BED64BB670B0
keywords:
- Windows Mobile プラン Web ポータル、モバイルプラン実装のモバイルオペレーター
ms.date: 03/25/2019
ms.localizationpriority: medium
ms.openlocfilehash: fe9c2825c12c1be6c0a2ed49c7cfefd06a1f2ca8
ms.sourcegitcommit: f89a978ee23b9d2f925b13ea56b2c6cd48b4603a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/10/2019
ms.locfileid: "68948071"
---
# <a name="mobile-operator-web-portal"></a>通信事業者の Web ポータル

## <a name="overview"></a>概要

このトピックでは、モバイルオペレーターがモバイルプランアプリでホストされている curated web エクスペリエンスを使用して、Windows ユーザーに直接接続ソリューションを提供できるようにする web ポータルについて説明します。 モバイルオペレーターは、これらの設計原則に従って web エクスペリエンスを作成する必要があります。これにより、ユーザーはポータル内を移動しながら高品質のエクスペリエンスを実現できます。 モバイルオペレーター web ポータルは、モバイルプランソリューションでサポートされるすべてのシナリオに使用されます。そのため、プログラムの中で最も重要なコンポーネントの1つです。

Web ポータルのフローと参照のデザインの詳細については、「 [web ポータルのフローと参照の設計](mobile-plans-appendix.md#web-portal-flow-and-reference-design)」を参照してください。

## <a name="web-portal-interface-for-esim-enabled-devices"></a>ESIM が有効になっているデバイス用の Web ポータルインターフェイス

Mobile plan アプリは、 [WebView](https://docs.microsoft.com/uwp/api/Windows.UI.Xaml.Controls.WebView)コントロールを使用して、携帯電話会社の web ポータルエクスペリエンスをホストし、提示します。 ポータルは、モバイルオペレーターがホストするサービスエンドポイントを直接呼び出すアプリによって呼び出され、返されたコンテンツはコントロール内に直接レンダリングされます。

の`WebView`起動時に、いくつかのパラメーターが、呼び出しの一部としてポータルに渡されます。 モバイルオペレーターに1つ以上の eSIM プロファイルが関連付けられている場合、 *iccids*もポータルに渡されます。

次の例は、の呼び出し`MyWebView.Navigate()`に埋め込まれている eSIM 対応デバイス用の起動パラメーターを示しています。

```C#
MyWebView.ScriptNotify += MyWebView_ScriptNotify;

List<Uri> allowedUris = new List<Uri>();

allowedUris.AddRange(AllowedNotifyUris);

MyWebView.AllowedScriptNotifyUris = allowedUris;

MyWebView.Navigate(“https://moportal.com?market=US&location=US&transactionId=%2F7RBTuSJt02OZbX8.4&eid=89033023422130000000000199055797&imei=001102000315468&iccids=8988247000101867183,8988247000103824828”);
```

アプリの更新との下位互換性を提供するために、ポータルでは、要求で渡される可能性のある追加のパラメーターを無視する必要があります。 これにより、モバイルオペレーターの統合を中断することなく、アプリに新しい機能を導入する柔軟性と能力が確保されます。

次の表では、eSIM で使用できる起動パラメーターについて説明します。

| パラメーター名 | 説明 | 例  |
| --- | --- | --- |
| eid            | ESIM 識別子。 これは、eSIM が存在する場合にのみ送信されます。                                                                                                                            | `eid= 89033024010400000100000000009136`          |
| iccids         | 省略可能なパラメーター。 ESIM で使用可能なプロファイルからの ICCIDs の一覧を指定します。 ESIM で使用可能な MO に一致する ICCIDs がない場合、このパラメーターは送信されません。 | `iccids=8988247000100003319, 988247000100003555` |
| imei           | デバイスの IMEI 番号。                                                                                                                                                                | `imei=001201234567890`                           |
| location       | 国レベルの粒度を持つユーザーの現在の物理的な場所。                                                                                                                    | `location=us`                                    |
| transactionId  | セッションのデバッグに使用するトランザクション ID。 プロバイダーはこれをログに記録し、通知ペイロードで送信する必要があります。 最大サイズは64文字です。                                     | `transactionId=waoigFfX00yGH3Vb.1`               |
| market         | PC のリージョン設定の2文字の ISO コード。                                                                                                                                | `market=us`                                      |

ユーザーの言語設定は、次の表で説明するように、受け入れ言語のヘッダーを使用して送信されます。

| ヘッダー名     | 説明  | 例 |
| --- | --- | --- |
| Accept-言語 | ユーザーの現在の言語設定。 可能であれば、MO ポータルでは、指定された言語でコンテンツを表示する必要があります。 詳細については[、RFC 7231 のセクション5.3.5 を参照してください。Accept-言語](https://tools.ietf.org/html/rfc7231#section-5.3.5)。 | `Accept-Language: en-us` |

## <a name="web-portal-interface-for-physical-sims"></a>物理 SIMs の Web ポータルインターフェイス

従来の物理 UICC を使用してモバイルオペレーターポータルを呼び出すインターフェイスは、eSIM の場合と同じです。 ただし、ポータルに渡されるパラメーターは異なります。

```C#
MyWebView.Navigate(“https://moportal.com?iccid=8988247000100003319&imei=001102000311608&market=us&transactionId=waoigFfX00yGH3Vb.1&location=us”);
```
次の表では、物理 SIM で使用できる起動パラメーターについて説明します。

| パラメーター名 | 説明                                                                                                                                                                              | 例                                          |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| iccid          | 物理 SIM の必須パラメーター。 物理 sim の ICCID を指定します。                                                                                                          | `iccid=8988247000100003319`                      |
| imei           | デバイスの IMEI 番号。                                                                                                                                                                | `imei=001201234567890`                           |
| location       | 国レベルの粒度を持つユーザーの現在の物理的な場所。                                                                                                                    | `location=us`                                    |
| transactionId  | セッションのデバッグに使用するトランザクション ID。 プロバイダーはこれをログに記録し、通知ペイロードで送信する必要があります。 最大サイズは64文字です。                                     | `transactionId=waoigFfX00yGH3Vb.1`               |
| market         | PC のリージョン設定の2文字の ISO コード。                                                                                                                                | `market=us`                                      |

ユーザーの言語設定は、次の表で説明するように、受け入れ言語のヘッダーを使用して送信されます。

| ヘッダー名     | 説明                                                                                                                                                                                                                                     | 例                  |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |
| Accept-言語 | ユーザーの現在の言語設定。 可能であれば、MO ポータルでは、指定された言語でコンテンツを表示する必要があります。 詳細については[、RFC 7231 のセクション5.3.5 を参照してください。Accept-言語](https://tools.ietf.org/html/rfc7231#section-5.3.5)。 | `Accept-Language: en-us` |

## <a name="web-portal-design-policies"></a>Web ポータルのデザインポリシー

Windows で最高のユーザーエクスペリエンスを実現するために、モバイルオペレーターは、web ポータルを開発するときに、このセクションのポリシーとガイドラインに従うことをお勧めします。

### <a name="business-functions"></a>ビジネス関数

| ポリシー                                                                                                                                                                                                                                                                           | 必須または推奨 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| Web ポータルのエクスペリエンスは、提供された国で適用されるすべての法律および規制の要件を満たしている必要があります。 Web ポータルに表示されるすべてのコンテンツは、適用されるすべての法律に準拠している必要があります。 | 必須 |
| Web ポータルエクスペリエンスで提供される製品は、ネットワーク接続のためのものである必要があります。 | 必須 |
| Web ポータルエクスペリエンスを通じて提供されるネットワーク接続製品には、オファリングと用語の明確な説明が含まれている必要があります。 Web ポータルからユーザーが特定のサービス条件を確認できるようにする必要があります。 | 必須 |
| カスタマーサポートの連絡先情報は、web ポータルからユーザーがアクセスできるようにする必要があります。 | 必須 |
| 携帯電話会社のプライバシーポリシーは、ユーザーが web ポータルから確認できるようにする必要があります。 | 必須 |
| 携帯電話会社が提供するアカウント管理のエクスペリエンスでは、ユーザーが現在のデータプラン (サブスクリプションのキャンセルなど) に対してアクションを実行できるようにする必要があります。 | 必須 |
| ユーザーは、web ポータルからプランの購入またはアクティブ化が正常に完了した後で、注文の確認メッセージを受信する必要があります。 | 推奨 |

### <a name="security"></a>セキュリティ

| ポリシー                                                                                                                                                                                                                                                                           | 必須または推奨 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| Web ポータルのエクスペリエンスでは、サードパーティ所有またはブランド化されたアプリやモジュールを配信したりインストールしたりしないでください。 | 必須 |
| ユーザーが携帯電話会社の web ポータルエクスペリエンスを終了する前に、ユーザーは web ポータルから安全にログアウトする必要があります。  | 必須 |
| ポータルの URI と、web ポータルとの間で送受信されるすべての要求または通知は、セキュリティで保護された HTTPS プロトコルを使用する必要があります。 | 必須 |
| すべての web ポータルのリソースと参照で、セキュリティで保護された HTTPS プロトコルを使用する必要があります。 | 必須 |

### <a name="advertising"></a>広告

| ポリシー                                                                                                                                                                                                                                                                           | 必須または推奨 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| Web ポータルでは、ダウンロード、開示通知、スポンサーコンテンツ、ビデオ、サウンドファイル、アニメーション、またはそれ以外の大きなメディアファイルや画像を表示したり、ダウンロードしたりすることはできません。 | 必須 |

### <a name="capabilities"></a>機能

| ポリシー                                                                                                                                                                                                                                                                           | 必須または推奨 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| Web ポータルエクスペリエンスに最低限必要な機能は、ユーザーが携帯電話会社に登録されているアカウントを使用してデータプランを購入できるようにすることです。 | 必須 |
| Web ポータルは、ユーザーが web ポータルのエクスペリエンスを終了するまで、すぐに起動し、ユーザー入力に応答したままにする必要があります。 | 必須 |
| Web ポータルが呼び出されると、次のいずれかの期間が終了するまで、ユーザーのフォーカスを保持する必要があります。 <ul><li>アクティブ化フローが完了し、フォーカスが web ポータルから Mobile plan アプリに戻されました。</li></ul><p>スイッチまたは</p><ul><li>ユーザーがフローをキャンセルし、Mobile plan アプリに返されました。</li></ul> | 必須 |
| Web ポータルでは、ポップアップウィンドウを表示したり、他のウィンドウを開いたり、アクティブ化フローを完了するために必要な場合を除き、他の web サイトやアプリにユーザーをリダイレクトしたりすることはできません。 | 必須 |
| Web ポータルは、支払い方法の拒否、バックエンドエラーなど、すべての正当なエラーと例外を処理する必要があります。エラーまたは例外が処理された後、ユーザーが終了して Mobile plan アプリに戻るには、web ポータルの応答性を維持する必要があります。 | 必須 |
| ユーザーの操作で修正できるエラーが発生した場合は、携帯電話会社のカスタマーサポート情報をエラーメッセージと共に表示することをお勧めします。 | 推奨 |

### <a name="usability"></a>ユーザビリティ

| ポリシー                                                                                                                                                                                                                                                                           | 必須または推奨 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| Web ポータルの既定のフレームサイズは 800 x 600 です。 モバイルオペレーターは、応答性の高い web デザインを採用する必要があります。これにより、ユーザーがモバイルプランアプリのサイズを大きく、より小さい画面に合わせて変更したときに、web ポータル上のコンテンツを web コントロールフレームに合わせて自動調整できるようになります。 | 必須 |
| Web ポータルエクスペリエンスを読み込むための読み込み時間とデータ使用量を最適化する必要があります。 | 必須 |
| Web ポータルのエクスペリエンスは、必要な画面上のガイドラインに従って簡単かつ簡単に移動できます。 | 必須 |
| Web ポータルのユーザーインターフェイス要素は、モバイルプランアプリに統合されたエクスペリエンスを提供する必要があります。これは、ユーザーの混乱を招くことなく、埋め込み web コントロールであることをユーザーに通知します。 たとえば、web ポータル内に [閉じる]/[最大/最小] ボタンはありません。 | 必須 |
| Web ポータル内のページのレイアウトはクリーンで、移動が簡単です。 ユーザーは、ポータルでの UI 要素を使用して、web ポータル内のページを前後に移動できます。 詳細については、「 [Web ポータルのフローと参照の設計](mobile-plans-appendix.md#web-portal-flow-and-reference-design)」を参照してください。 |必須 |
| Web ポータルは WebView コントロールフレーム内で機能している必要があり、呼び出された後は、ユーザーのモバイルプランアプリとの対話をいつでも妨げないようにする必要があります。 | 必須 |
| Web ポータルには、画像、バナー、長いテキスト、外部リンクなどの多くが含まれていないことが必要です。 | 必須 |
| ユーザーは、必要に応じてフローを終了するために、web エクスペリエンス内の画面上にある [キャンセル] ボタンを使用できるようにする必要があります。 | 推奨 |
| 携帯電話会社は、ブランドを最もよく表す配色とフォントを選択できます。 すべてのビジュアル要素がうまく連携し、ブランドを補強するように注意する必要があります。 | 推奨 |

### <a name="localization"></a>ローカリゼーション

| ポリシー                                                                                                                                                                                                                                                                           | 必須または推奨 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| Web ポータルでは、ユーザーの優先言語でコンテンツを表示するために、モバイルプランアプリによって渡されたユーザーのロケール設定を受信して理解できる必要があります。 | 必須 |
| モバイルオペレーターは、サポートする言語で web ポータルをローカライズできます。 | 推奨 |
| Web ポータルによって提供されるエクスペリエンスは、サポートされるすべての言語でほぼ同じである必要があります。ただし、データプランの可用性はリージョンによって異なる場合があります。 | 推奨 |

### <a name="accessibility"></a>ユーザー補助

| ポリシー                                                                                                                                                                                                                                                                           | 必須または推奨 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| Web ポータルでは、無効になっているユーザーにアクセシビリティを提供し、携帯電話事業者がサービスを提供する管轄区域に適用されるアクセシビリティガイドラインに準拠する必要があります。 | 推奨 |
