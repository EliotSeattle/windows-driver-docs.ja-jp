---
title: キューブ環境マップのサポート
description: キューブ環境マップのサポート
ms.assetid: 41666b17-39b0-4022-925f-538455e41f3a
keywords:
- マッピングのキューブの環境
- 環境の WDK Direct3D のマッピング
- キューブ環境マップ WDK Direct3D
- 照明 WDK Direct3D
- WDK Direct3D の反射
- 360 度環境 WDK Direct3D
- リアルタイムの環境を WDK Direct3D のマッピング
- WDK Direct3D 円形のマップ
- WDK Direct3D 球のマップ
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: d97df29e447dc145706f62149dd11edf98342054
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63376767"
---
# <a name="cube-environment-map-support"></a>キューブ環境マップのサポート


## <span id="ddk_cube_environment_map_support_gg"></span><span id="DDK_CUBE_ENVIRONMENT_MAP_SUPPORT_GG"></span>


Direct3D の複数のテクスチャのサポートでは、光源の効果や反射の環境のマップを使用できるようにします。 ただし、循環のような単一マップ 360 度のソリューションまたは球のマップは、リアルタイムで広く使用されるのに十分な堅牢です。 リアルタイムの生成と 360 度の環境のアドレス指定の最適なソリューションは、6 つのテクスチャ (顔) から成る、立方体のマップです。 90 度フィールドからのビューの適切な方向でのカメラをポイントして、それぞれの顔を生成できます。 頂点のベクトル (normal、リフレクション、または屈折) がラスタライズ ハードウェアにその後が多角形の間でそれらを反復処理し、キューブ マップの面に補間ベクトルの交差を計算します。 提供されます。 アプリケーションまたは API は、キューブの環境のマップを生成する場合、ドライバーについては、変換行列を必要としたりしない頂点のベクトルが定義されている領域を調整します。 これは、ベクトルが論理的に同じ座標空間内にある環境マップのアドレスにのみ使用されるためです。

ベクターの正規化は、円形のマップのアドレス指定球のマップのアドレス指定には、三角関数の使用が必要です。 1 つのマップの環境のすべての種類は非線形: 球のマップは、極付近の大規模なゆがみ円形のマップが非常に歪んで表示されると、その周囲の近く異方性。 これにより、視点が、サーバーの全体表示領域にゆがみが生じるような方法で変更されるたびに、環境のマップを再作成するために必要です。

立方体環境マップ、90 ° ビューがフィールドで 6 つの異なる方向実際またはシミュレーション上のカメラをポイントして形成されたでは、このような短所の無料です。 ゆがみの少ないが頻繁に更新する必要がありますが、およびテクスチャのパースペクティブに正しいマッピングを既に使用されているような数式を使用して対処できますが高速化を生成できます。

一般に、キューブ マップは、複雑な光の効果や反射のリアルタイム環境マッピングを提供する最適な選択肢です。

キューブ マップの使用は、ドライバーを使用して、渡される、 [ **D3dDrawPrimitives2** ](https://msdn.microsoft.com/library/windows/hardware/ff544704)メカニズムの状態を表示します。 [FVF](fvf--flexible-vertex-format-.md)テクスチャ座標は、そのテクスチャ座標のセットの FVF コード 01 で渡されます。

ワールド座標; で、キューブ マップが定義されています。これは、ワールド変換行列では、恒等行列があります。 キューブ マップにテクスチャの変換は、対応するテクスチャ座標インデックスで使用する場合は、さまざまな領域に表示されます。 これらのテクスチャ座標のインデックスは、4 つの面で直接する検索は、+ z の顔です。 Y は、既定の構成です。 配信元 (u、v) テクセルのグリッドが顔ごとの左上隅にある、キューブの中心からポイント カメラによって追加変換せず、顔の作成を許可するためには。

**DirectDrawCreateEx**はキューブ マップを示すフラグが作成されます。 ドライバーを必要として埋め込むことがありますが、顔を API レベルで割り当てられていない必要があります。 セキュリティ記述子には、アプリケーションが使用する予定の面を示す 6 つのビットのビット フィールドが含まれています。 顔を達成するときに、 **IDirectDrawSurface7::GetAttachedSurface**メソッド、 **NULL**顔はスキップされます。 各面のディメンションは、サーフェスの記述子から使用でき、顔 bitcode フィールドがどの面をことを示します。 詳細については**DirectDrawCreateEx**と**IDirectDrawSurface7::GetAttachedSurface**、DirectDraw SDK ドキュメントを参照してください。

返されたポインター **DirectDrawCreate**最初へのポインターでは実際には、非**NULL**キューブ内の顔です。 Face id は、画面のビットコードを実行して取得できます。 これはポインターに渡される、 **IDirect3DDevice7::SetTexture**メソッド (Direct3D SDK のドキュメントで説明) このマップをマルチ テクスチャ パイプラインで使用できるようにします。

表示する場合のサーフェスのいずれかは、キューブ マップが、D3DPTEXTURECAPS と作成している必要があります\_キューブ マップの上限フラグを設定します。

呼び出しで作成されていないすべての顔をセキュリティ記述子で指定された色で塗りつぶされますと見なされます**dwEmptyFaceColor**メンバー。 (を参照してください、 [ **DDSURFACEDESC2** ](https://msdn.microsoft.com/library/windows/hardware/ff550340)構造です)。

**注**  現在の制限。すべてのキューブの面では、同じサイズである必要があり、正方形である必要があります。 キューブの面では、MIP マップを指定できます。 キューブ マップ テクスチャの色のキーの更新はサポートされません。 その他のテクスチャとアルファ チャネルとアルファ パレットはサポートされます。

 

 

 





