---
title: GpuMmu モデル
description: GpuMmu モデルでは、グラフィックス処理装置 (GPU) は、プロセスごとの GPU 仮想アドレスを物理アドレスを変換独自メモリ管理ユニット (MMU) が。
ms.assetid: FFDFD647-2F00-4AC3-A41A-4224562A51ED
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 1b4561455bd19051763ae3b94447abc831d6a54b
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56548685"
---
# <a name="gpummu-model"></a>GpuMmu モデル


*GpuMmu*モデルでは、グラフィックス処理装置 (GPU) が物理アドレスに、プロセスごとの GPU 仮想アドレス変換独自メモリ管理ユニット (MMU)。

各プロセスでは、独立した CPU と GPU 仮想アドレス空間個別のページ テーブルを使用するがあります。 ビデオ メモリ マネージャーは、すべてのプロセスの GPU 仮想アドレス空間を管理しは、割り当て、増加して、更新、保存場所を確保とページ テーブルを解放を担当します。 GPU MMU で使用されるページ テーブルは、のハードウェア形式は、ビデオ メモリ マネージャーに既知でないしはデバイス ドライバー インターフェイス (Ddi) を抽象化します。 抽象化には、固定サイズのページ テーブルおよびサイズ変更可能なルートのページ テーブルを含む複数レベルの変換がサポートしています。

ビデオ メモリ マネージャーは GPU の仮想アドレス空間とその基になるページ テーブルを管理する責任を負いますが、ビデオ メモリ マネージャーの割り当てに GPU 仮想アドレスを割り当てていないは自動的にします。 この役割は、ユーザー モード ドライバーに分類されます。

ビデオ メモリ マネージャーは、ユーザー モード ドライバーにサービスの 2 つのセットを提供します。 最初に、ユーザー モード ドライバーは、既存のビデオ メモリを割り当てることができます[ *Allocate* ](https://msdn.microsoft.com/library/windows/hardware/ff568893)コールバックを通じて、既存のメモリを解放し、 [ *Deallocate*](https://msdn.microsoft.com/library/windows/hardware/ff568898)コールバック。 今日のようなだけこのハンドルを返しますユーザー モード ドライバー GPU エンジンによって処理できるビデオ メモリ マネージャーの割り当て。 このような割り当ては、割り当ての物理部分だけを表し、割り当ての一覧の参照を使用して物理的には、運用、エンジンによって参照される可能性があります。

仮想モードで実行されているエンジンでは、GPU の仮想アドレスは仮想的にアクセスする前に、割り当てに明示的に割り当てられる必要があります。 この目的のビデオ メモリを予約または無料の GPU 仮想アドレス、ユーザー モード ドライバーがサービスし、プロセスの GPU 仮想アドレス空間に範囲を特定の割り当てをマップ マネージャーを提供します。 これらのサービスは非常に柔軟なプロセスの GPU 仮想アドレス空間経由でユーザー モード ドライバー細かく制御できます。 ユーザー モード ドライバーは、割り当てに非常に特定の GPU 仮想アドレスを割り当てるか、ビデオ メモリ マネージャーが自動的にいくつかの最小値を指定する可能性がある、使用可能な 1 つを選択できるようにすることし、max の GPU 仮想アドレスを制限します。 1 つの割り当ては、関連付けられている複数の GPU 仮想アドレスのマッピングを必要があり、サービスを実装するために、ユーザー モード ドライバーを提供、*タイル リソース コントラクト*します。

同様に、リンクされたディスプレイ アダプターの構成で、ユーザー モード ドライバー可能性があります明示的に GPU 仮想アドレスを特定の割り当てのインスタンスにマップし、マッピングごとに、マッピングが再帰または特定のピア GPU にするかどうかを選択します。 このモデルでは、割り当てに割り当てられた CPU および GPU 仮想アドレスは依存しません。 ユーザー モード ドライバーを変えずに、両方のアドレス空間にするか保持独立したことがあります。

GPU の仮想アドレスは、DDI インターフェイスを通じて固定 4 KB ページ単位で論理的に管理されます。 GPU の仮想アドレスは、いずれかに常駐しているは、割り当てメモリ セグメントまたはシステムのメモリを参照できます。 ドライバーの選択で 4 KB (64 kb) のいずれかでメモリのセグメントを管理しながら、システム メモリは 4 KB 物理粒度で管理されます。 ビデオ メモリ マネージャーのすべての割り当てを配置およびサイズは、ドライバーによって選択されたページ サイズの倍数であります。

無効な範囲の GPU の仮想アドレスでアクセス違反が発生し、コンテキストまたはアクセス違反の原因となったデバイスの終了結果にアクセスします。 ビデオ メモリ マネージャーにこのような障害から回復するには、エンジンを開始する失敗した場合は、アダプター全体のタイムアウトの検出の復旧 (TDR) に昇格されるをリセットします。

*GpuMmu*モデルを次に示します。

![gpummu モデル](images/gpummu-model.1.png)

 

 





