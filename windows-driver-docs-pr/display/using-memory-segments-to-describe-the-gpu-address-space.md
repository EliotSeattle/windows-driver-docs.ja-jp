---
title: メモリのセグメントを使用して GPU アドレス空間を説明するには
description: メモリのセグメントを使用して GPU アドレス空間を説明するには
ms.assetid: 5ff23d53-0860-44fa-8ce1-c34aa22b8730
keywords:
- メモリ セグメントについて、メモリのセグメントの WDK 表示
- ビデオ メモリ WDK の表示を非表示
- ビデオ メモリ マネージャー WDK の表示
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 2f342510d634ef43fd8872888bb64fcfe1a6470e
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56551858"
---
# <a name="using-memory-segments-to-describe-the-gpu-address-space"></a>メモリのセグメントを使用して GPU アドレス空間を説明するには


## <span id="ddk_using_memory_segments_to_describe_the_gpu_address_space_gg"></span><span id="DDK_USING_MEMORY_SEGMENTS_TO_DESCRIBE_THE_GPU_ADDRESS_SPACE_GG"></span>


ビデオ メモリ マネージャーでは、GPU のアドレス空間を管理する前に、ディスプレイのミニポート ドライバーは、メモリのセグメントを使用して、ビデオ メモリ マネージャーに、GPU のアドレス空間を記述する必要があります。 表示のミニポート ドライバーでは、メモリのセグメントを汎用化し、ビデオ メモリ リソースを仮想化を作成します。 ドライバーはメモリに基づいてメモリ セグメントの種類を構成できます (たとえば、フレーム バッファー メモリまたはシステム メモリの開口部) ハードウェアがサポートします。

ドライバーの初期化中に、ドライバーは、ビデオ メモリ マネージャーでのメモリ リソースの管理方法について説明します。 セグメントの種類の一覧を返す必要があります。 ドライバーをサポートし、応答の呼び出しをすることで各セグメントの種類について説明しますタイプのセグメントの数を指定します、 [ **DxgkDdiQueryAdapterInfo** ](https://msdn.microsoft.com/library/windows/hardware/ff559746)関数。 ドライバーでは、各セグメントの使用方法について説明する[ **DXGK\_SEGMENTDESCRIPTOR** ](https://msdn.microsoft.com/library/windows/hardware/ff562035)構造体。 詳細については、次を参照してください。[メモリ セグメントの使用を初期化して](initializing-use-of-memory-segments.md)します。

その後、セグメントの種類と数は変更されません。 ビデオ メモリ マネージャーにより各プロセスが、特定のセグメントでのリソースが公平に共有を受信するようになります。 ビデオ メモリ マネージャー管理個別に、すべてのセグメントされていませんし、セグメントが重複しません。 そのため、ビデオ メモリ マネージャーは、アプリケーションは、別のセグメントから現在保持しているリソースの量に関係なく、アプリケーションに 1 つのセグメントから大量のビデオ メモリ リソースを割り当てます。

ドライバーは、そのメモリ セグメントのセグメント識別子を割り当てます。 後で、要求し、ビデオ メモリ マネージャー ビデオ リソースの割り当てを作成してそれらのリソースをレンダリングする、ドライバー、要求をサポートするセグメントを識別し、ドライバーが、ビデオ メモリ マネージャーを希望するセグメントを順番に指定します使用します。 詳細については、次を参照してください。[割り当てを作成するときにセグメントを指定する](specifying-segments-when-creating-allocations.md)します。

ドライバーは、そのメモリ セグメントで GPU を利用できるすべてのビデオ メモリ リソースを指定する必要はありません。ただし、ドライバーは、システムで実行されているすべてのプロセス間で、ビデオ メモリ マネージャが管理するすべてのメモリ リソースを指定する必要があります。 頂点シェーダーのマイクロ fixed 関数のパイプラインを実装する、GPU のアドレス空間がマイクロ コードが常にすべてのプロセスで使用できるので、ビデオ メモリ マネージャー (つまり、一部ではないセグメントの) によって管理されるメモリの外部に置くことができます、されプロセス間の競合の原因ではありません。 ただし、ビデオ メモリ マネージャー割り当てる必要があります、ビデオ メモリ リソースなど、リソースの種類は、すべてをかなり使用可能なである必要がありますので、頂点バッファー、テクスチャ、レンダリング ターゲット、およびドライバーのメモリのセグメントのいずれかから、アプリケーション固有のシェーダー コード処理します。

次の図では、ドライバーが GPU のアドレス空間からのメモリのセグメントを構成する方法を示します。

![セグメントに gpu のアドレス空間の除算を示す図](images/memseg.png)

**注**  ビデオ メモリ マネージャーから非表示には、ビデオ メモリ領域をユーザーにマップできないまたはの特定のプロセスに排他的に使用できます。 これを行うには、システムで実行されているすべてのプロセスがあるすべてのメモリへのアクセスを必要とする仮想メモリの基本的な規則を中断します。

 

 

 





