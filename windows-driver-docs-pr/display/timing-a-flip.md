---
title: 反転するタイミング
description: 反転するタイミング
ms.assetid: abd3188e-0f75-401a-88e3-e2a9c5788ad5
keywords:
- ページ フリップ WDK DirectDraw を描画、タイミング
- DirectDraw フリッピング WDK Windows 2000 を表示するタイミング
- WDK の DirectDraw を反転するページのタイミング
- WDK DirectDraw を反転、タイミング
- WDK DirectDraw を反転するタイミング
- WDK DirectDraw を時間を表示します。
- WDK DirectDraw を破棄します。
- スキャン ライン WDK DirectDraw
- WDK の DirectDraw を画面の回転
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: c7b99ce62e87932f52a700c4dd903e3cd5d95194
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56558108"
---
# <a name="timing-a-flip"></a>反転するタイミング


## <span id="ddk_timing_a_flip_gg"></span><span id="DDK_TIMING_A_FLIP_GG"></span>


フリップ レジスタが使用できると、スキャン ラインの既知の場合、フリップのタイミングは非常に簡単です。 ページ フリップは最後の反転が発生したかどうかを確認する登録チェックだけを確認してスキャン ラインは、垂直方向の空白の反転を実行する前にします。 スキャン ラインと反転のレジスタが利用できない場合は、ただし、次の段落で説明されているアルゴリズムの 1 つ以上を使用します。

-   ハードウェアがスキャン ラインが更新サイクルにされたかどうかを確認するため少しいない場合は、複数のメソッドを使用して、反転にかかる時間をください。 別の方法は、経過時間に基づきます。 最後のフリップからサーフェス全体を描画するための十分な時間が経過した場合に反転することができます。 この時間は経験的 (しない限り、モニターのリフレッシュ レートが呼ばれます) ドライバーの初期化時およびモードの変更とによって決まります表示が縦方向の同期になるまでポーリング ポーリングまで垂直方向の同期ではないです。これは、20 のイテレーションの実行優先度のスレッドを最大に設定行われます。 結果が提供する 20 で割った値*表示期間*します。 これは、バック バッファーへのアクセスを許可する前に待機する最大時間です。 (表示時間が既にわかっている場合に必要ありませんを計算する)。ほとんどの場合の反転を実行する前に大幅に短縮期間が必要ですは完全に信頼性が高いため、表示時間が、フォールバックとして使用されます。

-   スキャン ラインの行番号にしか使用できない場合、最も簡単な方法は時間を記録し、行をスキャンするは。 次に、スキャン ラインは、値が以前より小さくなりますが、更新サイクルを通じてされています。 たとえば、スキャン ラインが 300 行で、初めての場合はポーリング対象とし、50 行に、次回、し、全体の画面が表示された少なくとも 1 回です。 ただし、スキャン ラインは、すべてのディスプレイ カードの信頼性の高い完全ではありません。 場合によってはレジスタからの読み取りおよび書き込みできるを同時に、2 つの異なる数の半分を提供します。 このような場合は、正しい数で報告していることを確認するには、2 回登録を読み取る必要があります。 場合によっては、スキャン ライン不正確である水平方向の同期に渡されます。かどうかスキャン ラインが現在表示で多くの場合を示すフラグは、スキャン ラインが水平方向の空白は、負の結果を false を返します。

-   スキャン ラインの行番号を使用できない場合は、垂直方向の空白と表示に表示から、スキャン ラインが渡されることを確認することがあります。 追跡、スキャン ラインは、ディスプレイの出入りが成功したときを指定できます、全体の更新サイクルが完了したとき。 スキャン ラインが表示または垂直方向の空白かどうかを確認する機能がすべてのディスプレイ カードで使用できますが、スキャン ラインの数ができない可能性があります。

表示からちらつきの最後のビットを取得する必要があるいくつか調整などを計算が発生していない (たとえば、アドレスが DWORD 境界上にあるために、実際のアドレスを取得する場所を 2 つの右シフト) アドレスが読み取られた後にします。 分裂を避けるため、スキャン ラインの垂直同期されていないし、垂直方向の同期のすぐ上があり、ページ フリップへの書き込みを登録する前に、表示ことを確認します。

ディスプレイ カードに基づいていますが、ビデオ グラフィックス カード (VGA) 仕様の元の IBM に、スーパー VGAs が大幅に変化 (を参照してください*EGA、VGA、Super VGA のカードにプログラマー ガイド*Richard F. Ferraro - Addison Wesley、最新でエディションの場合)。 一部のカードには、スキャン ラインを垂直方向の空白がかどうか、または表示では、さらに決定する簡単な方法はありません。 これらの欠陥は、高度な表示機能の増加の需要に合わせて、競合他社とより重要になります。 それまでは、ドライバーの作成者は、これらの欠陥を補正する創造性を使用する必要があります。

フリップしてもかまいませんが、表示する画面への参照を次が読み込まれますフリップ レジスタに。 スキャン ラインは、過去の垂直方向の同期を取得し、表示領域も、何も起こりません。 反転の登録は 1 回読み取られます。 ページ フリップの別のものが格納されている場合は、時間を前に、または、画面に読み取られる、終了処理を発生と同時に書き込まれた場合を登録します。 レジスタを読み込んだらの画面をロックまたはまだ描画されている間に書き込まれるしないでください。

レジスタが読み取られたかどうかをチェックとは、ほとんどの新しいカードのフラグをチェックするだけです。 古いカードは、ただし、ハードウェアの割り込みが多くの場合、この目的に使用します。 特定のポイントが影響を受ける場合、フリップで読み取りを登録する任意の関数がフックされているに割り込みが呼び出されます。 問題は、いくつかの新しいハードウェアで他の目的でこの割り込みが使用することです。

 

 





