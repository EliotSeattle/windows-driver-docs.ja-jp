---
title: ユーザー モード ディスプレイ ドライバーのスレッド モデル
description: ユーザー モード ディスプレイ ドライバーのスレッド モデル
ms.assetid: 43bb6032-5f34-434b-8404-aef6a424a2ee
keywords:
- スレッドの WDK の表示、ユーザー モード ドライバー
- WDK の表示、ユーザー モード ドライバーの同期
- ユーザー モード ドライバー WDK Windows Vista では、同期の表示します。
- ユーザー モードのディスプレイ ドライバー WDK Windows Vista では、スレッド処理
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: f003c0fbcf0b516873157b75cf6afd1fa3fd773b
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63389806"
---
# <a name="threading-model-of-user-mode-display-driver"></a>ユーザー モード ディスプレイ ドライバーのスレッド モデル


## <span id="ddk_thread_model_of_user_mode_display_driver_gg"></span><span id="DDK_THREAD_MODEL_OF_USER_MODE_DISPLAY_DRIVER_GG"></span>


ユーザー モードのディスプレイ ドライバーが読み込まれていない複数のプロセスに同時に--とは別に DLL が各プロセスのアドレス空間に読み込まれたユーザー モードのディスプレイ ドライバー。 それでも、複数のスレッドがユーザー モードのディスプレイ ドライバーで同時に実行できます。 ただし、ユーザー モードのディスプレイ ドライバーで実行されている各スレッドは、ユーザー モードのディスプレイ ドライバーへの呼び出しによって作成される別のディスプレイ デバイスをアクセスする必要があります[ **CreateDevice** ](https://msdn.microsoft.com/library/windows/hardware/ff540634)関数。 例:

-   2 つのマイクロソフトの Direct3D デバイスを作成するアプリケーションでは、これらのデバイスのアクセスを個別に 2 つのスレッドを持つことができます。

-   アプリケーションで使用できる 2 つの異なるスレッドで DirectX 5.0 ランタイムを作成した Microsoft DirectDraw デバイスと共に Microsoft DirectX 9.0 Direct3D ランタイムを作成した Direct3D デバイス。

**注**  同じディスプレイ デバイスを使用している 2 つまたは複数のスレッドしないユーザー モードのディスプレイ ドライバーで同時に実行できます。

 

ユーザー モードのディスプレイ ドライバーは、ディスプレイのミニポート ドライバーなど、Direct3D デバイスは独立しており、状態と各デバイスからリソースに他のデバイスは影響しませんので、グローバル データ構造を使用する必要はありません。 ユーザー モードのディスプレイ ドライバーは、クロス デバイスのグローバルなデータ構造を維持する必要があります場合、(次のように、カスタム システムのメモリ ヒープ マネージャーの)、その独自のメカニズムを使用してアクセスを判別する必要があります。 このようなグローバル データのドライバーを管理する構造体は強くお勧めしません。 各リソースにアクセスする必要がありますユーザー モード ディスプレイ デバイスで Direct3D ランタイムが独立した共有リソースの「ビュー」を開くと、ため、プロセス間またはクロス デバイス リソース処理できない異なる方法で 1 つのプロセス リソースから、またはデバイスを使用します。 有効期間とその他の管理は、DirectX グラフィックスのカーネル サブシステムによって処理されます (*Dxgkrnl.sys*)。

マルチ プロセッサ コンピューターで、Direct3D ランタイムは、メイン アプリケーション スレッドからの代わりに、ワーカー スレッドからユーザー モードのディスプレイ ドライバーを呼び出すことができます。 この複数プロセッサの最適化は、ユーザー モードのディスプレイ ドライバーに対して透過的です。 ランタイムは、複数プロセッサの最適化を使用して場合、でも、特定のデバイスを参照する 1 つのスレッドが特定の時点で、ドライバーが実行されるがなくなります。

 

 





