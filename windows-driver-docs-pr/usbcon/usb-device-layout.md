---
Description: A USB device defines its capabilities and features through configurations, interfaces, alternate settings, and endpoints.
title: USB デバイスのレイアウト
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 86d993ebce6f93018be7e0ed01a3af7e27f8ef9f
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56581437"
---
# <a name="usb-device-layout"></a>USB デバイスのレイアウト


ユニバーサル シリアル バス (USB) デバイスでは、その機能と機能の構成、インターフェイス、代替の設定、およびエンドポイントを定義します。 このトピックでは、それらの概念の概要を説明します。

A *USB 構成*機能と、デバイス、主にその電源機能とインターフェイスの機能を定義します。 デバイスでは、複数の構成を使用できますが、一度に 1 つだけがアクティブ。 アクティブな構成は、USB ドライバー スタックが選択されていないが、アプリケーション、ドライバー、デバイス ドライバーによって開始される場合があります。 デバイス ドライバーでは、アクティブな構成を選択します。

1 つまたは複数の構成を持つことができます*USB インターフェイス*デバイスの機能を定義します。 通常、関数とインターフェイスの間の一対一の相関関係があります。 ただし、特定のデバイスは、1 つの関数に関連する複数のインターフェイスを公開します。 その場合は、デバイスは、インターフェイスの関連付け記述子 (IAD) を持つことができます。 IAD は、特定の関数に属しているインターフェイスでグループ化します。

各インターフェイスは、1 つ以上含まれています。*エンドポイント*、デバイスとデータの転送に使用されます。 インターフェイスには、さらに、*代替設定*インターフェイスに関連付けられている関数の帯域幅の要件を定義します。 要するに、エンドポイントのグループが、インターフェイスを形成し、一連のインターフェイスでデバイスの構成を構成します。

これはどういう、アクティブな構成を選択するか。 デバイスの初期化中に USB デバイスのデバイス ドライバーは 1 つまたは複数を構成またはその構成、および各インターフェイスの別の設定内でインターフェイスを選択してください。 ほとんどの USB デバイスには、複数のインターフェイスまたは複数の代替設定を提供しません。 たとえば、OSR USB FX2 Learning Kit デバイスでは、1 つの代替設定と 3 つのエンドポイントの 1 つのインターフェイスがあります。 ラーニング キットの詳細については、[OSR オンライン](http://www.osronline.com/)を参照してください。

**デバイスの 1 つのインターフェイス**

この図は、1 つのインターフェイスを使用したデバイスの構成を示しています。

![1 つのインターフェイスのデバイスの usb デバイスのレイアウト](images/device-layout-single.png)

この例では、図が 0 の場合と呼ばれるエンドポイントを示しています。、*既定のエンドポイント*します。 すべての USB デバイスは、コントロールの転送に使用される既定のエンドポイントをいる必要があります (を参照してください[USB 制御転送](usb-control-transfer.md))。 構成に 0 では、1 つのインターフェイスがあります。インターフェイスの 1 つの代替設定で 0。 別のインターフェイスで 0 は 3 つのすべてのエンドポイントを設定します。

**インターフェイスで複数のデバイス**

デバイスでは、多機能デバイスに複数のインターフェイスがあります。 特定の関数またはインターフェイスを使用するには、クライアント ドライバーは、インターフェイスと関連付けられている代替設定を選択します。 Web カメラなど、複数の関数の USB デバイスを検討してください。 デバイスでは、ビデオ (カメラ) をキャプチャおよびオーディオの入力 (マイク) の 2 つの関数があります。 デバイスは、ビデオをストリーミングするビデオのインターフェイスのエンドポイントを定義します。 デバイスでは、マイクからオーディオ入力を受け取る別のインターフェイスで別のエンドポイントがあります。 デバイスの構成には、これらのインターフェイスの両方が含まれます。

この図は、web カメラ デバイスの構成を示しています。

![インターフェイスの複数のデバイスのデバイスのレイアウト](images/device-descriptors-multi.png)

この例では、図には、既定のエンドポイントを示します。 構成に 0 では、2 つのインターフェイスがあります。インターフェイス 0 と 1 のインターフェイス。 0 のインターフェイスには、次の 3 つの代替設定があります。 代替の設定の 1 つだけが、任意の時点でアクティブです。 代替の設定 1 と 2 を使用して、エンドポイントの 1 は代替設定 0 で、エンドポイントを使用しないことに注意してください。 通常、ビデオ_カメラを使用して、*アイソクロナス エンドポイント*ストリーミングします。 エンドポイントの種類、エンドポイントが使用して、帯域幅がバスに予約されています。 カメラはビデオをストリーミングされませんが、ときに、クライアント ドライバーは、帯域幅を節約するために代替の設定 0 を選択できます。 Web カメラはビデオをストリーミングして、クライアント ドライバーが代替の設定 1 または品質のレベルの増加を示し、増加のバスの帯域幅を消費する代替の設定 2 のいずれかに切り替えることができます。 インターフェイスの 1 には、2 つの代替設定があります。 0 のインターフェイスと同様に、0 の代替設定を使用しないエンドポイント。 エンドポイント 1 を使用する代替 Setting 1 が定義されます。

エンドポイントは、構成内の 2 つのインターフェイス間で共有できません。 デバイスでは、エンドポイント アドレスを使って、パイプのリセットなど、データ転送またはエンドポイント操作の対象のエンドポイントを決定します。 これらすべての操作は、ホストによって開始されます。

デバイスの使用を開始する前に、デバイスのレイアウトに関する情報を取得します。 [USBView](https://msdn.microsoft.com/library/windows/hardware/86CB0BEE-0C2E-426E-866A-CECF07837457.aspx)アプリケーションすべて USB コント ローラーとそれらに接続されている USB デバイスを参照することができます。 接続された各デバイスのデバイス、構成、インターフェイス、およびデバイスの機能について理解するためのエンドポイント記述子を表示できます。

次を参照してください[標準の USB ディスクリプター](standard-usb-descriptors.md)します。

## <a name="related-topics"></a>関連トピック
[すべての USB 開発者の概念](usb-concepts-for-all-developers.md)  



