---
Description: MUTT 接続 Exerciser 型 C (USB 型 C ConnEx) ハードウェア ボードでは、Arduino ボード用カスタム シールドです。
title: USB Type-C システムを USB Type-C ConnEx を使用してテストする
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 0b7f79121f9f6e8ff04c1dd632b6eb09670b6f0e
ms.sourcegitcommit: 0504cc497918ebb7b41a205f352046a66c0e26a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/08/2019
ms.locfileid: "65405090"
---
# <a name="test-usb-type-c-systems-with-usb-type-c-connex"></a>USB Type-C システムを USB Type-C ConnEx を使用してテストする


**要約**

-   USB タイプ C ConnEx を使用して、テストの自動化
-   Windows 10 で USB 型-C# の相互運用性のテスト手順: (FT) の機能テストとストレス テスト (ST)。
-   診断手順とデバイスの追加と削除などのシナリオを確認するためのヒント。

**適用対象**

-   Windows 10

**正式な仕様と手順**

-   [USB 3.1 と USB 型-C# の仕様]( https://go.microsoft.com/fwlink/p/?LinkId=620208)
-   [xHCI の相互運用性のテスト手順](https://go.microsoft.com/fwlink/p/?LinkId=623257)

**最終更新日**

-   2016 年 2 月

\[一部の情報はリリース前の製品に関する事項であり、正式版がリリースされるまでに大幅に変更される可能性があります。 ここに記載された情報について、Microsoft は明示または黙示を問わずいかなる保証をするものでもありません。\]

MUTT 接続 Exerciser 型 C (USB 型 C ConnEx) ハードウェア ボードでは、Arduino ボード用カスタム シールドです。 シールドは、USB 型-C# のシナリオの相互運用性のテストを自動化するための 4 対一スイッチを提供します。

このトピックでは、システム、デバイス、USB 型-C# のコネクタをドッキング、Windows オペレーティング システムとの相互運用性のテストを自動化するためのガイドラインを提供します。 次のカテゴリのいずれかに属しているハードウェアをテストすることができます。

-   システム:デスクトップ、ラップトップ、タブレット、サーバー、または携帯電話が公開されている型から C の USB ポートと、Windows オペレーティング システムのバージョンの SKU を実行します。
-   ドッキングします。1 つ以上のポートを公開する型-C# の USB デバイス。
-   デバイス:システムまたはドッキング ステーションに接続できる種類 C ポートでのすべての USB デバイス このカテゴリには、従来の USB デバイス、USB 型-C# 仕様で定義されている付属品または代替のモードをサポートするデバイスが含まれています。

## <a name="hardware-requirements"></a>ハードウェア要件


USB タイプ C ConnEx を使用して USB 型-C# の相互運用性のテスト手順を実行するには、次の操作をする必要があります。

-   **テスト (SUT) 対象のシステム**

    デスクトップ、ラップトップ、タブレット、サーバー、または少なくとも 1 つの公開されている種類 C の USB ポートの電話します。

-   **Arduino メガ 2560 R3**

    [Arduino メガ 2560 R3](https://go.microsoft.com/fwlink/p/?LinkId=733526)テスト セットアップのマイクロ コント ローラーとして使用されます。 このボードはから購入することができます、 [Arduino ストア](https://go.microsoft.com/fwlink/p/?LinkId=733526)します。

    ![Arduino](images/arduino.png)

-   **マイクロ コント ローラーの電源アダプター**します。

    Arduino メガ 2560 R3 掲示板の互換性のあるアダプターについて[このサイトを参照して](https://go.microsoft.com/fwlink/p/?LinkID=733660)します。

-   **USB タイプ C ConnEx**

    シールドが男性の 1 つの型-C# の USB ポート (というラベルの付いた**J1**) SUT が接続されています。 シールドが他の 4 つの USB ポートにあります (というラベルの付いた**J2**、 **J3**、 **J4**、 **J6**) デバイスをできる周辺機器として機能するを添付SUT します。 電流と電圧 SUT から描画されているシールドを監視します。 このボードを購入する[MCCI](https://go.microsoft.com/fwlink/p/?LinkId=733488)または[JJG テクノロジ]( https://go.microsoft.com/fwlink/p/?linkid=618287)します。

    ![USB タイプ C ConnEx](images/connexc-top.png)

-   **B を A の USB ケーブル**

    テストを実行するのにマイクロ コント ローラーのファームウェアを更新するには、PC をマイクロ コント ローラーに接続するのにこのケーブルを使用します。

-   **周辺機器の USB デバイス**

    SUT に関連付けることができる型-C# の USB ポートでのすべての USB デバイス このカテゴリには、従来の USB デバイスと USB 型-C# 仕様で定義されている付属品または代替のモードをサポートするその他のデバイスが含まれています。

-   **USB 充電器**

    USB タイプ-C の現在の要件をサポートしている USB 型-c および必要に応じて[USB 電力配信](https://go.microsoft.com/fwlink/p/?LinkID=623310)します。 マイクロ B の USB 充電の必要もあります**J6**します。

-   **プロキシのコント ローラー**

    テストを実行するためのプロキシを使用して、USB 型 C ConnEx を制御できます。 プロキシのコント ローラーには、これらのエンティティのいずれかを指定できます。

    -   セカンダリのデスクトップ PC やラップトップ コンピューター。

        プロキシのコント ローラーは、モバイルの SUT; と通信します。マイクロ コント ローラーのファームウェアを読み込めません。

    -   セカンダリの USB ポートを使用して SUT します。
    -   SUT の 3.5 mm のオーディオ ジャックを使用しています。

        この一連のでは、次の操作をする必要があります。

        -   DTMF のシールド SUTs で 1 つの型から C の USB ポートにテストを実行します。 DTMF のファームウェアの初期のフラッシュが完了した後に、オーディオ ジャックが付いた単一ポートのデバイスからシールドを制御する機能を提供します。

            ![dtmf のシールド](images/dtmf.png)

        -   4-pin でオス オーディオ ケーブル SUT に DTMF シールドを接続するために使用します。 これにより、テスト中に USB 型-c シールドを制御する SUT できます。

            ![3.5 mm のオーディオ ジャック](images/audio-jack.png)

## <a name="software-requirements"></a>ソフトウェア要件


これらの要件を満たしていることを確認します。

-   SUT、相互運用性をテストする Windows オペレーティング システムのバージョンが必要です。
-   プロキシのコント ローラーには、Windows 10 を実行する必要があります。
-   [![mutt ソフトウェア パッケージをダウンロード](images/download.png)](https://go.microsoft.com/fwlink/p/?LinkId=786621)およびプロキシ コント ローラーの最新の MUTT ソフトウェア パッケージをインストールします。
-   パッケージは、USB 型 C ConnEx でテストを実行するためのツールのスイートです。

    これには、ファームウェアを更新、周辺機器のポート間の切り替えおよびテスト_ケースをシミュレートするために要求を送信するユーティリティが含まれます。 バス、コント ローラー、およびバスに接続されているデバイスの機能をテストするテスト ドライバー パッケージも含まれています。

-   テスト ツールのインストールには、管理者特権でコマンド ウィンドウが必要です。

    ユーザーに管理者特権でコマンド ウィンドウを開くには、メンバーである必要があります、**管理者**プロキシ コント ローラーでグループ化します。 管理者特権のコマンド プロンプト ウィンドウを開くには、Cmd.exe のデスクトップ ショートカットを作成、Cmd.exe のショートカットを右クリックしておよび選択**管理者として実行**します。

### <a name="usb-type-c-connex-tools"></a>USB タイプ C ConnEx ツール

ここでは USB 型 C ConnEx に固有の MUTT ソフトウェア パッケージ ツールです。

| ツール                          | 説明                                                                                          |
|-------------------------------|------------------------------------------------------------------------------------------------------|
| [ConnExUtil.exe](#connexutilexe) | USB タイプ C ConnEx 機能を実行するためのコマンド ライン ツールです。                                             |
| [CxLoop.cmd](#cxloop)         | 接続し、1 回の各ポートを切断します。                                                             |
| [CxStress.cmd](#cxstress)     | ストレスのランダム化されたスクリプトです。                                                                            |
| [CxPower.cmd](#cxpower)       | 時間の期間にわたって (電圧とアンペア) の電源データをキャプチャし、CSV ファイルに出力を送信します。 |



その他のすべてのツールについては、次を参照してください。 [MUTT ソフトウェア パッケージ ツール](mutt-software-package.md)します。

## <a name="get-started"></a>はじめに.


この手順では、テスト環境を設定します。

![USB タイプ C ConnEx 構成](images/connexc.png)

構成は、このイメージのようになります。 マイクロ コント ローラーの型-C# の USB ポートが USB 型 C ConnEx PC に接続しているときに制御を提供することに注意してください。

次の手順では、ハードウェアの情報を接続、マイクロ コント ローラーのファームウェアを更新インストールを検証します。 DTMF シールドは、USB 型 C ConnEx スマート フォンやタブレットのオーディオのポートに接続しているときに制御を提供します。

1.  USB タイプ-c シールド マイクロ コント ローラーに接続します。

    USB タイプ C の ConnEx のアセンブリが作成されていない、1 の手順に進みます。 USB、型 C ConnEx をアセンブルすると、手順 2. に進みます。

    **注意**![注意](images/caution.png)ピンが簡単に修正するために、この手順を慎重に実行する必要があります。



    1.  ボードが他の各レベルであることを確認するには、マイクロ コント ローラーの差し込み口と USB 型-c シールドのピンを揃えます。

        ![USB タイプ C の ConnEx のピンを揃える](images/connexc-align.png)

    2.  ゆっくりとまとめて 2 ボードをキーを押します。 シールドのピンを折るしないように注意します。

        ![USB タイプ C の ConnEx のアセンブル](images/connexc-connect.png)

        組み立てられた場合は、単位は画像のようになります。

        ![接続されている connex c ボード](images/connexc-connect1.png)

2.  USB タイプ C ConnEx か、USB タイプ B (プロキシ コント ローラーに接続) を使用して接続されているマイクロ コント ローラーとは、外部電源アダプターからの電源を入れます。 LCD ディスプレイでは、このイメージになります。

    LCD ディスプレイは、5 秒後に電流と電圧を示しています。

    ![ファームウェア ブートする前に USB 型 C ConnEx](images/connexc-connect2.png)![ファームウェア ブートする前に USB 型 C ConnEx](images/connexc-connect3.png)

    表示されない場合表示前の図のように、必ず、正しく単位を作成します。

3.  USB タイプ C ConnEx ファームウェアでは、マイクロ コント ローラーを更新します。
    -   管理者特権のコマンド プロンプト ウィンドウを開きます。
    -   MUTT ソフトウェア パッケージの c: などの場所に移動して\\Program Files (x86)\\モジュールとしても\\*&lt;arch&gt;* します。
    -   次のコマンドを実行します。

        **MuttUtil.exe – UpdateTabFirmware**

4.  男性の型から C の USB ポートに SUT プラグイン (というラベルの付いた**J1**) シールドします。

    **注意**、 **J1** SUT を接続するときに、コネクタには追加のサポートが必要です。 コネクタは、単独でまたはデバイスの重量を維持するために十分なものではありません。

    ![テスト (sut) 対象のシステムのアタッチ](images/connexc-connect4.png)

5.  ラベルの USB ポートに周辺機器をアタッチ**J2**、 **J3**、 **J4**、 **J6**します。

    ![USB の型から C ConnEx に周辺機器を接続します。](images/connexc-connect7.png)

6.  マイクロ コント ローラーには、プロキシのコント ローラーを接続します。
    -   プロキシのコント ローラーがデスクトップ PC やラップトップの場合は、USB 経由で接続を確立します。 上記の図のように、プロキシ コント ローラー上の USB ポートにマイクロ コント ローラー上の USB タイプ B ポートを接続します。
    -   プロキシのコント ローラーがモバイル SUT の場合は、オーディオのポートを使用して接続を確立します。 この接続は、DTMF シールドが必要です。
        1.  この図のように、DTMF シールドをアセンブルされたユニットに接続します。

            ![dtmf の添付ファイル](images/connexc-connect6.png)

        2.  4-pin でオスのオーディオ ケーブルを使用して、オーディオ ポート SUT にシールドのオーディオ ポートを接続します。

            この図のように、セットアップがあります。

            ![テスト (sut) dtmf でシステムのアタッチ](images/connexc-connect5.png)

7.  USB 型 C ConnEx がプロキシ コント ローラーでデバイス マネージャーによって認識されることを確認します。
    1.  タスク バーで [スタート] ボタンを右クリックして**デバイス マネージャー**します。
    2.  展開、**ポート (COM と LPT)** ノードと、COM ポートをメモは、マイクロ コント ローラーによって使用されます。 この例では、COM 4 に、接続されます。

        ![デバイス マネージャーで USB 型 C ConnEx](images/connexc-connect8.png)

## <a name="connexutilexe"></a>ConnExUtil.exe


USB タイプ C ConnEx ボードを制御するため ConnExUtil.exe をサポートするコマンド ライン オプションを次に示します。

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>ユース ケース</th>
<th>構成方法</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>デバイスの検出
<p>USB タイプ C ConnEx に接続されているすべてのデバイスを一覧表示します。</p></td>
<td><strong>/list</strong></td>
<td>接続されている USB デバイスの場合は、このオプションは、デバイス インスタンスのパスを一覧表示します。 オーディオ接続されているデバイスが表示されます<strong>オーディオ</strong>します。
<p>オーディオ デバイスを表示するには、これと組み合わせて使用して、 <strong>/all</strong>パラメーター。 入力に使用できる 1 から始まるインデックスを使用したリスト、 <strong>/#</strong>パラメーター。</p></td>
</tr>
<tr class="even">
<td>デバイスの選択
<p>USB タイプ C ConnEx、オーディオなどに接続されているすべてのデバイスを選択します。</p></td>
<td><strong>/all</strong></td>
<td>(省略可能)。
<p>このパラメーターがない場合は、ユーティリティ アドレス USB には、デバイスが接続されています。 オーディオの接続されたデバイスが使用されている場合にのみ、このパラメーターを使用します。 オーディオの検出は、時間がかかり、既定で無効になります。</p></td>
</tr>
<tr class="odd">
<td>デバイスの選択
<p>USB タイプ C ConnEx に特定のデバイスが接続されている選択 'n' です。</p></td>
<td><strong>/#</strong> <em>n</em></td>
<td>(省略可能)
<p>入力<em>n</em>を使用して表示できる USB 型 C ConnEx に接続されている使用可能なデバイスの 1 から始まるインデックス、 <strong>/list</strong>パラメーター。 このパラメーターがない場合は、既定の動作は、すべての USB 型 C ConnEx ボード上の各コマンドを実行するは。</p></td>
</tr>
<tr class="even">
<td>デバイス コマンド</td>
<td><strong>/setPort</strong> <em>p</em></td>
<td>指定したポートに切り替える<em>p</em>します。
<p>数 (1 ~ 4) を指定することで、または名前で、ポートの接続 (<strong>J2</strong>、 <strong>J3</strong>、 <strong>J4</strong>、 <strong>J6</strong>)。</p>
<p>0 は、すべてのポートを切断します。</p></td>
</tr>
<tr class="odd">
<td>デバイス コマンド</td>
<td><strong>/getPort</strong></td>
<td>現在接続されているポートを参照してください。</td>
</tr>
<tr class="even">
<td>デバイス コマンド
<p>電流と電圧情報の読み取り</p></td>
<td><p><strong>/volts</strong></p>
<p><strong>/amps</strong></p>
<p><strong>/version</strong></p></td>
<td><p>現在の電圧を参照してください。</p>
<p>現在の電流を参照してください。</p>
<p>デバイスのバージョンを読み取ります。</p></td>
</tr>
<tr class="odd">
<td>デバイス コマンド
<p>SuperSpeed を有効にします。</p></td>
<td><strong>/SuperSpeedOn</strong></td>
<td>までの現在および将来の接続により、SuperSpeed をグローバルに、 <strong>/SuperSpeedOff</strong>コマンドを送信します。
<p>SuperSpeed は既定で有効にします。</p>
<p>SuperSpeed が無効になっている、ポート 1 または 2 に接続されている場合は、このコマンドは、SuperSpeed での再接続をトリガーします。</p></td>
</tr>
<tr class="even">
<td>デバイス コマンド
<p>SuperSpeed を無効にします。</p></td>
<td><strong>/SuperSpeedOff</strong></td>
<td>現在および将来の接続までの SuperSpeed をグローバルに無効に、 <strong>/SuperSpeedOn</strong>コマンドが送信されるか、デバイスをリセットします。
<p>SuperSpeed が有効になっている、ポート 1 または 2 に接続されている場合は、このコマンドは無効になっている SuperSpeed 行で、再接続をトリガーします。</p></td>
</tr>
<tr class="odd">
<td><p>一連のコマンドの遅延</p></td>
<td><strong>/setDelay</strong> <em>t</em></td>
<td>セットのコマンドの遅延<em>t</em> (秒)。
<p>コマンドの遅延を設定すると、次<strong>/setPort</strong>または<strong>/SuperSpeed {オン/オフ}</strong>遅れたコマンド<em>t</em>秒 where <strong>t</strong>範囲は 0 ~ 99 です。 これは、1 回限りの設定、次のコマンドのみを遅延します。 遅延タイマーが期限切れ前に、複数のコマンドを送信することはできません。</p></td>
</tr>
<tr class="even">
<td><p>タイムアウト (ミリ秒単位)、接続が切断します。</p></td>
<td><strong>/setDisconnectTimeout</strong> <em>t</em></td>
<td>次の切断のタイムアウトの設定 0 ではない<strong>/setPort</strong>コマンド。 次のイベントを接続し、ポートに接続して残りますのみ<em>t</em>切断する前に (ミリ秒)。 これは 1 回限りの設定だけで、次への接続イベントは自動的に切断されます。 許可されている範囲は 0 ~ 9999 ミリ秒です。</td>
</tr>
<tr class="odd">
<td><p>バッチ コマンド:</p>
<p>.Csv ファイルに power の測定値を出力します。</p></td>
<td><strong>/powercsv</strong></td>
<td>現在の電力測定値を追加し、power.csv 最初の実行にタイムスタンプが power.csv を作成します。 その後の実行には、このファイルにデータを追加します。
<p>名前変更または新しいデータのキャプチャを開始するファイルを削除します。 それぞれの実行は、次の形式の行を追加します: <em>&lt;インデックス&gt;、&lt;時間&gt;、&lt;ボルト&gt;、&lt;アンペア&gt;</em>します。</p>
<p><em>インデックス</em>によってが指定したデバイス インデックス<strong>/list</strong>ので、同時に複数のデバイスを監視することがあります。</p>
<p><em>時間</em>生のタイムスタンプは秒単位です。</p>
<p><em>ボルト</em>と<em>アンペア</em>小数点以下 2 桁に記録されます。</p>
<p>このデータは、長期間にわたってキャプチャ可能性があり、cxpower.cmd スクリプトを参照してください、スプレッドシート アプリケーションにプロットされます。</p></td>
</tr>
<tr class="even">
<td><p>バッチ コマンド:</p>
主要な機能の単体テストを実行します。</td>
<td><strong>/test</strong></td>
<td>デバイスのすべての主要な機能をテストします。 デバイスの機能の基本的な検証に使用します。 このコマンドが失敗した場合、ください power はデバイスをサイクルし、ファームウェアを更新します。</td>
</tr>
<tr class="odd">
<td><p>バッチ コマンド:</p>
シーケンスの切り替え、ポートの基本的なデモを行います。</td>
<td><strong>/demo d</strong></td>
<td>すべてのポートを 1 回のループ<em>d</em> 2 番目の各ポートでの遅延
<p>Demoresult.txt にポート番号、電圧とアンペア各ポートでを書き込みます。</p></td>
</tr>
</tbody>
</table>



### <a name="sample-commands"></a>サンプル コマンド

ポートに接続します。

``` syntax
connexutil.exe /setport 1
```

または、ボードの印刷は、ポート名を使用します。

``` syntax
connexutil.exe /setport J3
```

すべてのポートを切断します。

``` syntax
connexutil.exe /setport 0
```

すべてのポートをループ処理します。

``` syntax
for %p in (1 2 3 4) 
do (
    connexutil.exe /setport %p
    echo Confirm device on port %p
    pause
)
```

## <a name="scripts-for-controlling-the-usb-type-c-connex-board"></a>USB タイプ C ConnEx ボードを制御するためのスクリプト


これらのスクリプトでは、シーケンシャル実行し、コマンドラインを使用して USB 型 C ConnEx で型のテストをストレスを ConnExUtil.exe でサポートされているコントロールのインターフェイスを実行します。 これらのスクリプトのすべてのサポート オプションのコマンド ライン パラメーター**オーディオ**を USB 型 C ConnEx 掲示板の 3.5 mm オーディオ インターフェイス経由で接続されていることを示します。 USB を使用して、それらはのみが既定では、ボードを接続します。

### <a href="" id="cxloop"></a>単純では、接続/切断シーケンス。CXLOOP.CMD

接続し SUT と各ポート (1 ~ 4) の間の接続を切断し、そのポートで接続を検証するテスト担当者の入力を求める各ポートで一時停止します。

### <a href="" id="cxstress"></a>ランダムでは、接続/切断ループ。CXSTRESS します。CMD

接続し、SUT との間の各ポートをランダムに 0.0 5.0 のランダムな間隔の切断、無限ループでは秒です。 ランダムには型-C# の USB ポートに接続するとを有効にまたは、そのポートの SuperSpeed 接続を無効にし、ランダムな間隔 0 ~ 999 の ms でそのポートで迅速に切断するボードをランダムにように指示されます。

コマンド ライン パラメーター **C**により、スクリプトの型から C の USB ポートと切断の状態を切り替えるだけです。 数値のコマンド ライン パラメーターは、秒単位で入力値に 5.0 秒の既定値からスイッチ間で最大のランダムな間隔をリセットします。 任意の順序でパラメーターを渡すことがあります。

### <a href="" id="cxpower"></a>電力測定を長時間実行するには:CXPOWER します。CMD

2 秒間隔でファイル power.csv を出力する USB 種類 C の ConnEx によって報告された電圧、電流を保存します。 データは、次のように変数のコンマ区切りとして書式設定します。

<em>インデックス</em>**、**<em>時間</em>**、**<em>ボルト</em>**、**<em>アンペア</em>

*インデックス*がで指定されたデバイスのインデックス、 **ConnExUtil.exe/list**コマンドのため、同時に複数のデバイスを監視することがあります。

*時間*生のタイムスタンプは秒単位です。

*ボルト*と*アンペア*小数点以下 2 桁に記録されます。

キャプチャが完了したら、このデータの処理時間の経過と共に電力消費量を示すグラフに post 可能性があります、バッテリ残量の期間の電力消費のサイクルなど。 数値のコマンド ライン パラメーターは、2 秒の既定の測定間隔を秒単位で入力値にリセットします。

##  <a name="about-test-cases"></a>テスト_ケースについて


USB 型-C# の相互運用性のテスト手順は 2 つのセクションに分けられます。 (FT) の機能テストとストレス テスト (ST)。 各テスト セクションでは、テスト ケースを説明し、テストに適用されるカテゴリを識別します。 製品は、該当するカテゴリ全体に対してテストする必要があります。 特定のテスト_ケースには、関連するヒントと詳細のヒントへのリンクが含まれます。 このセクションでは、USB 型-C# の機能と経験に重点を置いています。 USB 型-C# ソリューションの可能性がありますには、USB ハブまたは USB コント ローラーなどの他の USB コンポーネントが含まれています。 USB の両方については USB ハブおよびコント ローラーの詳細なテストの場合の[xHCI の相互運用性のテスト手順](https://go.microsoft.com/fwlink/p/?LinkId=623257)と、Windows ハードウェア認定キット。

これらのテスト_ケースが ConnExUtil コマンドとスクリプトの例に基づくは[USB 型 C ConnEx ボードを制御するためのスクリプト](#scripts-for-controlling-the-usb-type-c-connex-board)します。 テストの場合は、スクリプトを参照してください。 テスト シナリオでは、必要に応じてスクリプトをカスタマイズします。

<a href="" id="device-enumeration"></a>[デバイスの列挙](#ft-case-1-device-enumeration)  
デバイスの列挙の主要な要素が機能していることを確認します。

<a href="" id="alternate-mode-negotiation"></a>[別のモードのネゴシエーション](#ft-case-2-alternate-mode-negotiation)  
サポートされている別のモードを確認します。

<a href="" id="charging-and-power-delivery--pd-"></a>[課金と電力の配信 (PD)](#ft-case-3-charging-and-power-delivery-pd)  
USB タイプ C での課金を確認します。

<a href="" id="role-swap"></a>[役割の交代](#ft-case-4-role-swap)  
役割の交代を確認します。

ストレスのテスト セクションでは、ストレスとエッジ ケースのシナリオ、期間のデバイスの安定性をテストする手順について説明します。 ストレス テストと、レガシ USB 検証 (C 型の非の USB) のカスタムのデバイス (SuperMUTT) は必要です。 今後型-C# の USB テスト デバイスでは、追加のテストと自動化を実現できます。

<a href="" id="device-enumeration"></a>[デバイスの列挙](#st-case-1-device-enumeration)  
デバイスの列挙の主要な要素が機能していることを確認します。

<a href="" id="charging-and-power-delivery--pd-"></a>[課金と電力の配信 (PD)](#st-case-2-charging-and-power-delivery-pd)  
USB タイプ C での課金を確認します。

## <a name="ft-case-1-device-enumeration"></a>FT ケース 1:デバイスの列挙


![ft ケース 1: デバイスの列挙](images/ft1.png)

| ポート   | デバイス                                                                              |
|--------|-------------------------------------------------------------------------------------|
| **J1** | SUT します。                                                                                |
| **J2** | PC 型-C# の USB ケーブルを使用して接続されている型から C の USB ポートにします。              |
| **J3** | USB タイプ-c 充電器です。                                                                 |
| **J4** | USB ハブ (SuperSpeed または高速)、マウスでは、ダウン ストリーム接続されています。               |
| **J6** | USB タイプ A ポート ケーブルが USB タイプ A マイクロ B の USB ケーブルを使用して接続されている PC。 |



1.  SUT 電源を切ります。
2.  SUT ポートに接続する、ラベルが付いて**J1** USB 型 C ConnEx にします。
3.  USB タイプ C ConnEx プロキシ コント ローラーを接続します。
4.  USB タイプ C ConnEx 周辺機器に接続します。
5.  SUT の電源を Windows にログオンします。
6.  管理者特権でコマンド プロンプトから、CXLOOP を実行します。CMD スクリプトです。 スクリプトが一時停止したときに、新しくアクティブ化の周辺機器が動作を確認します。
7.  型から C の USB ケーブルの方向を反転し、手順 5 ~ 7 を繰り返します。

手順 2 -4 に関連する構成イメージでは、次を参照してください[を開始しています。](#get-started).

## <a name="ft-case-2-alternate-mode-negotiation"></a>FT ケース 2:別のモードのネゴシエーション


![ft ケース 2: 別のモードのネゴシエーション](images/ft2.png)

| ポート   | デバイス                                                                              |
|--------|-------------------------------------------------------------------------------------|
| **J1** | SUT します。                                                                                |
| **J2** | USB タイプ-c ドングルをディスプレイ ポート等です。                                                   |
| **J3** | USB タイプ-c 充電器です。                                                                 |
| **J4** | フラッシュ ドライブを USB ハブ (SuperSpeed または高速) は、ダウン ストリーム接続されています。         |
| **J6** | USB タイプ A ポート ケーブルが USB タイプ A マイクロ B の USB ケーブルを使用して接続されている PC。 |



1.  SUT 電源を切ります。
2.  SUT ポートに接続する、ラベルが付いて**J1** USB 型 C ConnEx にします。
3.  USB タイプ C ConnEx プロキシ コント ローラーを接続します。
4.  USB タイプ C ConnEx 周辺機器に接続します。
5.  SUT の電源を Windows にログオンします。
6.  管理者特権でコマンド プロンプトから、CXLOOP を実行します。CMD スクリプトです。 スクリプトが一時停止したときに、新しくアクティブ化の周辺機器が動作を確認します。
7.  型から C の USB ケーブルの方向を反転し、手順 5 ~ 7 を繰り返します。

手順 2 -4 に関連する構成イメージでは、次を参照してください[を開始しています。](#get-started).

## <a name="ft-case-3-charging-and-power-delivery-pd"></a>FT ケース 3:課金と電力の配信 (PD)


![ft ケース 3: 課金、配信 (pd) の電源](images/ft3.png)

| ポート   | デバイス               |
|--------|----------------------|
| **J1** | SUT します。                 |
| **J2** | なし。                |
| **J3** | USB タイプ-c 充電器です。  |
| **J4** | USB マウス。           |
| **J6** | マイクロ B の USB 充電器です。 |



1.  SUT 電源を切ります。
2.  SUT ポートに接続する、ラベルが付いて**J1** USB 型 C ConnEx にします。
3.  USB タイプ C ConnEx プロキシ コント ローラーを接続します。
4.  USB タイプ C ConnEx 周辺機器に接続します。
5.  SUT の電源を Windows にログオンします。
6.  管理者特権でコマンド プロンプトから、CXLOOP を実行します。CMD スクリプトです。 スクリプトが一時停止したときに、新しくアクティブ化の周辺機器が動作を確認します。
7.  型から C の USB ケーブルの方向を反転し、手順 5 ~ 7 を繰り返します。
8.  USB タイプ C ConnEx をポートに接続**J2**します。

    **ConnExUtil.exe /setPort 2**

9.  SUT に 1 つ以上の型-C# の USB ポートが含まれている場合は、同じシステム上の 2 つの型-C# の USB ポートを型-C# の USB ケーブルで接続します。

    ある SUT は充電していません (自体) を確認します。

    電源の LCD 読み取りが壁のアダプターへの期待と一致することを確認します。

10. 接続されている USB 型-C# の充電器を置き換える**J3**さまざまな製造元から別の USB 型-c 充電器を使用します。

    デバイスが現在受信して確認します。

手順 2 -4 に関連する構成イメージでは、次を参照してください[を開始しています。](#get-started).

## <a name="ft-case-4-role-swap"></a>FT ケース 4:役割の交代


![ft ケース 4: 役割の交代](images/ft4.png)

| ポート   | デバイス                                                                              |
|--------|-------------------------------------------------------------------------------------|
| **J1** | SUT します。                                                                                |
| **J2** | PC 型-C# の USB ケーブルを使用して接続されている型から C の USB ポートにします。              |
| **J3** | なし。                                                                               |
| **J4** | USB フラッシュ ドライブ。                                                                    |
| **J6** | USB タイプ A ポート ケーブルが USB タイプ A マイクロ B の USB ケーブルを使用して接続されている PC。 |



1.  SUT 電源を切ります。
2.  SUT ポートに接続する、ラベルが付いて**J1** USB 型 C ConnEx にします。
3.  USB タイプ C ConnEx プロキシ コント ローラーを接続します。
4.  USB タイプ C ConnEx 周辺機器に接続します。
5.  SUT の電源を Windows にログオンします。
6.  管理者特権でコマンド プロンプトから、CXLOOP を実行します。CMD スクリプトです。 スクリプトが一時停止したときに、新しくアクティブ化の周辺機器が動作を確認します。
7.  型から C の USB ケーブルの方向を反転し、手順 5 ~ 7 を繰り返します。
8.  USB タイプ C ConnEx をポートに接続**J2**します。

    役割の交代を確認します。 LCD 画面に表示される電流では、電源の役割を示します。 **+ ve**場合**J1** power シンク。**-ve**場合**J1**は、電源に接続します。

9.  データ ロールを交換し、各システムの現在のロールが変更されたことを確認するために必要な手順を実行します。

手順 2 -4 に関連する構成イメージでは、次を参照してください[を開始しています。](#get-started).

## <a name="st-case-1-device-enumeration"></a>ST ケース 1:デバイスの列挙


![st ケース 1: デバイスの列挙](images/ft1.png)

| ポート   | デバイス                                                                              |
|--------|-------------------------------------------------------------------------------------|
| **J1** | SUT します。                                                                                |
| **J2** | PC 型-C# の USB ケーブルを使用して接続されている型から C の USB ポートにします。              |
| **J3** | USB タイプ-c 充電器です。                                                                 |
| **J4** | USB ハブ (SuperSpeed または高速)、マウスでは、ダウン ストリーム接続されています。               |
| **J6** | USB タイプ A ポート ケーブルが USB タイプ A マイクロ B の USB ケーブルを使用して接続されている PC。 |



1.  SUT 電源を切ります。
2.  SUT ポートに接続する、ラベルが付いて**J1** USB 型 C ConnEx にします。
3.  USB タイプ C ConnEx プロキシ コント ローラーを接続します。
4.  USB タイプ C ConnEx 周辺機器に接続します。
5.  SUT の電源を Windows にログオンします。
6.  管理者特権でコマンド プロンプトから、CXSTRESS を実行します。12 時間以内の CMD します。

    Ctrl + C を押して、スクリプトを終了します。

7.  説明されている手順に従います[FT ケース 1。デバイスの列挙](#ft-case-1-device-enumeration)します。

手順 2 -4 に関連する構成イメージでは、次を参照してください[を開始しています。](#get-started).

## <a name="st-case-2-charging-and-power-delivery-pd"></a>ST ケース 2:課金と電力の配信 (PD)


![st ケース 2: 課金、配信 (pd) の電源](images/ft3.png)

| ポート   | デバイス               |
|--------|----------------------|
| **J1** | SUT します。                 |
| **J2** | なし。                |
| **J3** | USB タイプ-c 充電器です。  |
| **J4** | USB マウス。           |
| **J6** | マイクロ B の USB 充電器です。 |



1.  SUT 電源を切ります。
2.  SUT ポートに接続する、ラベルが付いて**J1** USB 型 C ConnEx にします。
3.  USB タイプ C ConnEx プロキシ コント ローラーを接続します。
4.  USB タイプ C ConnEx 周辺機器に接続します。
5.  SUT の電源を Windows にログオンします。
6.  管理者特権でコマンド プロンプトから、CXSTRESS を実行します。12 時間以内の CMD します。 .

    Ctrl + C を押して、スクリプトを終了します。

7.  説明されている手順に従います[FT ケース 3。課金と配信 (PD) の電源を](#ft-case-3-charging-and-power-delivery-pd)します。

手順 2 -4 に関連する構成イメージでは、次を参照してください[を開始しています。](#get-started).

## <a name="additional-test-resources"></a>追加のテスト リソース


次の機能テストは、USB 型-C# USB の従来のシナリオを向上させるために応用できます。

| テスト_ケース                                | 説明                                                                                                                  | カテゴリ             |
|------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|----------------------|
| [システムのブート](type.md#ft2)              | 製品が通常のシステム ブートを抑制していないことを確認します。                                                               | ドッキング ステーション、システム デバイス |
| [システム電源の遷移](type.md#ft3) | システムの電源の切り替え効果および低電力状態からウェイク アップ機能の影響を受けない製品かどうかをテストします。 | ドッキング ステーション、システム デバイス |
| [選択的な中断](type.md#ft4)        | セレクティブ サスペンドの遷移を確認します。                                                                                  | デバイスのドック         |



次のストレス テストは USB シナリオを拡張する SuperMUTT テスト ドキュメントから引用したものにすることはできます。

| テスト_ケース                                | 説明                                                     | カテゴリ             |
|------------------------------------------|-----------------------------------------------------------------|----------------------|
| [システム電源の遷移](type.md#st1) | 反復的なシステム電源イベントの後に、製品の信頼性をテストします。 | ドッキング ステーション、システム デバイス |
| [イベントを転送します。](type.md#st2)          | 複数の転送と接続イベントを生成します。              | ドッキング ステーション、システム デバイス |
| [プラグ アンド プレイ (PnP)](type.md#st3)      | さまざまな PnP シーケンスを生成します。                                | ドッキング ステーション、システム デバイス |
| [デバイスのトポロジ](type.md#st4)          | さまざまなデバイスを製品のトポロジをテストします。       | ドッキング ステーション、システム デバイス |



## <a name="validating-success-or-failure-of-the-tests"></a>テストの成功または失敗を検証しています


### <a name="confirming-charging-and-power"></a>課金と能力を確認します。

USB の型から C ConnEx のオンボードの LCD では、電源 (ボルト、アンペア、および方向) が表示されます。 電源に接続されているし、USB 型 C ConnEx を積極的に有効になってからの期待と一致することを確認します。

![課金と能力を確認します。](images/connexc-connect9.png)

### <a name="confirming-device-addition-on-desktops"></a>デスクトップ上のデバイスの追加を確認します。

1.  デバイスが接続されている USB ホスト コント ローラーを識別します。
2.  デバイス マネージャーに適切なノードの下に新しいデバイスが表示されることを確認します。
3.  USB 3.0 ハブを USB 3.0 ポートに接続して、予想される 2 つのハブのデバイスを参照してください: SuperSpeed と高速に列挙されるいずれか。

### <a name="confirm-device-removal-on-desktops"></a>デスクトップ上のデバイスの削除を確認します。

1.  デバイス マネージャーで、デバイスを識別します。
2.  システムから、デバイスを削除するテスト ステップを実行します。
3.  デバイスがデバイス マネージャーに表示がなくなったことを確認します。
4.  USB 3.0 ハブでは、両方のデバイス (SuperSpeed とコンパニオン ハブ) を削除することを確認してください。 この場合、デバイスを削除する障害は、デバイスのエラーがあり、適切な根本原因をトリアージに関連するすべてのコンポーネントによって調査する必要があります。

### <a name="confirm-device-functionality"></a>デバイスの機能を確認します。

-   デバイスが USB ハブの場合は、ハブのダウン ストリーム デバイスが機能することを確認します。 デバイスをハブで使用できるポートに接続できることを確認します。
-   デバイスが、HID デバイスの場合は、その機能をテストします。 必ず USB キーボードの種類、USB マウス カーソルを移動してゲーム デバイスは、ゲーム コント ローラーのコントロール パネルで機能します。
-   USB オーディオ デバイスは、再生やサウンドを録音する必要があります。
-   記憶域デバイスでは、アクセスできる必要があり、ファイル 200 MB 以上のサイズをコピーできる必要があります。
-   デバイスがあるスキャン (&)、印刷などの複数の関数の場合は、スキャンと印刷機能の両方をテストすることを確認してください。
-   デバイスが USB 型-C# のデバイスの場合は、適用可能な USB と代替のモードは、機能を確認します。

## <a name="using-etw-to-log-issues"></a>ETW を使用して問題をログするには


移動して https://aka.ms/usbtrace手順については、USB ドライバーからの ETW トレースをキャプチャするためのスクリプトをダウンロードします。

## <a name="reporting-test-results"></a>テスト結果のレポート


これらの詳細を提供します。

-   失敗したテストの前に実行された順序でテストの一覧。
-   一覧には、テストが失敗したか成功するを指定する必要があります。
-   システム、デバイス、ドッキング、またはテストに使用されたハブ。 含めることをモデル、および Web サイト、追加の情報を取得できるように必要な場合。









