---
title: IrpTracking の規則セット (WDM)
description: これらのルールを使用して、Irp が未処理であるときにデバイスが削除されないように、ドライバーが i/o 要求パケット (IRP) を正しく追跡していることを確認します。
ms.assetid: 9AD62397-6840-42FF-ADEC-6836EDD16647
ms.date: 05/21/2018
ms.localizationpriority: medium
ms.openlocfilehash: 2308df055e508487a46dcca517a517169c1ec09b
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72839549"
---
# <a name="irptracking-rule-set-wdm"></a>IrpTracking の規則セット (WDM)


これらのルールを使用して、Irp が未処理であるときにデバイスが削除されないように、ドライバーが i/o 要求パケット (IRP) を正しく追跡していることを確認します。

## <a name="in-this-section"></a>このセクションの内容


<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">トピック</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p><a href="wdm-ioreleaseremovelockandwaitoutsideremovedevice.md" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLockAndWaitOutsideRemoveDevice&lt;/strong&gt;](wdm-ioreleaseremovelockandwaitoutsideremovedevice.md)"><strong>IoReleaseRemoveLockAndWaitOutsideRemoveDevice</strong></a></p></td>
<td align="left"><p><a href="wdm-ioreleaseremovelockandwaitoutsideremovedevice.md" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLockAndWaitOutsideRemoveDevice&lt;/strong&gt;](wdm-ioreleaseremovelockandwaitoutsideremovedevice.md)"><strong>IoReleaseRemoveLockAndWaitOutsideRemoveDevice</strong></a>ルールでは、PNP ドライバー用に IRP_MN_REMOVE_DEVICE を使用して<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLockAndWait&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait)"><strong>IoReleaseRemoveLockAndWait</strong></a>以外では呼び出さないように指定しています。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-nsremovelockmnremove.md" data-raw-source="[&lt;strong&gt;NsRemoveLockMnRemove&lt;/strong&gt;](wdm-nsremovelockmnremove.md)"><strong>NsRemoveLockMnRemove</strong></a></p></td>
<td align="left"><p><a href="wdm-nsremovelockmnremove.md" data-raw-source="[&lt;strong&gt;NsRemoveLockMnRemove&lt;/strong&gt;](wdm-nsremovelockmnremove.md)"><strong>NsRemoveLockMnRemove</strong></a>ルールは、MinorFunction IRP_MN_REMOVE_DEVICE で IRP_MJ_PNP を処理するときに、ドライバーが STATUS_NOT_SUPPORTED を返さないことを確認します。 このルールは、FDO および FIDO ドライバーにのみ適用されます。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-nsremovelockmnsurpriseremove.md" data-raw-source="[&lt;strong&gt;NsRemoveLockMnSurpriseRemove&lt;/strong&gt;](wdm-nsremovelockmnsurpriseremove.md)"><strong>NsRemoveLockMnSurpriseRemove</strong></a></p></td>
<td align="left"><p><a href="wdm-nsremovelockmnsurpriseremove.md" data-raw-source="[&lt;strong&gt;NsRemoveLockMnSurpriseRemove&lt;/strong&gt;](wdm-nsremovelockmnsurpriseremove.md)"><strong>NsRemoveLockMnSurpriseRemove</strong></a>ルールは、minorFunction IRP_MN_SUPRISE_REMOVAL で IRP_MJ_PNP 要求を処理するときに、ドライバーが STATUS_NOT_SUPPORTED を返さないことを確認します。 このルールは、FDO および FIDO ドライバーにのみ適用されます。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-nsremovelockquerymnremove.md" data-raw-source="[&lt;strong&gt;NsRemoveLockQueryMnRemove&lt;/strong&gt;](wdm-nsremovelockquerymnremove.md)"><strong>NsRemoveLockQueryMnRemove</strong></a></p></td>
<td align="left"><p><a href="wdm-nsremovelockquerymnremove.md" data-raw-source="[&lt;strong&gt;NsRemoveLockQueryMnRemove&lt;/strong&gt;](wdm-nsremovelockquerymnremove.md)"><strong>NsRemoveLockQueryMnRemove</strong></a>ルールは、MinorFunction IRP_MN_QUERY_REMOVE で IRP_MJ_PNP を処理するときに、ドライバーが STATUS_NOT_SUPPORTED を返さないことを確認します。 このルールは、FDO および FIDO ドライバーにのみ適用されます。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelock.md" data-raw-source="[&lt;strong&gt;RemoveLock&lt;/strong&gt;](wdm-removelock.md)"><strong>RemoveLock</strong></a></p></td>
<td align="left"><p><a href="wdm-removelock.md" data-raw-source="[&lt;strong&gt;RemoveLock&lt;/strong&gt;](wdm-removelock.md)"><strong>Removelock</strong></a>規則は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されることを指定します。 さらに、IRP_MJ_PNP または IRP_MJ_POWER ルーチンの最後に、ドライバーは<strong>Removelock</strong>を保持しないようにする必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockcheck.md" data-raw-source="[&lt;strong&gt;RemoveLockCheck&lt;/strong&gt;](wdm-removelockcheck.md)"><strong>RemoveLockCheck</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockcheck.md" data-raw-source="[&lt;strong&gt;RemoveLockCheck&lt;/strong&gt;](wdm-removelockcheck.md)"><strong>Removelockcheck</strong></a>規則は、MinorFunction IRP_MN_REMOVE_DEVICE で IRP_MJ_PNP を処理するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLockAndWait&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait)"><strong>IoReleaseRemoveLockAndWait</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockforward.md" data-raw-source="[&lt;strong&gt;RemoveLockForward&lt;/strong&gt;](wdm-removelockforward.md)"><strong>RemoveLockForward</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforward.md" data-raw-source="[&lt;strong&gt;RemoveLockForward&lt;/strong&gt;](wdm-removelockforward.md)"><strong>Removelockforward</strong></a>ルールは、IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockforward2.md" data-raw-source="[&lt;strong&gt;RemoveLockForward2&lt;/strong&gt;](wdm-removelockforward2.md)"><strong>RemoveLockForward2</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforward2.md" data-raw-source="[&lt;strong&gt;RemoveLockForward2&lt;/strong&gt;](wdm-removelockforward2.md)"><strong>RemoveLockForward2</strong></a>ルールは、IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockforwarddevicecontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControl&lt;/strong&gt;](wdm-removelockforwarddevicecontrol.md)"><strong>RemoveLockForwardDeviceControl</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwarddevicecontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControl&lt;/strong&gt;](wdm-removelockforwarddevicecontrol.md)"><strong>Removelockforwarddevicecontrol</strong></a>ルールは、ドライバーが<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver" data-raw-source="[&lt;strong&gt;IoCallDriver&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver)"><strong>IoCallDriver</strong></a>を使用して IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockforwarddevicecontrol2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControl2&lt;/strong&gt;](wdm-removelockforwarddevicecontrol2.md)"><strong>RemoveLockForwardDeviceControl2</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwarddevicecontrol2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControl2&lt;/strong&gt;](wdm-removelockforwarddevicecontrol2.md)"><strong>RemoveLockForwardDeviceControl2</strong></a>ルールは、ドライバーが<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver" data-raw-source="[&lt;strong&gt;IoCallDriver&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver)"><strong>IoCallDriver</strong></a>を使用して IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockforwarddevicecontrolinternal.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControlInternal&lt;/strong&gt;](wdm-removelockforwarddevicecontrolinternal.md)"><strong>RemoveLockForwardDeviceControlInternal</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwarddevicecontrolinternal.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControlInternal&lt;/strong&gt;](wdm-removelockforwarddevicecontrolinternal.md)"><strong>RemoveLockForwardDeviceControlInternal</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver" data-raw-source="[&lt;strong&gt;IoCallDriver&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver)"><strong>IoCallDriver</strong></a>を使用する IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockforwarddevicecontrolinternal2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControlInternal2&lt;/strong&gt;](wdm-removelockforwarddevicecontrolinternal2.md)"><strong>RemoveLockForwardDeviceControlInternal2</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwarddevicecontrolinternal2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardDeviceControlInternal2&lt;/strong&gt;](wdm-removelockforwarddevicecontrolinternal2.md)"><strong>RemoveLockForwardDeviceControlInternal2</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver" data-raw-source="[&lt;strong&gt;IoCallDriver&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver)"><strong>IoCallDriver</strong></a>を使用する IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockforwardread.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardRead&lt;/strong&gt;](wdm-removelockforwardread.md)"><strong>RemoveLockForwardRead</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwardread.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardRead&lt;/strong&gt;](wdm-removelockforwardread.md)"><strong>Removelockforwardread</strong></a>規則は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockforwardread2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardRead2&lt;/strong&gt;](wdm-removelockforwardread2.md)"><strong>RemoveLockForwardRead2</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwardread2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardRead2&lt;/strong&gt;](wdm-removelockforwardread2.md)"><strong>RemoveLockForwardRead2</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver" data-raw-source="[&lt;strong&gt;IoCallDriver&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver)"><strong>IoCallDriver</strong></a>を使用する IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockforwardwrite.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardWrite&lt;/strong&gt;](wdm-removelockforwardwrite.md)"><strong>RemoveLockForwardWrite</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwardwrite.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardWrite&lt;/strong&gt;](wdm-removelockforwardwrite.md)"><strong>Removelockforwardwrite</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver" data-raw-source="[&lt;strong&gt;IoCallDriver&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver)"><strong>IoCallDriver</strong></a>を使用している IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockforwardwrite2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardWrite2&lt;/strong&gt;](wdm-removelockforwardwrite2.md)"><strong>RemoveLockForwardWrite2</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockforwardwrite2.md" data-raw-source="[&lt;strong&gt;RemoveLockForwardWrite2&lt;/strong&gt;](wdm-removelockforwardwrite2.md)"><strong>RemoveLockForwardWrite2</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver" data-raw-source="[&lt;strong&gt;IoCallDriver&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iocalldriver)"><strong>IoCallDriver</strong></a>を使用する IRP を別のデバイスに転送するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockmnremove.md" data-raw-source="[&lt;strong&gt;RemoveLockMnRemove&lt;/strong&gt;](wdm-removelockmnremove.md)"><strong>RemoveLockMnRemove</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockmnremove.md" data-raw-source="[&lt;strong&gt;RemoveLockMnRemove&lt;/strong&gt;](wdm-removelockmnremove.md)"><strong>RemoveLockMnRemove</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLockAndWait&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait)"><strong>IoReleaseRemoveLockAndWait</strong></a>の呼び出しが minorfunction IRP_MN_REMOVE_DEVICE で IRP_MJ_PNP を処理するときに正しく使用されることを確認します。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockmnremove2.md" data-raw-source="[&lt;strong&gt;RemoveLockMnRemove2&lt;/strong&gt;](wdm-removelockmnremove2.md)"><strong>RemoveLockMnRemove2</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockmnremove2.md" data-raw-source="[&lt;strong&gt;RemoveLockMnRemove2&lt;/strong&gt;](wdm-removelockmnremove2.md)"><strong>RemoveLockMnRemove2</strong></a>ルールは、IRP が下位のドライバーに転送される前に IRP_MN_REMOVE_DEVICE 要求を処理するときに、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLockAndWait&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait)"><strong>IoReleaseRemoveLockAndWait</strong></a>の呼び出しが正しく使用されていることを確認します。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockmnsurpriseremove.md" data-raw-source="[&lt;strong&gt;RemoveLockMnSurpriseRemove&lt;/strong&gt;](wdm-removelockmnsurpriseremove.md)"><strong>RemoveLockMnSurpriseRemove</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockmnsurpriseremove.md" data-raw-source="[&lt;strong&gt;RemoveLockMnSurpriseRemove&lt;/strong&gt;](wdm-removelockmnsurpriseremove.md)"><strong>RemoveLockMnSurpriseRemove</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLockAndWait&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelockandwait)"><strong>IoReleaseRemoveLockAndWait</strong></a>の呼び出しが minorfunction IRP_MN_SUPRISE_REMOVAL で IRP_MJ_PNP を処理するときに正しく使用されることを確認します。 ドライバーは、IRP をスタックに転送する前に、削除ロックを取得する必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockquerymnremove.md" data-raw-source="[&lt;strong&gt;RemoveLockQueryMnRemove&lt;/strong&gt;](wdm-removelockquerymnremove.md)"><strong>RemoveLockQueryMnRemove</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockquerymnremove.md" data-raw-source="[&lt;strong&gt;RemoveLockQueryMnRemove&lt;/strong&gt;](wdm-removelockquerymnremove.md)"><strong>RemoveLockQueryMnRemove</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが minorfunction IRP_MN_QUERY_REMOVE_DEVICE で IRP_MJ_PNP を処理するときに正しく使用されることを確認します。 ドライバーは、IRP をスタックに転送する前に、削除ロックを取得する必要があります。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockrelease2.md" data-raw-source="[&lt;strong&gt;RemoveLockRelease2&lt;/strong&gt;](wdm-removelockrelease2.md)"><strong>RemoveLockRelease2</strong></a></p></td>
<td align="left"><p>ルール<a href="wdm-removelockrelease2.md" data-raw-source="[&lt;strong&gt;RemoveLockRelease2&lt;/strong&gt;](wdm-removelockrelease2.md)"><strong>RemoveLockRelease2</strong></a>は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されていることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockreleasecleanup.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseCleanup&lt;/strong&gt;](wdm-removelockreleasecleanup.md)"><strong>RemoveLockReleaseCleanup</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleasecleanup.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseCleanup&lt;/strong&gt;](wdm-removelockreleasecleanup.md)"><strong>RemoveLockReleaseCleanup</strong></a>規則は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されることを指定します。 <strong>IoAcquireRemoveLock</strong>を呼び出すたびに、 <strong>IoReleaseRemoveLock</strong>への呼び出しが一致している必要があります。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockreleaseclose.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseClose&lt;/strong&gt;](wdm-removelockreleaseclose.md)"><strong>RemoveLockReleaseClose</strong></a></p></td>
<td align="left"><p>ルール<a href="wdm-removelockreleaseclose.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseClose&lt;/strong&gt;](wdm-removelockreleaseclose.md)"><strong>RemoveLockReleaseClose</strong></a>は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されていることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockreleasecreate.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseCreate&lt;/strong&gt;](wdm-removelockreleasecreate.md)"><strong>RemoveLockReleaseCreate</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleasecreate.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseCreate&lt;/strong&gt;](wdm-removelockreleasecreate.md)"><strong>RemoveLockReleaseCreate</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockreleasedevicecontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseDeviceControl&lt;/strong&gt;](wdm-removelockreleasedevicecontrol.md)"><strong>RemoveLockReleaseDeviceControl</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleasedevicecontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseDeviceControl&lt;/strong&gt;](wdm-removelockreleasedevicecontrol.md)"><strong>Removelockreleasedevicecontrol</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockreleaseinternaldevicecontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseInternalDeviceControl&lt;/strong&gt;](wdm-removelockreleaseinternaldevicecontrol.md)"><strong>RemoveLockReleaseInternalDeviceControl</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleaseinternaldevicecontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseInternalDeviceControl&lt;/strong&gt;](wdm-removelockreleaseinternaldevicecontrol.md)"><strong>Removelockreleaseinternaldevicecontrol</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockreleasepnp.md" data-raw-source="[&lt;strong&gt;RemoveLockReleasePnp&lt;/strong&gt;](wdm-removelockreleasepnp.md)"><strong>RemoveLockReleasePnp</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleasepnp.md" data-raw-source="[&lt;strong&gt;RemoveLockReleasePnp&lt;/strong&gt;](wdm-removelockreleasepnp.md)"><strong>Removelockreleasepnp</strong></a>ルールでは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されていることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockreleasepower.md" data-raw-source="[&lt;strong&gt;RemoveLockReleasePower&lt;/strong&gt;](wdm-removelockreleasepower.md)"><strong>RemoveLockReleasePower</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleasepower.md" data-raw-source="[&lt;strong&gt;RemoveLockReleasePower&lt;/strong&gt;](wdm-removelockreleasepower.md)"><strong>Removelockreleasepower</strong></a> rule は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されていることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockreleaseread.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseRead&lt;/strong&gt;](wdm-removelockreleaseread.md)"><strong>RemoveLockReleaseRead</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleaseread.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseRead&lt;/strong&gt;](wdm-removelockreleaseread.md)"><strong>RemoveLockReleaseRead</strong></a>ルールは、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockreleaseshutdown.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseShutdown&lt;/strong&gt;](wdm-removelockreleaseshutdown.md)"><strong>RemoveLockReleaseShutdown</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleaseshutdown.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseShutdown&lt;/strong&gt;](wdm-removelockreleaseshutdown.md)"><strong>Removelockreleaseshutdown</strong></a>規則は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="odd">
<td align="left"><p><a href="wdm-removelockreleasesystemcontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseSystemControl&lt;/strong&gt;](wdm-removelockreleasesystemcontrol.md)"><strong>RemoveLockReleaseSystemControl</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleasesystemcontrol.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseSystemControl&lt;/strong&gt;](wdm-removelockreleasesystemcontrol.md)"><strong>Removelockreleasesystemcontrol</strong></a>規則は、厳密な代替で<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが使用されていることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
<tr class="even">
<td align="left"><p><a href="wdm-removelockreleasewrite.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseWrite&lt;/strong&gt;](wdm-removelockreleasewrite.md)"><strong>RemoveLockReleaseWrite</strong></a></p></td>
<td align="left"><p><a href="wdm-removelockreleasewrite.md" data-raw-source="[&lt;strong&gt;RemoveLockReleaseWrite&lt;/strong&gt;](wdm-removelockreleasewrite.md)"><strong>Removelockreleasewrite</strong></a>規則は、 <a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock" data-raw-source="[&lt;strong&gt;IoAcquireRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioacquireremovelock)"><strong>IoAcquireRemoveLock</strong></a>と<a href="https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock" data-raw-source="[&lt;strong&gt;IoReleaseRemoveLock&lt;/strong&gt;](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-ioreleaseremovelock)"><strong>IoReleaseRemoveLock</strong></a>の呼び出しが厳密な代替で使用されていることを確認します。 さらに、ディスパッチルーチンの最後に、ドライバーは削除ロックを保持しないようにする必要があります。</p></td>
</tr>
</tbody>
</table>

 

**IrpTracking 規則セットを選択するには**

1.  Microsoft Visual Studio でドライバープロジェクト (.Vcxproj) を選択します。 **[ドライバー]** メニューの **[静的ドライバー検証ツールの起動]** をクリックします。

2.  **[ルール]** タブをクリックします。 **[規則セット]** で **[irptracking]** を選択します。

    Visual Studio 開発者コマンドプロンプトウィンドウから既定の規則セットを選択するには、 **/チェック**オプションを指定して**irptracking. sdv**を指定します。 次に、例を示します。

    ```
    msbuild /t:sdv /p:Inputs="/check:IrpTracking.sdv" mydriver.VcxProj /p:Configuration="Win8 Release" /p:Platform=Win32
    ```

    詳細については、「 [Using Static Driver verifier](https://docs.microsoft.com/windows-hardware/drivers/devtest/using-static-driver-verifier-to-find-defects-in-drivers) 」を参照して、ドライバーと[静的ドライバー検証コマンド (MSBuild)](https://docs.microsoft.com/windows-hardware/drivers/devtest/-static-driver-verifier-commands--msbuild-)で欠陥を検出してください。

 

 





