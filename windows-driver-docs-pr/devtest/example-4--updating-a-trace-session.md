---
title: 例 4 のトレース セッションを更新しています
description: 例 4 のトレース セッションを更新しています
ms.assetid: d0ff9508-cc34-43eb-975f-7f5ce3c0acf6
keywords:
- トレース セッション、WDK を更新しています
- トレース セッションを更新しています
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: d2e7c333a44a22b2d25650e2782b58d90be6145e
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56550539"
---
# <a name="example-4-updating-a-trace-session"></a>例 4:トレース セッションを更新しています

## <span id="ddk_updating_a_trace_session_tools"></span><span id="DDK_UPDATING_A_TRACE_SESSION_TOOLS"></span>

トレース セッションの実行中には、リアルタイムまたはログに記録されたトレース セッションの次のプロパティを更新できます。

-   トレースのログ セッションをリアルタイムのトレース セッションに変換 (を使用して **-f**)。

-   既存のトレース ログ セッションの新しいトレース ログを作成 (を使用して **-f**)。

-   既存のトレース ログ セッションをリアルタイムのトレース メッセージの配信を追加 (を使用して **-rt**)。

-   バッファーの最大数を変更 (を使用して **-最大)** がバッファーの最小数ではありません。

-   フラッシュの時間間隔を変更 (を使用して **-ft**)。

-   トレース バッファーをフラッシュ (を使用して **-** トレース ログのフラッシュ)。

使用することはできません、 **tracelog-更新**フラグとトレース プロバイダーのレベルを変更するコマンド。 代わりに、使用、 **tracelog-有効にする**コマンドのように[例 5。トレース プロバイダーを有効にする](example-5--enabling-trace-providers.md)します。

**-Rt**と **-f**パラメーターが異なる方法で機能、 **tracelog-更新**コマンド。 **-Rt**パラメーターは、トレース ログ セッションをリアルタイムでのメッセージ配信を追加します。 その結果、新しいトレース メッセージは、トレース コンシューマーとトレース ログに直接送信されます。 ただし、トレース ログ セッションをリアルタイムでのメッセージ配信を追加する前にバッファーする必要がありますフラッシュを使用して、**トレース ログのフラッシュ**コマンド。 ときに、 **-f**リアルタイム トレース セッションを更新するパラメーターを使うと、トレース ログへの配信をリアルタイムでのメッセージ配信に置き換えられます。 トレース ログにのみ新しいトレース メッセージを送信するため、不要になったトレース コンシューマーに直接送信されます。

次のコマンドは、トレース ログ セッションを"MyTrace"という名前のリアルタイムのトレース セッションを変更します。 コマンドを使用して、 **-f** c:、ログ ファイルの場所を指定するパラメーター\\トレース\\MyTrace.etl します。 またを使用して、 **-最大**パラメーターの値を持つ**35** 35 バッファーの最大数を増やすにします。

```
tracelog -update MyTrace -f c:\tracing\mytrace.etl -max 35
```

応答では、トレース ログには、変更したばかりのプロパティを含むトレース セッションのプロパティが表示されます。

このコマンドで、プロバイダーによって生成されるすべての新しいトレース メッセージとコマンドが送信されたときに、バッファーに格納されているすべてのトレース メッセージは、ログ ファイルにのみ書き込まれます。 不要になったリアルタイム トレース セッションのように、トレース コンシューマーに直接送信されます。

トレース コンシューマーとトレース ログにトレース メッセージが送信されるように、リアルタイムのトレース セッションにトレース ログを追加するに両方を含める、 **-rt**と **-f**パラメーターは、次のコマンドで示すようにします。

```
tracelog -update MyTrace -rt -f c:\tracing\mytrace.etl -max 35
```

セッションの実行中にも、トレース バッファーをフラッシュできます。 これは、フラッシュ タイマーを使用して調整が強制的にフラッシュします。 フラッシュ タイマーの有効期限が切れると、トレース セッションを停止すると、システムは、バッファーをもう一度フラッシュされます。

既存のトレース セッションのバッファーをフラッシュするには、使用、 **-フラッシュ**パラメーターは、次の例に示すようにします。 **-フラッシュ**パラメーターがのサブパラ メーターではありません、 **tracelog** **-更新**コマンド。

```
tracelog -flush MyTrace
```

応答では、トレース ログには、トレース セッションの変更されたプロパティが表示されます。
