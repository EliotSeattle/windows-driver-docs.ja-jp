---
title: ドライバーで 32 ビットの呼び出し元を識別する方法
description: ドライバーで 32 ビットの呼び出し元を識別する方法
ms.assetid: 9bfe9024-60f1-41ad-a034-160caaaa7801
keywords:
- 32ビット i/o は、32ビット呼び出し元を識別する WDK 64 ビットをサポートします。
- 32ビット呼び出し元の識別
- 32ビット呼び出し元 id WDK 64 ビット
- ファイルシステム制御コード WDK 64 ビット
- FSCTL WDK 64-bit
- コントロールコード WDK 64-bit
- I/o 制御コード WDK カーネル、64ビットドライバーでの32ビット i/o
- Ioctl WDK カーネル、64ビットドライバーの32ビット i/o
- 呼び出し元 id WDK 64 ビット
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: bc368f20f840ecb36b0dffdbacb20076f4e1b472
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72836477"
---
# <a name="how-drivers-identify-32-bit-callers"></a>ドライバーで 32 ビットの呼び出し元を識別する方法





2つの方法で、IOCTL または FSCTL 要求の発信元が32ビットまたは64ビットのアプリケーションであるかどうかを判断できます。 1つ目は、アプリケーションが自身を識別するためのものです。 2つ目の方法は、アプリケーションが32ビットまたは64ビットのどちらであるかをドライバーが独自に判断することです。

最初の方法では、IOCTL または FSCTL 制御コードで "64 ビット" フィールドを定義します。 このフィールドには、64ビットの呼び出し元に対してのみ設定されるシングルビットが含まれています。 したがって、64ビットの呼び出し元は、このビットが設定されている64ビットの制御コードの別のセットを使用して、自身を識別します。 32ビット呼び出し元は、このビットが設定されていない同様の制御コードのセットを使用します。

2番目の手法では、32と64ビットのアプリケーションが同じ IOCTL または FSCTL コードを引き続き使用できるようにします。 代わりに、 [**IoIs32bitProcess**](https://docs.microsoft.com/windows-hardware/drivers/ddi/wdm/nf-wdm-iois32bitprocess)を呼び出して、ユーザーモードプロセスが32または64ビットであるかどうかをドライバーが判断します。

ドライバーはカーネルモードルーチンを呼び出すのではなく、ビットフラグをチェックするため、最初の方法はより効率的です。 ただし、2番目の方法では、ユーザーモードコードを変更する必要はありません。 どの手法を使用するかは、ドライバーの要件と、ドライバーに i/o 要求を送信するアプリケーションによって異なります。

 

 




