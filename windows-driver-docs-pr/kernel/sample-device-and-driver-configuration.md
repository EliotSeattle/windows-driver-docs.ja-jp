---
title: サンプル デバイスとドライバー構成
description: サンプル デバイスとドライバー構成
ms.assetid: 803262b2-0882-46d0-9c4f-63e59eb4beaa
keywords:
- WDM ドライバー WDK カーネル、構成
- WDM ドライバー WDK カーネル、レイヤードドライバー
- レイヤードドライバー WDK カーネル
- ドライバーレイヤー WDK WDM
- キーボード WDK カーネル
- マウスの WDK カーネル
- ハードウェア構成 WDK カーネル
- 中間ドライバー WDK カーネル
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: c3c17c4cd31ffddec2b44aad9c177fb2268b8547
ms.sourcegitcommit: b316c97bafade8b76d5d3c30d48496915709a9df
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/13/2020
ms.locfileid: "79242845"
---
# <a name="sample-device-and-driver-configuration"></a>サンプル デバイスとドライバー構成





このセクションでは、例としてキーボードとマウスデバイスを使用して、ハードウェアとドライバーの構成の関係を示します。 構成は、他のデバイスでは異なります。 デバイス構成の詳細については、Windows Driver Kit (WDK) のデバイス固有のドキュメントを参照してください。

### <a href="" id="keyboard-and-mouse-hardware-configurations"></a>

次の図は、キーボードとマウスデバイスで使用できる2つのハードウェア構成を示しています。

-   それぞれがシステムバス上のどこかに直接接続されています。

-   キーボードと補助デバイスコントローラーの両方を介して接続されている

![キーボードとマウスのハードウェア構成を示す図](images/2kbdmuhw.png)

### <a href="" id="keyboard-and-mouse-driver-layers"></a>

次の図は、前の図に示したデバイスでの i/o 操作のための、対応する階層化されたドライバーを示しています。

![キーボードとマウスのドライバーレイヤー](images/2samplyr.png)

キーボードおよびマウスデバイスのドライバーは、ハードウェア構成に関係なく、システムのキーボードクラスとマウスクラスドライバーを使用してハードウェアに依存しない操作を処理できることに注意してください。 これらは、それぞれがシステムを必要としますが、特定のクラスのデバイスに対してハードウェアに依存しないサポートを提供するため、*クラスドライバー*と呼ばれています。

対応する*ポートドライバー*は、各物理デバイスで必要な i/o 操作を実行するためのデバイス固有のサポートを実装します。 X86 ベースのプラットフォーム用のシステムの (i8042) キーボードと補助デバイスポートドライバーは、マウスとキーボードの両方について、デバイス固有の操作を管理します。 各デバイスが個別に接続されているハードウェア構成では、図に示すように、キーボードとマウスのハードウェア構成を示していますが、各システムクラスドライバーは、個別のデバイス固有のポートドライバーまたは1つのドライバーを使用して、各デバイスは、個別のモノリシック (最低レベル) のドライバーとして実装できます。

PnP フィルタードライバーなどの新しい中間ドライバーは、キーボードとマウスのドライバーレイヤーを示す図の構成に追加できます。 たとえば、キーボードクラスドライバーの上に追加されたフィルタードライバーは、要求したサブシステムに i/o サービスを介して渡される前に、プラットフォーム固有の方法でキーボード入力をフィルター処理する場合があります。 このようなフィルタードライバーは、キーボードクラスドライバーと同じ Irp および Ioctl を認識している必要があります。

 

 




