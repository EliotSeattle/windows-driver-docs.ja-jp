---
title: ドライバーのスレッド コンテキスト
description: ドライバーのスレッド コンテキスト
ms.assetid: 8795811d-a5f6-4f90-9fa0-edd4b37fd269
keywords:
- ドライバーのスレッド コンテキストの WDK カーネル
- スレッド コンテキストの WDK カーネル
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: 47b0ec4fe390120559a2e76ddf70c1c93167f25d
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56538682"
---
# <a name="driver-thread-context"></a>ドライバーのスレッド コンテキスト





ように、[ドライバーでの処理の Irp](example-i-o-request---the-details.md#ddk-example-i-o-request---the-details-kg)図、ファイル システムは、2 つの部分ドライバー。

1.  I/O システム サービスを呼び出すユーザー モード スレッドのコンテキストで実行するファイル システム ドライバー (FSD)

    I/O マネージャーは、対応する IRP を FSD に送信します。 場合は、FSD IRP の完了ルーチンを設定、その完了ルーチンが、元のユーザー モード スレッドのコンテキストで必ずしも呼び出されません。

2.  場合によってファイル システムのスレッドのセット、 *FSP (ファイル システム プロセス)*

    FSD は、ドライバー専用のシステム スレッドのセットを作成できますが、ほとんど fsd に対して表示される I/O 要求を行うユーザー モード スレッドを停止せずに作業を取得するためにシステム ワーカー スレッドを使用します。 任意の FSD は可能性があります、そのドライバー専用のスレッドの実行が、システム提供 fsd に対して表示されるシステム メモリを節約するには、この方法は避けること、独自のプロセス アドレス空間を設定します。

一般に、ファイル システムを設定して、さまざまなデバイスの可能性がある、1 つまたは複数の下位レベル ドライバーに送信する Irp の内部作業キューを管理するシステム ワーカー スレッドを使用します。

示すように、最下位レベルのドライバーの中に、[ドライバーでの処理の Irp](example-i-o-request---the-details.md#ddk-example-i-o-request---the-details-kg)図、ドライバーが提供する個別のルーチンのセットを段階的に各 IRP の処理、ファイル システム、システムのスレッドは使用しません。 最下位レベルのドライバーでは、時間のかかるプロセスがシステムのパフォーマンスに大きな影響が及ぶことは、I/O に対してそのデバイスを設定しない限り、独自のスレッド コンテキストを必要はありません。 最下位レベルまたは中間のほとんどのドライバーは、独自の専用のドライバーまたはデバイス専用のシステム スレッドと、そのスレッドにコンテキストの切り替えによるパフォーマンスの低下を支払いを設定する必要があります。

ほとんどのカーネル モード ドライバーなどの物理的なデバイス ドライバーを[ドライバーでの処理の Irp](example-i-o-request---the-details.md#ddk-example-i-o-request---the-details-kg)図、任意のスレッド コンテキストで実行: どのスレッドがあるときに現在は、IRP の処理に呼び出されることです。 その結果、ドライバーで通常の I/O 操作と、デバイス ドライバーの定義と呼ばれる、そのデバイス オブジェクトの部分で処理することに関する状態が維持、*デバイス拡張機能*します。

 

 




