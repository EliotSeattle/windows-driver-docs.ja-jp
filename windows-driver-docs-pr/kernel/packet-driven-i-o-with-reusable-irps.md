---
title: 再利用可能な IRP を使用したパケット駆動型 I/O
description: 再利用可能な IRP を使用したパケット駆動型 I/O
ms.assetid: ff315b61-9fa3-4a20-bc3e-82db0ea3cde7
keywords:
- I/O スタックの場所の WDK カーネル
- パケットに基づく I/O WDK カーネル
- Irp WDK カーネルの再利用
- ヘッダーの WDK カーネル
- I/O マネージャー通信の WDK カーネル
- I/O 状態ブロック WDK カーネル
- 状態ブロックの WDK カーネル
- スタックの場所の WDK カーネル
- Irp WDK のカーネルの再利用
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: 908b910039544ae9de2409af2e89ee9682f316e0
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63377912"
---
# <a name="packet-driven-io-with-reusable-irps"></a>再利用可能な IRP を使用したパケット駆動型 I/O





I/O マネージャー、プラグ アンド プレイのマネージャー、および電源マネージャーを使用して*I/O 要求パケット*(Irp)、カーネル モード ドライバーと通信し、ドライバーが互いに通信を許可するようにします。

I/O マネージャーは、次の手順を実行します。

-   ユーザー モード アプリケーションから送信される通常の I/O 要求を受け入れます。

-   I/O 要求を表す Irp を作成します。

-   適切なドライバーの Irp にルーティングします。

-   完了するまでの Irp を追跡します。

-   各 I/O 操作の元の要求者に状態を返します。

IRP は、1 つ以上のドライバーにルーティングされる可能性があります。 たとえば、ディスク上のファイルを開く要求に進むことが最初、中間のミラー ドライバーを通じて、ファイル システム ドライバーと最終的にディスク ドライバーと、場合によっては、プラグ アンド プレイ ハードウェア バス ドライバー。 この一連のドライバーと呼ばれる、*ドライバー スタック*します。

そのため、各 IRP が、*の固定部分*、さらに 1 つのドライバー固有*I/O スタックの場所*各ドライバーのデバイスを制御します。

-   固定部分で (または*ヘッダー*) など、呼び出し元のスレッド ID、I/O マネージャーが、元の要求に関する情報を保持し、パラメーター ファイルをデバイス オブジェクトのアドレスは開くには、やなど。 固定の部分にも含まれています、*状態の I/O ブロック*、どのドライバーでは、要求された I/O 操作の状態に関する情報を設定します。

-   最上位レベルのドライバーの I/O スタックで場所、I/O マネージャー、プラグ アンド プレイのマネージャー、または電源マネージャーは、要求された操作と、対応するドライバーを使用してどのような it を決定するコンテキストの関数コードなど、ドライバー固有のパラメーターを設定します。行う必要があります。 さらに、各ドライバーはドライバー スタック内の次の下位ドライバーの I/O スタックの場所を設定します。

各ドライバーは IRP を処理するよう、IRP がドライバーの操作の各段階で IRP のため再利用で、I/O スタックの場所にアクセスできます。 さらより高度なドライバー作成 (したり再利用) Irp も下位のドライバーに要求を送信します。

Irp の詳細については、次を参照してください。 [Irp の処理](handling-irps.md)します。

 

 




