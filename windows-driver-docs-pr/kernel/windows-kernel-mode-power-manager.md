---
title: Windows カーネルモード電源マネージャー
description: Windows カーネルモード電源マネージャー
ms.assetid: 2d39e43a-63a6-4474-a1ed-c24b4526a3f5
ms.localizationpriority: medium
ms.date: 10/17/2018
ms.openlocfilehash: ac11c0e189f54a930ed3c56d598a5368482e94c2
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72838313"
---
# <a name="windows-kernel-mode-power-manager"></a>Windows カーネルモード電源マネージャー


Windows は電源管理テクノロジを使用して、Pc の電力消費を削減します。また、特にバッテリ駆動のラップトップを使用します。 たとえば、Windows コンピューターをスリープ状態または休止状態にすることができます。 コンピューターデバイス用の複雑な電源管理システムによって、コンピューターのシャットダウンや電力消費の削減が開始されたときに、接続されているデバイスも適切な方法で電源をオフにして、データが失われないようにすることができます。 ただし、これらのデバイスでは、電源の状態が変更されていることと、制御デバイスが正常にシャットダウンされるまで待機するように指示する通信ループの一部である必要があることを警告する必要があります。

Windows カーネルモードの電源マネージャーは、電源状態の変更をサポートするすべてのデバイスの電源状態の変更を管理します。 これは、多くの場合、他のデバイスを制御する複雑なデバイスのスタックを通じて実行されます。 各制御デバイスは*ノード*と呼ばれ、デバイススタックを介した電源状態の変化の通信を処理できるドライバーが必要です。

電源状態の変更によって影響を受ける可能性のあるドライバーを作成する場合は、次の種類の情報をドライバーコードで処理できる必要があります。

-   システムアクティビティレベル。

-   システムのバッテリレベル。

-   現在のシャットダウン、スリープ、または休止状態の要求。

-   電源ボタンを押すなどのユーザーの操作。

-   コントロールパネルの設定。たとえば、バッテリ電源が10パーセントで自動的にシャットダウンされます。

電源マネージャーは、Irp を使用してこれらの要求を処理します。 Irp の詳細については、「 [irp の処理](handling-irps.md)」を参照してください。

電源管理を処理し、電源イベントを調整し、電源管理の Irp を生成するために、電源マネージャーとポリシー管理を組み合わせて動作します。 電源マネージャーは、電源状態の変更要求を収集し、デバイスの電源状態を変更する必要がある順序を決定してから、適切な Irp を送信して、変更を行うための適切なドライバーを指示します (これにより、サブデバイスが同様に変更します)。 ポリシーマネージャは、システム内のアクティビティを監視し、ユーザーの状態、アプリケーションの状態、およびデバイスドライバの状態を電源ポリシーに統合します。

電源管理の詳細については、「 [Windows ドライバーの電源管理](implementing-power-management.md)」を参照してください。

電源マネージャーは、i/o マネージャーのサブコンポーネントと見なされます。 詳細については、「 [Windows I/o マネージャー](windows-kernel-mode-i-o-manager.md)」を参照してください。

通常、電源マネージャーに直接インターフェイスを提供するルーチンには、"**Po**" というプレフィックスが付いています。たとえば、 **PoSetPowerState**のようになります。 電源マネージャールーチンの一覧については、「 [Power Manager ルーチン](https://docs.microsoft.com/windows-hardware/drivers/ddi/index)」を参照してください。

Windows ドライバーフレームワーク (WDF) には、電源管理をはるかに簡単にするためのライブラリのセットが用意されています。 WDF の詳細については、「[カーネルモードドライバーフレームワークの概要](https://docs.microsoft.com/windows-hardware/drivers/wdf/what-s-new-for-wdf-drivers)」を参照してください。

 

 




