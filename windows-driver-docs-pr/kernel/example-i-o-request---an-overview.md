---
title: I/O 要求の例 - 概要
description: I/O 要求の例 - 概要
ms.assetid: ffc9030e-4b03-4899-88a0-ed6ffd79fd58
keywords:
- ファイル オブジェクトを開く
- ファイルの名前付きオブジェクトの WDK カーネル
- ファイル オブジェクトの WDK カーネル
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: d44dbffe7ca156f9341cdc7e8416379d45e344ae
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63361864"
---
# <a name="example-io-request---an-overview"></a>I/O 要求の例 - 概要





次の図は、サブシステムが、アプリケーションの代わりのデータ ファイルを表すファイル オブジェクトを開いたときの動作の概要を示します。

![ファイル オブジェクトを開くかを示す図](images/2opendev.png)

1.  サブシステムは、名前付きのファイルを開く、I/O システム サービスを呼び出します。

2.  I/O マネージャーは、名前付きのファイルを検索して、ファイル オブジェクトのシンボリック リンクを解決するために、オブジェクト マネージャーを呼び出します。 サブシステムにそのファイル オブジェクトを開くための正しいアクセス権があることを確認するセキュリティ参照モニターも呼び出します。

3.  ボリュームではありませんマウントすると、I/O マネージャー、オープン要求を一時的に中断します。 まだ受け入れていない場合のもので、ファイル オブジェクトを認識うち 1 つまでに 1 つまたは複数のファイル システムを呼び出すファイル システムで使用する大容量記憶装置のいずれかで保持します。 ファイル システムが、ボリュームをマウントすると、I/O マネージャーは要求を再開します。

4.  I/O マネージャー用のメモリ、開いている要求の IRP を初期化します。 ドライバーをオープンでは、要求の「作成」と同じです。

5.  I/O マネージャーは、IRP を渡して、ファイル システム ドライバーを呼び出します。 ファイル システム ドライバーが IRP がどのような操作を実行する必要がありますが、パラメーターをチェック、要求されたファイルがキャッシュ内にある場合を決定しますを決定するにはその I/O スタックの場所にアクセスして、次の下位ドライバーの I/O を設定が IRP 内の場所をスタックそうでない場合。

6.  両方のドライバーは IRP を処理し、カーネル モード (前の図に示されていません) 他のシステム コンポーネントと I/O マネージャーによって提供されるサポート ルーチンを呼び出し、要求の I/O 操作を完了します。

7.  ドライバーは、I/O マネージャーを要求された操作が成功したかどうかを示すために、IRP の設定、I/O 状態ブロックを IRP または失敗した理由を返します。

8.  I/O マネージャーでは、呼び出し元に状態情報は保護されたサブシステムが返せるように、IRP から I/O の状態を取得します。

9.  I/O マネージャーは、完了した IRP を解放します。

10. I/O マネージャーは、オープン操作が成功した場合に、サブシステムにファイル オブジェクトのハンドルを返します。 エラーがあった場合は、サブシステムに適切な状態を返します。

サブシステムがデバイスの I/O 操作 (通常は読み取り、書き込み、またはデバイス I/O コントロールに対する後続の要求で、ファイル オブジェクトを識別するために、返されたハンドルを使用してサブシステムでは、データ ファイル、デバイス、またはボリュームを表すファイル オブジェクトを正常に開いたら、要求の場合)。 このような要求を行うには、サブシステムが I/O システム サービスを呼び出します。 I/O マネージャーは、適切なドライバーに送信される Irp としてこれらの要求をルーティングします。

 

 




