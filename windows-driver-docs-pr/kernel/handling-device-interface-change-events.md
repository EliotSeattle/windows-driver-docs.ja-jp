---
title: デバイス インターフェイス変更イベントの処理
description: デバイス インターフェイス変更イベントの処理
ms.assetid: 8966ca72-41d6-42bb-84a9-8f907a514338
keywords:
- WDK PnP、通知デバイス インターフェイスの変更
- EventCategoryDeviceInterfaceChange 通知
- デバイス インターフェイスの変更通知 PnP WDK
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: aa09bfe834a0135fae404b6e4a2e6831d40a700c
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63338531"
---
# <a name="handling-device-interface-change-events"></a>デバイス インターフェイス変更イベントの処理





ドライバーまたはユーザー モード コンポーネントは、有効または、デバイス インターフェイスのインスタンスを無効に、PnP マネージャー呼び出しすべての通知に登録されるコールバック ルーチン**EventCategoryDeviceInterfaceChange**デバイス上のイベントインターフェイス クラスです。 PnP マネージャーの設定を通知の理由を示すために、**イベント**コールバック ルーチンのメンバー *NotificationStructure* guid パラメーター\_デバイス\_インターフェイス\_到達または GUID\_デバイス\_インターフェイス\_削除します。

GUID を処理するときに\_デバイス\_インターフェイス\_到着のイベント通知のコールバック ルーチンをする必要があります。

-   新しいインターフェイスを処理するためには、ドライバー定義のタスクを実行します。

    通常、通知のコールバック ルーチンは、コールバックのコンテキストでデバイスを直接開きます。 ただし場合、デバイスを開くと、後続の PnP イベント (たとえば、子デバイスの列挙など) が発生する可能性、コールバック ルーチンする必要があります代わりにキュー デバイス; ワーカー ルーチンそれ以外の場合、デッドロックが発生することができます。

    コールバック ルーチンには、新しいインターフェイスの可用性への応答で独自のインターフェイスが有効にする場合があります。

GUID を処理するときに\_デバイス\_インターフェイス\_削除イベント、通知のコールバック ルーチンをする必要があります。

-   インターフェイスが有効になっているときに実行がどのような操作を元に戻します。

デバイスが削除されると、ドライバーは、GUID の中に、開かれたファイル ハンドルを閉じる必要があります\_デバイス\_インターフェイス\_到着のイベントのコールバック。 正常なデバイス削除では、ドライバーは、GUID の中に、ファイル ハンドルを閉じる必要があります\_ターゲット\_デバイス\_クエリ\_イベント コールバックを削除します。 突然の取り外し、ドライバーは、GUID の中に、ファイル ハンドルを閉じる必要があります\_ターゲット\_デバイス\_削除\_完了イベントのコールバック。 GUID の中に、ファイル ハンドルを終了しないでください\_デバイス\_インターフェイス\_削除イベントのコールバック。

 

 




