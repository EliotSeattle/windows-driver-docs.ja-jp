---
title: デバイスのツリー
description: デバイスのツリー
ms.assetid: 3220389a-06cc-4a43-8164-b785d1a16365
keywords:
- devnode PnP WDK
- 存在デバイス WDK
- PnP WDK カーネル、デバイス ツリー
- プラグ アンド プレイ WDK カーネル、デバイス ツリー
- 削除リレーション PnP WDK
- 取り出し関係 PnP WDK
- デバイス ツリー PnP WDK
- WDK PnP ツリー
- デバイス ノード PnP WDK
- 子デバイス PnP WDK
- PnP WDK の階層
- PnP WDK のリレーションシップ
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: 5d599233d34f62fd03486ce65e964f06f7682921
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56529397"
---
# <a name="device-tree"></a>デバイスのツリー





PnP マネージャーでは、デバイス、システム内の追跡するデバイス ツリーを保持します。 次の図は、デバイス ツリーには、システムの構成例を示します。

![サンプルの pnp デバイス ツリー](images/devtree.png)

デバイスのツリーには、システム上に存在するデバイスに関する情報が含まれています。 PnP マネージャーは、マシンの起動時に、ドライバーやその他のコンポーネントからの情報を使用してとデバイスの追加または削除、ツリーを更新するときに、このツリーを構築します。

デバイスのツリーの各ノードは、[デバイス] ノードと呼ばれるまたは*devnode*します。 Devnode から成る、*デバイス オブジェクト*のデバイスのドライバー、および内部の情報がシステムによって保持されます。 したがって、それぞれの devnode は*デバイス スタック*します。

PnP マネージャー要求バス ドライバーの子の一覧を使用してデバイスを[ **IRP\_MN\_クエリ\_デバイス\_リレーション**](https://msdn.microsoft.com/library/windows/hardware/ff551670)要求。 バス ドライバーは、そのバス プロトコルに従って子の一覧を決定します。 たとえば、 [ACPI の Windows ドライバー](acpi-driver.md)を Acpi.sys は、ACPI 名前空間、PCI ドライバー クエリ PCI 構成領域を検索し、USB ハブのドライバーが、USB バス プロトコルに従います。

デバイスのツリーが階層的、バス アダプター、コント ローラーまたはその他の「子」として表されるバス上のデバイスに*バス デバイス*します。 (バス デバイスは、その他の物理、論理、または仮想デバイスを接続できる任意のデバイスです)。デバイス マネージャーを使用して、デバイスを接続して表示することができますな表示オプションを選択、デバイス ツリー内のデバイスの階層を表示できます。

デバイス ツリーの階層では、デバイスがマシンに関連付けられている構造が反映されます。 PnP マネージャーは、デバイスを管理するようにこの階層を使用します。 たとえば、ユーザーは、前の図で表されるマシンから USB コント ローラーを取り外すに要求している場合 PnP マネージャーを取り外してもされているその他の 3 つのデバイスでこのアクションの結果はデバイス ツリーから決定します (USB ハブ、ジョイスティックとカメラ)。 PnP マネージャーでは、コント ローラーを削除しても安全であるかを判断する USB コント ローラー用ドライバーをクエリと、も、コント ローラーの子孫 (ハブ、ジョイスティック、およびカメラ) のドライバーを照会します。

デバイスのツリーは動的です。 デバイスは、追加し、コンピューターから削除、PnP マネージャー (ドライバー) とは、システム上のデバイスの現在の画像を保持します。

デバイス ツリーで表される階層リレーションシップだけでなく、マシン上のデバイスの間のリレーションシップが表示されます。 以下の*取り外し関係*と*取り出し関係*します。 リファレンス ページを参照してください。 [ **IRP\_MN\_クエリ\_デバイス\_リレーション**](https://msdn.microsoft.com/library/windows/hardware/ff551670)詳細についてはします。

バス デバイスがその子デバイスの前に、構成されている点を除いて、デバイス ツリーのビルド順序を想定することはできません。 1 つを想定するなど、しないでくださいバス上の別のデバイスの前に、バス上のデバイスを構成します。

 

 




