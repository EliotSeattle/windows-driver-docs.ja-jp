---
title: 低電力状態からスタートアップするときのプロセッサ リソースの共有
description: 低電力状態からスタートアップするときのプロセッサ リソースの共有
ms.assetid: 2b2e6a1b-7c2d-4f38-9407-a417b75daa6a
ms.localizationpriority: medium
ms.date: 10/17/2018
ms.openlocfilehash: e7e600b3d838de7aee2663134c640a1952d57526
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72838421"
---
# <a name="sharing-processor-resources-during-startup-from-a-low-power-state"></a>低電力状態からスタートアップするときのプロセッサ リソースの共有


コンピューターがスタンバイ状態または休止状態 (ウォームスタート) から起動された場合、ドライバーは必要以上にプロセッサリソースを使用しないようにする必要があります。 最も重要なのは、遅延プロシージャ呼び出し (DPC) ルーチンと、IRQL &gt;= ディスパッチ\_レベルで実行されるコードの実行時間を最小限に抑える必要があることです。 ドライバーは、DPC ルーチンを使用して、デバイスの初期化を支援します。 ドライバーは、ポートミニポートインターフェイスコントラクトの一部として、ディスパッチ\_レベルで初期化コードを実行する必要がある場合があります。

DPC ルーチンが実行されている間、優先順位の低い他のスレッドは、同じプロセッサでの実行がブロックされます。 さらに、キューに登録され、実行準備ができている他の DPC ルーチンは、現在の DPC が終了するまでブロックされる可能性があります。 他のスレッドで expediently を実行できるようにするには、一般的な DPC ルーチンを100マイクロ秒以下で実行する必要があります。

システムの起動時に長時間実行される DPC ルーチンは、他のデバイスの初期化を遅らせます。 この遅延により、デバイスの初期化フェーズが長くなり、オペレーティングシステムによるスタートアップの完了が遅れることになります。

次のベストプラクティスを使用して、DPC ルーチンを設計します。

-   1つの DPC ルーチンは、100マイクロ秒を超えて実行することはできません。

-   [**Kestallexecutionprocessor**](https://docs.microsoft.com/windows-hardware/drivers/ddi/ntifs/nf-ntifs-kestallexecutionprocessor)ルーチンを呼び出して実行を遅延させる DPC ルーチンでは、100マイクロ秒を超える遅延を指定することはできません。

-   タスクに100マイクロ秒より長い時間が必要で、ディスパッチ\_レベルで実行される場合、DPC ルーチンは100マイクロ秒後に終了し、1つ以上の DPC タイマールーチンのスケジュールを設定して、後でタスクを完了する必要があります。

-   「WDK」に記載されているパフォーマンス分析ツールを使用して、DPC ルーチンの実行時間を評価します。

パフォーマンス分析ツールの詳細については、「 [Windows Vista でのシステム再開パフォーマンスの測定](https://go.microsoft.com/fwlink/p/?linkid=69964)」を参照してください。

 

 




