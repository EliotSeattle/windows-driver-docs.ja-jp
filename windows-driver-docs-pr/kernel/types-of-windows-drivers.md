---
title: Windows ドライバーの種類
description: Windows ドライバーの種類
ms.assetid: e6696c6b-2d3c-473c-9f46-576fe0c40496
keywords:
- Windows ドライバー WDK、種類
- ドライバー WDK、種類
- カーネルモードドライバー WDK、種類
- 最高レベルのドライバー (WDK)
- 中間ドライバー WDK カーネル
- 最低レベルのドライバー WDK
ms.date: 06/16/2017
ms.localizationpriority: High
ms.openlocfilehash: d348634821c1b675c388c529fe845e20f8c7575a
ms.sourcegitcommit: c73954a5909ec8c7e189f77fd5813f2eb749687c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/07/2019
ms.locfileid: "72007655"
---
# <a name="types-of-windows-drivers"></a>Windows ドライバーの種類





Microsoft Windows ドライバーには、次の2つの基本的な種類があります。

-   *ユーザーモードドライバー*はユーザーモードで実行され、通常は Win32 アプリケーションとカーネルモードドライバーまたはその他のオペレーティングシステムコンポーネントとの間にインターフェイスを提供します。

    たとえば、Windows Vista では、すべてのプリンタードライバーがユーザーモードで実行されます。 プリンタードライバーのコンポーネントの詳細については、「[印刷の概要](https://docs.microsoft.com/windows-hardware/drivers/print/introduction-to-printing)」を参照してください。

-   *カーネルモードドライバー*は、executive の一部としてカーネルモードで実行されます。これは、i/o、プラグアンドプレイメモリ、プロセスとスレッド、セキュリティなどを管理するカーネルモードのオペレーティングシステムコンポーネントで構成されます。 カーネルモードドライバーは通常、階層化されています。 一般に、上位レベルのドライバーは、通常、アプリケーションからデータを受信し、データをフィルター処理して、デバイスの機能をサポートする下位レベルのドライバーに渡します。

    一部のカーネルモードドライバーは、 [Windows Driver Model](windows-driver-model.md) (wdm) に準拠する*wdm ドライバー*でもあります。 すべての WDM ドライバーは、プラグアンドプレイ、および電源管理をサポートしています。 WDM ドライバーは、Windows 98/Me および Windows 2000 以降のオペレーティングシステムでは、ソースと互換性がありますが、バイナリには互換性がありません。

    カーネルモードドライバーは、オペレーティングシステム自体と同様に、適切に定義された一連の必須機能を備えた独立したモジュールコンポーネントとして実装されます。 すべてのカーネルモードドライバーは、一連のシステム定義の[標準ドライバールーチン](https://docs.microsoft.com/windows-hardware/drivers/kernel/introduction-to-standard-driver-routines)を提供します。

カーネルモードドライバーをいくつかの種類に分割する図を次に示します。

![カーネルモードドライバーの種類を示す図](images/1drvlyrs.png)

図に示すように、ドライバースタックには、最上位レベル、中間層、および最低レベルの3つの基本的な種類のカーネルモードドライバーがあります。 構造体では、それぞれの型がわずかに異なりますが、機能は大きく異なります。

1.  *最上位レベルのドライバー*。 最上位レベルのドライバーには、次のようなファイルシステムをサポートするファイルシステムドライバー (FSDs) が含まれています。

    -   NTFS

    -   ファイルアロケーションテーブル (FAT)

    -   CD-ROM ファイルシステム (CDFS)

    最上位レベルのドライバーは、中間レベルの機能ドライバーや最低レベルのハードウェアバスドライバーなど、基になる下位レベルのドライバーからのサポートに常に依存します。

2.  仮想ディスク、ミラー、デバイスタイプ固有の*クラスドライバー*などの*中間ドライバー*。 中間ドライバーは、基になる下位レベルのドライバーからのサポートに依存します。 中間ドライバーは、次のようにさらに細分化されます。

    -   [*関数ドライバー*](function-drivers.md)は、i/o バス上の特定の周辺機器を制御します。

    -   [*フィルタードライバー*](filter-drivers.md)は、関数ドライバーの上または下に挿入します。

    -   *ソフトウェアバスドライバー*は、上位レベルのクラス、関数、またはフィルタードライバー自体をアタッチできる子デバイスのセットを提供します。

        たとえば、オンボードセットの異種デバイスを含む多機能アダプターを制御するドライバーは、ソフトウェアバスドライバーです。

    -   システムで定義されたクラス/miniclass インターフェイスをエクスポートするシステム提供の*クラスドライバー*は、実質的には、1つ以上のリンクされた*miniclass ドライバー* (*ミニドライバー*と呼ばれることもあります) を持つ中間ドライバーです。 リンクされたクラスとミニドライバーの各ペアは、関数ドライバーまたはソフトウェアバスドライバーと同等の機能を提供します。

3.  *最下位レベルのドライバー*は、周辺機器が接続されている i/o バスを制御します。 最下位レベルのドライバーは、下位レベルのドライバーに依存しません。

    -   ハードウェア[*バスドライバー*](bus-drivers.md)はシステムによって提供され、通常は動的に構成可能な i/o バスを制御します。

        ハードウェアバスドライバーは、プラグアンドプレイ manager と連携して、ドライバーが制御する i/o バスに接続されているすべての子デバイスのシステムハードウェアリソースを構成および再構成します。 これらのハードウェアリソースには、デバイスメモリと割り込み要求 (Irq) のマッピングが含まれます。 (ハードウェアバスドライバーは、windows 2000 より前の Windows NT ベースのオペレーティングシステムのリリースで HAL コンポーネントによって提供された機能の一部を適用しています)。

    -   物理デバイスを直接制御する*レガシドライバー*は、最下位レベルのドライバーです。

 

 




