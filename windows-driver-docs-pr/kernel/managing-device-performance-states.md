---
title: デバイスのパフォーマンスの状態を管理します。
description: デバイスのパフォーマンスの状態を管理します。
ms.assetid: 5a4cc09a-e86e-4e5a-98b2-0351b253b5b6
keywords:
- 電源管理の WDK カーネル、デバイスのパフォーマンス状態します。
- デバイスのパフォーマンス状態 WDK 電源管理
- パフォーマンス状態 WDK の電源管理
- カスタムの電源設定 WDK 電源管理
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: 5f5f05478854cfd09c60da765371607e72dc3d90
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56528169"
---
# <a name="managing-device-performance-states"></a>デバイスのパフォーマンスの状態を管理します。


Windows Vista の機能が向上するスタックのドライバーをできるようにする拡張された電源管理インフラストラクチャは、自分のデバイスの電源ポリシーを管理します。 ドライバーは、システム定義の電源設定の変更、またはシステム電源イベントが発生したときに通知を登録できます。 デバイスの電源ポリシー所有者は、これらの通知を使用して、そのデバイスの電力使用状況を適切に調整します。 さらに、デバイス固有能力とパフォーマンスの機能、電源ポリシーがシステムに密接に統合できるへのアクセスを提供するカスタムの電源設定を作成することができます。 システム電源ポリシーとデバイスのパフォーマンスの状態と動作の省電力を統合する 2 つの主要な方法を次に示します。

[デバイスのカスタムの電源設定の作成](#creating-custom-power-settings-for-a-device)

[登録するには、アクティブな電源設定、電源スキーム パーソナリティ、または電源の変更の通知](#registering-to-be-notified-of-a-change-to-the-active-power-scheme)

### <a href="" id="creating-custom-power-settings-for-a-device"></a> デバイスのカスタムの電源設定の作成

デバイスのパフォーマンスの状態や電源を節約の動作を構成するために使用するカスタムの電源設定を定義することができます。 カスタムの電源設定に関する情報が保存され、電源マネージャーによって管理されます。 システム内の他のコンポーネント-デバイス ドライバー、サービス、またはアプリケーションなど、カスタムの電源設定の値が変更されたときに通知を受けることができます。 一般に、電力消費量とパフォーマンスをトレードオフする機能を搭載するデバイスでは、カスタムの電源設定の対応する必要があります。 カスタムの電源設定を作成して、電力消費量をシステム電源ポリシーと緊密に統合する最も柔軟なアプローチは、次の他の特典を提供します。

-   カスタム ユーザー インターフェイスは、カスタムの電源設定をユーザーにアクセスできるようにする必要はありません。 カスタムの電源設定を含む、すべての電源設定に、ユーザーに表示されます、**詳細設定**のページ、**電源オプション**コントロール パネル。

-   ユーザーおよびシステム管理者では、Powercfg.exe、電源管理コマンド ライン ツールを使用して、カスタムの電源設定の構成をスクリプトことができます簡単にします。

-   必要に応じて、システム管理者が管理用テンプレートを作成できます (します。新しい電源設定のグループ ポリシー ベースの構成をできるようにする ADM) ファイル。

個々 の電源設定には、すべての一意に識別する、名前、説明、および電源設定の値を指定するために必要な情報が含まれています。 各電源設定には、GUID、設定の名前、説明、および AC と DC の電源設定の既定の設定が定義されます。 カスタムの電源設定に対して作成できる静的に、デバイスを使用して、 [ **INF AddPowerSetting ディレクティブ**](https://msdn.microsoft.com/library/windows/hardware/ff546313)、または電源に含まれている Win32 の電源管理機能を呼び出すことによって動的にMicrosoft Windows SDK のドキュメントで提供される管理の参照。

ドライバー呼び出し[ **PoRegisterPowerSettingCallback** ](https://msdn.microsoft.com/library/windows/hardware/ff559727)電源マネージャーを呼び出す、ドライバーの電源設定に変更を通知するコールバック ルーチンを登録します。 設定が変更されたときに電源マネージャーはコールバック ルーチンを呼び出すし、新しい設定の値を渡します。 ドライバーは、電源設定の適切なアクションを実行できます。 各設定は、電源設定の GUID によって識別されます。 システム定義の電源設定 Guid は、Wdm.h と Ntpoapi.h で定義されます。

たとえば、モニターの電源がオンまたはオフになっているときの通知、ドライバーは**PoRegisterPowerSettingCallback**、モニターの電源設定を識別する GUID を指定する (GUID\_モニター\_電源\_ON) と電源マネージャーがモニターの電源設定の値が変更されたときに呼び出すコールバック ルーチンへのポインター。

### <a href="" id="registering-to-be-notified-of-a-change-to-the-active-power-scheme"></a>登録するには、アクティブな電源設定、電源スキーム パーソナリティ、または電源の変更の通知

アクティブな電源設定の特性は、全体的な節電システムの動作、ユーザーの意図を伝えます。 カスタムのスキームを含む、すべての電源設定では、スキームの全体的なという意図を示す個性があります。 これにより、つつ、スキームの意図を知ることのメリットをすべて作成する追加のカスタム電源設定ができます。 Windows Vista には、次の 3 つのシステム定義の電源設定と、対応する個性が含まれています。

<a href="" id="maximum-power-savings"></a>**最大限の省電力**  
電力消費量を最小限に抑えるのパフォーマンスが低下します。

<a href="" id="automatic--balanced-"></a>**自動 (バランス)**  
最適な電源状態のレベルに基づいて全体的な電力消費を選択するシステムを使用できます。

<a href="" id="maximum-performance-------"></a>**最大のパフォーマンス**   
電力消費量に関係なく最大のパフォーマンスを提供します。

電源のソースには、AC または DC 電源のいずれかを指定できます。

デバイスの電源ポリシー所有者は、アクティブな電源設定、電源スキーム パーソナリティ、および電源に関する情報を使用して、デバイスの電源ポリシーを調整します。 たとえば、デバイスの電源ポリシー所有者可能性があります積極的にデバイスの電源に電源スキームの性格が変わった場合は**最大節電**します。 ただし、電源スキームの特性を変更すると**最大パフォーマンス**、そのデバイスのパフォーマンス レベルを維持ではなく電力消費量を減らすし、可能性があるデバイスの電源のままに可能性があります、デバイスの電源ポリシーの所有者常時を最高レベルのパフォーマンスを確認します。

ドライバーは、アクティブな電源設定、電源スキーム パーソナリティ、または電源に変更が発生したときに通知を登録できます。 ドライバーを呼び出す**PoRegisterPowerSettingCallback**電源マネージャーを呼び出す次のように、このような変更のドライバーに通知するコールバック ルーチンを登録します。

-   アクティブな電源設定の変更の通知に登録する電源設定の設定を表す GUID を指定します (GUID\_ACTIVE\_POWERSCHEME)。 電源マネージャーが呼び出してコールバック ルーチン アクティブな電源設定が変更されるたびに新しい電源設定の性格が前の電源設定と同じ場合でもです。

-   電源スキーム パーソナリティへの変更の通知に登録するには、電源スキーム パーソナリティの設定を表す GUID を指定 (GUID\_POWERSCHEME\_パーソナリティ)。 電源マネージャーは、コールバック ルーチンを呼び出してアクティブな電源設定の変更と新しい電源設定の個人用設定が以前の電源設定の特性によって異なります。

-   電源の変更の通知に登録する電源設定を表す GUID を指定します (GUID\_ACDC\_POWER\_ソース)。 電源マネージャーは、コールバック ルーチンを呼び出して、電源設定の変更をソースたびにします。

電源マネージャーがコールバック ルーチンを呼び出すし、GUID を渡しますアクティブな電源設定の変更、電源スキームのパーソナリティの変更を新しい電源設定または電源スキーム パーソナリティを表します。 ドライバーは、変更に適切なアクションを実行できます。

アクティブな電源設定と電源パーソナリティ設定は、それぞれの値を識別するために次の Guid を使用します。

-   GUID\_最大\_POWER\_率の削減に対応する、**最大節電**スキームとその対応するパーソナリティの電源をします。

-   GUID\_MIN\_POWER\_率の削減に対応する、**最大パフォーマンス**スキームとその対応するパーソナリティの電源をします。

-   GUID\_標準\_POWER\_に対応するコスト削減、**自動 (バランス)** スキームとその対応するパーソナリティの電源をします。

Power ソースの変更、電源マネージャーによってコールバック ルーチンを呼び出すし、AC 電源ソース DC 電源で電力ソースの設定と、コンピューターの電源が入っているかどうかを示す power ソースの設定の値を表す GUID を渡しますソース、または短期的な DC 電源。

 

 




