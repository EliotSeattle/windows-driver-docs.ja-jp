---
title: プリンター インストールとプラグ アンド プレイ マネージャー
description: プリンター インストールとプラグ アンド プレイ マネージャー
ms.assetid: 1edc92f1-fcd9-4af0-957d-cd7ff2e40125
keywords:
- プラグ アンド プレイ manager WDK を印刷します。
- WDK の印刷のインストールの検出が重複しています
- 重複するプリンターのインストールを検出します。
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 6752f83a470af87961b2f610026c389c185cceb3
ms.sourcegitcommit: fb7d95c7a5d47860918cd3602efdd33b69dcf2da
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2019
ms.locfileid: "67356033"
---
# <a name="printer-installation-and-the-plug-and-play-manager"></a>プリンター インストールとプラグ アンド プレイ マネージャー





プラグ アンド プレイ マネージャーでは、マシンのすべてのプラグ アンド プレイ イベントを処理し、すべてのデバイスに汎用します。 プラグ アンド プレイ manager については、「[プラグ アンド プレイ](https://docs.microsoft.com/windows-hardware/drivers/kernel/implementing-plug-and-play)します。 [プラグ アンド プレイを概要](https://docs.microsoft.com/windows-hardware/drivers/kernel/introduction-to-plug-and-play)のプラグ アンド プレイ インストール、およびさまざまなカーネル モードとユーザー モード コンポーネントの操作方法の概要を説明します。

### <a href="" id="printer-installation-differences-between-windows-98-me-and-windows-200"></a>プリンターのインストールの違いが Windows 98/Me、Windows 2000 以降

Windows 2000 以降では、プラグ アンド プレイ アーキテクチャとは異なる Windows 95/98/me で 最も重要な違いは次のとおりです。

-   Windows 2000 以降に含まれるドライバーは、オペレーティング システムがインストールされている場合にインストールされている、driver.cab ファイル内に格納されます。 ユーザーが通常ドライバーをインストールする元のインストール メディアでは不要であるために、このファイルはすべての種類のデバイスのプラグ アンド プレイ インボックス ドライバーのすべて含まれます。

-   特定のドライバーをインストールするには、ほとんどまたはまったくないユーザーの介入が必要です。 Windows 2000 または Microsoft によってデジタル署名されている以降のバージョンのドライバーが driver.cab または既にある場合、コンピューターにインストールされているプラグ アンド プレイ ドライバーの署名を検証およびユーザーの介入なしで、ドライバーをインストールします。 この種類のインストールには、サーバー側のインストールが呼び出されます。 ドライバーは、システムで使用できませんまたは署名されていないドライバーのインストールが必要です (ユーザー インターフェイス要素) 経由のユーザーとの対話、プラグ アンド プレイは、クライアント側のインストールに戻ります。 インストールの種類ごとの詳細については、ユーザー モードの PnP マネージャーでの説明を参照してください。[デバイス インストール コンポーネント](https://docs.microsoft.com/previous-versions/ff541277(v=vs.85))します。 ほとんどの場合、接続されているプラグ アンド プレイ デバイスとコンピューターが起動したとき、デバイスがインストールされ、によって、ユーザーがログオンしたときに使用する準備。

場合は、ユーザーは、インストールするドライバーを選択できる必要があります、InteractiveInstall ディレクティブを使用することができます、 [ **INF ControlFlags セクション**](https://docs.microsoft.com/windows-hardware/drivers/install/inf-controlflags-section)します。 このディレクティブは、次の 2 つの状況でのみ使用できます。

1.  ハードウェア Id が正しく定義されたデバイスをインストールします。 これは、ハードウェア デバイスが破損したハードウェア ID を持つとき、またはハードウェア ベンダーはハードウェアの設計でエラーがある、2 つの異なるデバイスに同じのハードウェア ID を割り当てるときに発生します。

2.  ジェネリック クラスのインストーラーを使用できないデバイスのドライバーまたはオペレーティング システムに付属のドライバーをインストールします。

InteractiveInstall ディレクティブでは、ハードウェア Id または互換性 Id が表示されている、セットアップは、管理者がログオンするまで、インストールが遅延されるように、クライアント側にその Id に一致するプリンターのインストールを延期します。 管理者は、適切なドライバー ファイルをインストールするように求められます。 これは、同じ 2 つのプリンター ドライバーが共有している場合に役立ちます。*デバイス ID*、さまざまなドライバーが必要ですが。

Windows 2000 とは対照的以降、Windows 95/98/Me プラグ アンド プレイ デバイスをインストール ユーザーの介入がある場合にのみ、*ハードウェア ID* (ランク 0) と一致します。 ある場合に、*互換性 ID*プラグ アンド プレイ デバイスがハードウェア ID の一致なし、ユーザーのドライバーの一致を (ランク-1) は、インストール メディアから適切なドライバーを選択するように求められます。 (つまり、ユーザーが、ドライバーをインストールするにはインストール メディアを用意する必要があります。)

Windows 95/98/私に、複数のデバイス (または複数のバス上のようなデバイスの場合)、ドライバーが書き込まれるときに常に求められますインストール互換性 ID が表示されている場合のみ重複するドライバーを使用したすべてのハードウェア ID が一覧表示されない限りINF ファイルのエントリ。

### <a name="duplicate-installation-detection"></a>インストールの検出が重複しています

セットアップでは、プリンターをインストールするプリンター クラスのインストーラーを呼び出して、クラスのインストーラーは、プリンターが既に手動でインストールされているかどうかを決定します。 この機能を使用するには、現在インストールされているプリンターのドライバーとポートの名前と、INF ファイルに示されている間の完全一致を検索します。 2 番目の印刷キューではインストールされませんが代わりに関連付けますクラスのインストーラー検出、インストールされている印刷キューのドライバー、ポート名がこれら 2 つのパラメーターと一致する場合、 *devnode*エントリ。 これは、同じデバイスの 2 番目の印刷キューを作成できないようにします。

多くの人気のあるプリンター モデルでは、同じハードウェア ID (HP DeskJet シリーズなど) を共有します。 Windows 95/98/Me、ユーザーは、プラグ アンド プレイによって検出される、その後 DeskJet モデルを手動でインストールした場合 2 つ目の印刷キューがインストールされている場合は、ユーザーが適切なドライバーを選択します。 ユーザーによってドライバーが選択されない場合、自分がするように求めコンピューターを再起動するたびに。

Windows 2000 以降では、この動作を回避を両方とのすべてのプリンターを一覧表示して、*ハードウェア ID*と*互換性 ID*と一致します。 複数の一致が見つかると、クラスのインストーラーが、同じハードウェア ID と一致する印刷キューが既に存在するかどうかを確認します。 発生した場合、プラグ アンド プレイ マネージャは、2 番目のキューがインストールされません。 そうでないハードウェア ID の一致がダウン グレードした場合に互換性のある ID と一致します。 これらのハードウェア Id が InteractiveInstall エントリにも表示されます (を参照してください[ **INF ControlFlags セクション**](https://docs.microsoft.com/windows-hardware/drivers/install/inf-controlflags-section)) ドライバーを選択する INF ファイルのユーザーがように求められます。

 

 




