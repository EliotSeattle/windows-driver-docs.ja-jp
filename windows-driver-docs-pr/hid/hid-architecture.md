---
title: HID のアーキテクチャ
description: Windows の HID ドライバー スタックのアーキテクチャは、hidclass.sys をという名前のクラス ドライバーに基づいて構築されます。
ms.assetid: FCDDCD6A-8808-44D5-B300-3869DD9FD46C
keywords:
- HID クラス ドライバー
- hidclass.sys
- Windoows 用 HID クラス ドライバー
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: a9f0ab4e1cbc32b693237557a749cec70a10ff92
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63388913"
---
# <a name="hid-architecture"></a>HID のアーキテクチャ


Windows における HID ドライバー スタックのアーキテクチャは、*hidclass.sys* という名前のクラス ドライバー上に構築されています。 クライアントとトランスポート ミニドライバー ユーザー モードまたはカーネル モードからクラス ドライバーにアクセスします。

## <a name="the-hid-class-driver"></a>HID クラス ドライバー


システム提供の HID クラス ドライバーは、関数の WDM ドライバーと HID デバイス セットアップ クラス (HIDClass) 用のバス ドライバーです。 HID クラス ドライバーの実行可能なコンポーネントが*hidclass.sys*します。 HID クラス ドライバーは、HID クライアントとさまざまなトランスポート、接着剤です。 これにより、トランスポートからの独立した方法で書き込まれるクライアントを非表示にできます。 このレベルの抽象化により、クライアントと新しい standard では、(ほとんど変更なし) で作業を続行するか、サード パーティのトランスポートが導入されました。

アーキテクチャの表現を次に示します。 

![クライアント、hid クラス ドライバーおよび hid トランスポート コンポーネントを示す簡略化された hid ドライバー スタックを非表示にします。](images/hid-intro-simple.png)

前の図には、次の項目が含まれます。

-   HID のクライアントでは、Windows およびサード パーティのクライアントとそのインターフェイスを識別します。
-   HID クラス ドライバー -、 *hidclass.sys*実行可能ファイルです。
-   HID トランスポート ミニドライバーでは、Windows およびサード パーティのトランスポートとそのインターフェイスを識別します。

次の汎用の HID クライアントおよびトランスポート デバイス スタックの図に示します。


![ジェネリックの HID クライアントとトランスポート スタックを HID デバイスです。](images/hid-device-stacks-generic.png)

USB 経由で HID キーボードとマウスのコレクションを示す別のデバイス スタックの図を次に示します。

![キーボードとマウス USB HID デバイス スタックです。](images/hid-device-stacks.png)

## <a name="hid-clients"></a>HID クライアント


ドライバーやサービスと通信するアプリケーションの非表示にクライアントが*HIDClass.sys*と多くの場合 (例: デバイスの特定の型を表す センサー、キーボード、マウスなど)。 ハードウェア ID または特定の HID コレクションを使用してデバイスを特定して、次のガイダンスを使用して非表示にコレクションと通信します。

ユーザー モード ドライバーとアプリケーション、およびカーネル モード ドライバーでは、HID コレクションを操作するには、次の操作を行います。

-   ユーザー モード ドライバーとアプリケーションを使用して、HIDClass サポート ルーチン (HidD\_Xxx)、HID コレクションに関する情報を取得します。
-   カーネル モード ドライバー、ユーザー モード ドライバーおよびアプリケーションを使用して、HID サポート ルーチンの解析 (HidP\_Xxx)、およびカーネル モード ドライバーは HID レポートを処理する HID クラス ドライバーの Ioctl を使用します。

次の表は、上記の情報の簡略化したものです。

|             | ドライバー                      | アプリケーション |
|-------------|------------------------------|--------------|
| ユーザー モード   | HidD\_Xxx                    | HidP\_Xxx    |
| カーネル モード | HidD\_Xxx または IOCTL\_HID\_xxx | なし          |

 

詳細については、次を参照してください。[コレクションの開始の HID](opening-hid-collections.md)します。

サポートされているすべての非表示にクライアントの一覧は、次を参照してください。[を非表示に、Windows でサポートされるクライアント](hid-clients-supported-in-windows.md)します。

## <a name="the-hid-transport-driver"></a>HID トランスポート ドライバー


HID クラス ドライバーは、ハードウェアの入力デバイスにアクセスする HID ミニドライバーを使用して設計されています。 HID ミニドライバーは、サポートされている入力デバイスのデバイス固有の操作を抽象化します。 HID ミニドライバーは、HID クラス ドライバーに登録すると、HID クラス ドライバーにその操作をバインドします。 HID クラス ドライバーは、ミニドライバーのサポート ルーチンを呼び出すことによって、HID ミニドライバーと通信します。 さらに、HID ミニドライバーは、基になるバスまたはポート ドライバーにダウン ドライバー スタックの通信を送信します。

Windows で提供される HID トランスポートの一覧は、次を参照してください。[を非表示に、Windows でサポートされるトランスポート](hid-transports-supported-in-windows.md)します。

 

 




