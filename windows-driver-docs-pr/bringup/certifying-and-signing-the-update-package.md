---
title: 認定と更新プログラム パッケージの署名
description: ファームウェアの更新プログラムは、ドライバー パッケージとして配信され、同様の検証および署名プロセスを通じて通常のドライバー パッケージとして移動する必要があります。
ms.assetid: 054E98A5-E860-43BD-9AD2-7CCE55D2164B
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 1152a98b27d4a9d17a82374f37003d6b535c362f
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56536215"
---
# <a name="certifying-and-signing-the-update-package"></a>認定と更新プログラム パッケージの署名


ファームウェアの更新プログラムは、ドライバー パッケージとして配布される、ためには、正規のドライバー パッケージとすべての同様の検証と署名プロセス経由する必要があります。 Windows ハードウェア ラボ キット (Windows HLK) のテストに合格する必要があります、ドライバー パッケージに署名するため、パートナー センターに送信する必要があります。 署名済み、ドライバー パッケージ、申請者に配布されます。

> [!NOTE]
> ドライバー パッケージの署名は、UEFI ファームウェアまたはデバイスのファームウェア自体の署名と異なります。 セキュリティのカタログを使用して配信される、ドライバー パッケージの署名は、UEFI に渡す前に firmware.bin の整合性を確認して、Windows によって使用されます。 Windows では、ファームウェアにセキュリティのカタログは提供されません。 UEFI ファームウェアまたはデバイスのファームウェア更新の署名は、プラットフォーム ファームウェアによって検証され、Windows ではチェックされません。 IHV と OEM は、整合性、および署名の検証、暗号化、またはその他の手段を介してファームウェアのセキュリティを確保します。

## <a name="firmware-update-signing-process-and-requirements-for-uefi-secure-boot"></a>ファームウェア更新の署名のプロセスおよび UEFI のセキュア ブートの要件

UEFI セキュア ブートがアクティブで Windows デバイスで消費するための UEFI ファームウェアの更新プログラムを署名するときに、署名プロセスには、次のタスクのいくつかの組み合わせが必要です。

1. 更新したファームウェア イメージを署名します。
2. 最新のファームウェアを実行するカプセルの署名。
3. オペレーティング システムに提供されるファームウェアの更新プログラム パッケージの署名このパッケージには、ターミネータが含まれます。

のみこれらのタスクの\#3 は常に必要です。 セキュリティで保護のブートが有効なシステムのすべての UEFI ファームウェア署名が必要、ことを意味する\#UEFI ドライバーやアプリケーションに関連する更新プログラムとは、1 が必要です。 コネクテッド スタンバイ システムでは、 \#1 もすべてシステム ファームウェアに必要です。 ファームウェアの更新プログラムが他の方法で保護されていない場合は、ファームウェアの更新プログラム自体を保護するために、インストールする前に、更新プログラム パッケージの信頼性を保証する、カプセルを署名する必要があります。

次の図では、このトピックの残りの部分で説明されているさまざまなコンポーネントの署名者を示します。

![ファームウェアの更新コンポーネントと署名者](images/firmwareupdatecomponentsandsigners.png)

## <a name="signing-the-updated-firmware"></a>更新したファームウェアを署名

署名済み、ときに更新したファームウェアの署名は、ブート時に、システムのファームウェア ローダーによって検証できる必要があります。 少なくとも、再起動、時に自動的に行われますが、信頼性とユーザー エクスペリエンスの上の理由から、前の検証は強くお勧めします。

ARM システムでは、UEFI ドライバーやファームウェア イメージ自体とは別のアプリケーションをインストールできませんので、使用できる唯一の UEFI PE と COFF イメージは、Microsoft Windows OS ローダー (BootMgfw.efi)、および UEFI 許可されているデータベースの唯一のエントリを使用して検証されます。Microsoft Windows 運用 CA 2011 を含むです。 したがって、唯一のシステムとデバイスのファームウェアを追加できます。 ARM 以外のシステムでは、UEFI ドライバーとアプリケーションを UEFI 許可されているデータベース内のキーにキーのチェーンで署名することができます。

システムまたはデバイスのファームウェアをチェーン バック キーで署名するかできますシステムにバインドされているキーへのブート ROM またはその他の手段で保護する (符号付きの capsule など、インストールを保護し、)。

## <a name="signing-the-capsule"></a>ターミネータの署名

Capsule の内容は、OEM によって決定されます。 ターミネータは OEM 形式を選択で更新するファームウェア イメージのカタログを含めることができますだけまたは EFI アプリケーション イメージ (PE と COFF ファイル形式) の形式で届く場合があります。 ターミネータが PE と COFF ファイルの場合する必要があります署名する必要が、OEM が Microsoft Windows のファームウェア更新プログラム パッケージの署名に送信する前にします。

ARM ベースのシステムでは、UEFI 許可データベース ("db") で Microsoft の運用 CA 2011 以外のキーは許可されませんし、マイクロソフトは、サード パーティ製 UEFI のコードの署名にこの CA で署名者を使用しないため、このような capsule の負荷を活用できません、正規の UEFI LoadImage () サービス。 Capsule のアプリケーションがある可能性があります、ただし、ブート ROM の公開キーまたは UEFI の PK に対するプラットフォームに固有の検証を使用して読み込まれます この負荷が引き続き必要がありますので注意が TPM PCR に測定する\[7\]任意のイメージです。 一般的には、ときに capsule 署名が必要と判断した (例: 完全な更新プログラム パッケージの整合性と信頼性を確認する)、ターミネータが外部での UEFI ファームウェアのファームウェアの更新プログラムを構成する場合があります、ターミネータなどにサインインできるようにプラットフォームの保持を使用して検証 UEFI 以外のキー (ブート ROM または UEFI の PK にバインドされている公開キーにキーの組み合わせを使用して署名など)。

ARM 以外のシステムでは、ターミネータは、UEFI 許可されているデータベース内のエントリにキー チェーンで署名されている限り、EFI アプリケーションを指定できます。 UEFI セキュア ブートし、自動的に活用すること、capsule の整合性を検証します。

## <a name="signing-the-firmware-update-package"></a>ファームウェアの更新プログラム パッケージの署名

ファームウェアの更新パッケージに署名するパートナー センターに送信する必要があります。 この手順では、パッケージの内容のカタログ署名を作成します。 カタログ署名が改ざんされていない UpdateCapsule を介してファームウェアに実際の更新プログラムが提供される前に、パッケージが認証済みであることを確認に Microsoft OS ローダーによって使用されます。

ファームウェアの更新プログラム パッケージに署名するため、パートナー センターに送信します。

1. 前のセクションの指示に従って capsule の内容に署名します。
2. 含む、capsule ファームウェアの更新プログラム パッケージを作成し、テストは、ファームウェアの更新プログラム パッケージを署名します。 詳細については、[update のドライバー パッケージの作成](authoring-an-update-driver-package.md)を参照してください。
   > [!NOTE]
   > Windows 8 以降、Windows は、テスト環境であっても OEM Verisign 署名されたファームウェアの更新パッケージを許可しません。
3. ファームウェアの更新プログラム パッケージをインストールすることによって、ファームウェアを更新します。
4. テスト システムを Windows ハードウェア ラボ キット (HLK) をインストールし、ファームウェア デバイスに適用可能なすべてのテストを実行します。
5. HLK ログと、ドライバー署名のためのパートナー センターに送信します。

> [!NOTE]
> ファームウェアの更新プログラムのドライバー パッケージを送信中に、該当する OS として Windows 8 以降を選択してください。 すべてのダウンレベルの OS を選択した場合、パートナー センターは SHA1 アルゴリズムでドライバー パッケージ内のカタログを署名します。 Windows 8 以降、ファームウェア更新のすべてのドライバー パッケージは SHA256 署名をする必要があります。

## <a name="related-topics"></a>関連トピック

[ファームウェアのドライバー パッケージを使用してシステムとデバイスのファームウェア更新プログラム](system-and-device-firmware-updates-via-a-firmware-driver-package.md)  
[ESRT テーブルの作成](populating-the-esrt-table.md)  
[異なる地理的領域のファームウェアをカスタマイズします。](customizing-firmware-for-different-geographic-regions.md)  
[ファームウェアの更新プログラム パッケージの作成](authoring-a-firmware-update-package.md)  
[更新プログラムのインストール](installing-the-update.md)  
