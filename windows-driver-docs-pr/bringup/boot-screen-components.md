---
title: ブート画面のコンポーネント
description: ファームウェア更新プログラムの起動画面に 2 つのコンポーネントがある OEM のロゴと更新プログラムのテキスト。
ms.assetid: 7ACD6BFC-AB92-4BCC-A9E1-9574D959B577
ms.date: 10/12/2018
ms.localizationpriority: medium
ms.openlocfilehash: 02f07f71943a6ad1a5433d26da7c66b01be0f8e8
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63328106"
---
# <a name="boot-screen-components"></a>ブート画面のコンポーネント

ファームウェア更新プログラムの起動画面に 2 つのコンポーネントがあります: OEM のロゴと更新プログラムのテキスト。 このトピックでは、これらのコンポーネントのそれぞれを構成する方法に関するガイダンスを提供し、これらのコンポーネントがファームウェアの更新プログラムのファームウェアに渡される方法に関する情報をカプセルします。

## <a name="oem-logo"></a>OEM のロゴ

ファームウェアの更新プログラムの起動画面で OEM のロゴは、通常のブート プロセス中に表示される同じロゴをする必要があります。 ファームウェア更新プログラムの起動画面ロゴが同じサイズ、位置およびが通常のブート プロセス中に表示されている必要な品質である必要があります。

### <a name="oem-logo-file"></a>OEM ロゴのファイル

お客様は、実践的な画面を表示、前に起動画面で、OEM のロゴが表示されます。 

OEM のロゴが OOBE を任意の画面に表示されないと、OOBE 後に表示、**コントロール パネルの ** **パフォーマンスの情報とツール**します。 表示されません、**設定**アプリ。

POST (Power-on 自己テスト) およびオペレーティング システムの起動時間は、するために使用するよりも高速です。 適切なブランド化の時点を確認するには、OEM のロゴは、オペレーティング システムの起動と POST の両方で表示されます。 この方法で OEM のロゴがすぐに認識できる、適切に維持および高速で信頼性の高いエクスペリエンスを関連付けします。

さらに、OEM のロゴをブランド化要素として表示、**コントロール パネルの **アプリで、**パフォーマンスの情報とツール**します。 表示されません、**設定**アプリ。

#### <a name="create-the-logo"></a>ロゴを作成します。

ロゴを追加するは、クリーン、鮮明なおよび内だけでなく、そのエッジに鋭いするように、Windows を実行しているが新しい Pc を最初のビジュアルが検出と、顧客に表示されます。

起動画面の背景が黒では常に、これが黒の背景にきれいに表示されるロゴを使用します。 ロゴは、背景を黒に true をロゴの背景を黒に終了し、画面の背景を黒に開始顕著な違いはありませんので必要もあります。 透過性はサポートされていません。 黒の背景には、両方の最初のレンダリング ロゴおよびブート UEFI グラフィックス出力プロトコル (GOP) からオペレーティング システムのネイティブ ビデオ ドライバーへの移行の最後にフェードアウトに対するシステムのパフォーマンスが最適化されます。 Windows の他の領域もロゴを使用します。セットアップ、Push-Button リセット (PBR)、セキュア ブートの修復、および黒の背景を使用して、これらはすべて、スタートアップ修復ツール。 これらのエクスペリエンスは、ブート グラフィックス リソース テーブル (BGRT) から同じロゴを使用します。

#### <a name="position-the-logo-during-post"></a>POST 中に、ロゴの位置

ファームウェアでは、投稿に、OEM のロゴを描画し、ロゴを事前に定義された位置に配置します。 Windows のスタートアップの開始時に、ロゴは、ビデオのバッファーに保持されます。 デスクトップでは、その EDID (拡張 Display Identification Data) を参照して、パネルのネイティブの解像度を検出できます。

シーケンス全体で正しく表示されるロゴをするためには、POST は、デバイスのネイティブの解像度に存在する必要があります。 これにより、ロゴが、サイズ、形状、および、必要な場所であること、Windows が必要です。

ロゴは、PC のブランドを紹介する特定の位置に画面に表示する必要があります。 ロゴが画面の上端から 38.2% では、その中心に配置されことをお勧めします。 この配置では、ゴールデン比率のビジュアルの外観に基づいており、Windows 10 のデザインの縦横比と一致します。 Windows 10 を実行しているすべての Pc 間で一貫性のあるこの配置により、により、Windows の進行状況リングを正しい場所に配置し、ロゴとリングが視覚的に分散されたことを確認します。

さらにサポートするこの visual のバランスをお勧め、画面の高さと幅の 40% にロゴのサイズを制限することです。 これにより、その Windows がブートの最後にロゴをフェードアウトできます正しくを正しく画面が表示されます。 画面の上部から 18.2% 以内でロゴの最大領域を開始することをお勧めします。

これらの設計原則は、縦と横の両方のデバイスに適用されます。

#### <a name="add-the-logo-to-the-bgrt"></a>ロゴを BGRT に追加します。

POST 中に、ロゴを正しく配置だけでなくロゴ ブート グラフィックス リソース テーブル (BGRT) 内での格納もできます。 BGRT を使用してリソースを記述する Windows の新しいオブジェクトを動的に定義して画面上の場所。 EfiBootServicesData にロゴを格納し、BGRT 経由で公開します。 BGRT インターフェイスには、24 ビット ビットマップ 0xRRGGBB、ピクセル形式または 'rr' は予約されています 0xrrRRGGBB のピクセル形式の 32 ビット ビットマップとしてこのロゴがサポートしています。 これは、Windows がロゴへのアクセスに使用する標準インターフェイスです。

2 つの重要な BGRT フィールドは"イメージ オフセット X"と"イメージ オフセット Y"です。 これらは、(x, y) ロゴの左上隅の値が画面上の配置。 これらの値を設定する場合は、ロゴの位置を使用しないか、境界ボックス、または Windows の左上隅をセットアップ、スタートアップ修復、Push-Button リセット、またはその他のエクスペリエンスのロゴは、適切に配置しないことを確認します。

埋め込みリソースのロゴを最小化を適切な中央揃え必要なもののみを使用する必要があります。 最小限のパディングを使用して、ファームウェアの領域を節約し、Windows BGRT ベース ロゴを正しく調整することができます。 

> [!NOTE]
> OEM のロゴは、oobe 画面には表示されません。

追加の詳細について、BGRT では、5.2.22」セクションを参照してください、 [Advanced Configuration and Power Interface (ACPI) 仕様](https://www.uefi.org/specifications)します。

## <a name="update-text"></a>テキストを更新します。

ファームウェアの更新プログラムの起動画面の更新プログラムのテキストは、迅速に読み取る対応に設計された、わかりやすくするには単純な文字列です。 Windows ブート ローダーによって描画されるテキスト。 1 回、ファームウェアの更新は保留し、ブートローダーが Windows のロケールを決定し、画面にローカライズされたテキストを表示決定します。

UpdateCapsule への呼び出し中には、ブートローダーがすべてのファームウェア更新カプセルを渡します。 さらに、Microsoft が定義した渡すはも*ファームウェア更新表示*capsule 表示されるテキストのビットマップと、画面のビットマップの場所を含むです。 システム ファームウェアの UpdateCapsule メソッドは、いつでも画面をクリアまたは変更、ビットマップ、画面の再表示できるように、ターミネータを保持する必要があります。

![ファームウェア更新ブート画面のコンポーネント](images/firmwareupdatebootscreencomponents.png)

## <a name="windows-firmware-update-display-capsule"></a>Windows のファームウェア更新表示 capsule

Windows ブート ローダーは、システム ファームウェアの UpdateCapsule メソッドを呼び出した、ときにすべてのファームウェア更新カプセルを渡します。 さらに Windows UX capsule で渡されます。 この capsule にはレンダリングされると、画面に表示する必要がありますが、ローカライズされたテキストのビットマップが含まれます。 次の GUID がこのカプセルを識別するために使用される: {3b8c8162-188c-46a4-aec9-be43f1d65697}。

UX capsule がカプセルの配列に表示される順序の保証はありません。 UX capsule を検索する特定のインデックス位置に依存しないでください。 ベスト プラクティスには、UX capsule を検索、配列内の残りのファームウェア カプセルを処理する前に処理する、配列のスキャンが含まれています。

場所があるいくつかのシナリオがあることを確認することが重要 UX capsule はありません。 たとえば、されません UX capsule ヘッドレス サーバー ディスプレイ アダプターがない場合。 このような場合は、ファームウェア UpdateCapsule 呼び出しが UX capsule 要件を無視できます。 ただし UX Capsule が存在する場合、UpdateCapsule する必要があります処理このセクションで説明されているプロセスに従ってします。

次の表では、ヘッダー、UX capsule を表示するファームウェアの更新について説明します。

| フィールド | バイトの長さ | バイト オフセット | 説明 
|---|---|---|---|
| CapsuleGuid      | 16 | 0 | ファームウェア\_UPDATE\_表示\_CAPSULE |
| HeaderSize       | 4  | 16 | sizeof (EFI\_CAPSULE\_ヘッダー) |
| フラグ            | 4           | 20          | CAPSULE\_フラグ\_PERSIST\_ACROSS\_リセット |
| CapsuleImageSize | 4           | 24          | ファームウェアの更新プログラムの長さを示す 4 バイト符号なし整数では、カプセルを表示します。 ヘッダーと、表示されるイメージを含む capsule、サイズが含まれます。 |

次の表では、ファームウェア更新プログラムの表示の capsule ペイロードについて説明します。

<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th>フィールド</th>
<th>バイトの長さ</th>
<th>バイト オフセット</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>バージョン</td>
<td>1</td>
<td>28</td>
<td>表示 capsule のリビジョンの実装を識別します。 このフィールドは、1 に設定されます。</td>
</tr>
<tr class="even">
<td>チェックサム</td>
<td>1</td>
<td>29</td>
<td>単純な検証を有効にするチェックサムが含まれます。 全体の capsule (ヘッダーとペイロード) の合計は、表示されるイメージを含む、0 と等しく必要があります。 合計が 0 と等しくありません、ターミネータは無視されます。</td>
</tr>
<tr class="odd">
<td>イメージの種類</td>
<td>1</td>
<td>30</td>
<td>埋め込み画像の書式を指定します。
<ul>
<li>0:ビットマップ</li>
<li>1-255:将来使用するために予約されています。</li>
</ul></td>
</tr>
<tr class="even">
<td>予約済み</td>
<td>1</td>
<td>31</td>
<td>将来使用するために予約されています。 0 にする必要があります。</td>
</tr>
<tr class="odd">
<td>Mode</td>
<td>4</td>
<td>32</td>
<td>モードを指定します、グラフィック出力プロトコル ビデオの埋め込み画像を表示できます。 ビデオ モードでは、UpdateCapsule を呼び出す前にクエリを実行し、ブート ローダーによって埋め込み画像が表示されるときに、現在のビデオ モードとローカルのディスプレイのビデオ モードをについて説明します。 イメージが表示されるときに、モード、EFI_GRAPHICS_OUTPUT_PROTOCOL_MODE 構造体のフィールドを値します。</td>
</tr>
<tr class="even">
<td>イメージ オフセット X</td>
<td>4</td>
<td>36</td>
<td>4 バイト (32 ビット) 符号なし long ビットマップ イメージの X オフセットを記述します。 (X, Y) は、イメージの左上隅のオフセットを表示します。 ディスプレイ画面の左上隅では、オフセット位置 (0, 0) にします。</td>
</tr>
<tr class="odd">
<td>イメージ オフセット Y</td>
<td>4</td>
<td>40</td>
<td><p>4 バイト (32 ビット) 符号なし long ビットマップ イメージの Y オフセットを記述します。 (X, Y) は、イメージの左上隅のオフセットを表示します。 ディスプレイ画面の左上隅では、オフセット位置 (0, 0) にします。</p>
<img src="images/imageoffsetrelativetodisplay.png" alt="Image offset value relative to display" /></td>
</tr>
<tr class="even">
<td>イメージ</td>
<td>なし</td>
<td>44</td>
<td>バイト配列、ファームウェア更新プロセス中に表示する埋め込みビットマップが含まれています。 ビットマップは、24 ビット ビットマップ ピクセル形式の 0xRRGGBB をまたは 32 ビット ビットマップ ピクセル形式 0xrrRRGGBB を 'rr' は予約されていますを指定できます。</td>
</tr>
</tbody>
</table>

あるファームウェアの更新プログラムのペイロードに対して生成された capsule とは異なり表示 capsule ペイロードが埋め込まれていませんページ揃えに注意してください。 Capsule のヘッダーの直後に表示ペイロード。

ファームウェアの更新プログラムの表示 capsule では、ファームウェアの更新プログラムの期間内に表示する必要がありますグラフィックについて説明します。 グラフィックが最初にレンダリングされると、Windows によって表示され、ファームウェア更新 payload(s) を格納している同じ UpdateCapsule 呼び出しの一部として、ファームウェアに渡されます。 ファームウェアでは、システムまたはビデオ デバイスをリセット、ファームウェアは表示 capsule で提供されるビットマップを再表示する必要があります。 場合は、リセット物理メモリは保持されません、ファームウェア、ビットマップをリセットした後、ビットマップを再表示する永続的なストレージに保存する必要があります。 保存し、リセットの間で、ビットマップを復元する方法の詳細については、実装固有をこのホワイト ペーパーでは説明しません。

ファームウェアの更新プログラムの表示 capsule から、ブート グラフィックス リソース テーブル (BGRT) ACPI 5.0 で定義されているがモデル化されます。 BGRT システム ファームウェア、OS ブート ローダーにグラフィックを提供するためのメカニズムを定義します。 2 つのテーブルと似ていますが、いくつかの注目すべき違いがあります。

| BGRT | ファームウェア更新表示 capsule | Reason |
|---|---|---|
| ビットマップへのポインター | ビットマップを埋め込むには、ターミネータに保存し、1 回の操作で復元が使用できます。 | 0 |
| ビデオ モードが含まれていません。 | ビデオ モードが含まれています | 完了すると、UpdateCapsule 呼び出し中にビデオ モードのクエリにファームウェアを要求しないでください。 |
| 状態フィールドを含める | 状態フィールドが含まれていません。 | BGRT のステータス フィールドでは、画面にイメージが現在表示されているかどうかについて説明します。 これは、ファームウェアの更新プログラムの表示 capsule に適用されません。 |

## <a name="related-topics"></a>関連トピック

[ユーザーは、UEFI ファームウェアの更新プログラムをエクスペリエンスします。](user-experience-for-uefi-firmware-updates.md)  
