---
title: Windows 10 Mobile 用のブート環境でのバッテリー充電
description: Windows 10 Mobile 用のブート環境でのバッテリー充電
ms.assetid: 5aa1ef68-6939-4896-aabd-d499ba23f89f
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 21508f751ebaf0a5ffb5e90fbb49609e436dd505
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63328148"
---
# <a name="battery-charging-in-the-boot-environment-for-windows-10-mobile"></a>Windows 10 Mobile 用のブート環境でのバッテリー充電

Windows 10 Mobile を実行しているデバイス場合は、には Oem は、SoC 仕入先から受信する BSP には SoC ベンダーのハードウェア向けに設計されている UEFI バッテリの充電ドライバーが含まれます。 Oem は、通常、ハードウェアに合わせてカスタマイズするには、このドライバーを変更します。

このドライバーは、Microsoft ドライバーの実装によって提供されるドライバーを充電 UEFI バッテリを使用する設計されている場合、 [UEFI バッテリの充電プロトコル](uefi-battery-charging-protocol.md)、Microsoft UEFI バッテリが充電アプリケーションと通信し、このプロトコルを使用してドライバー。

また、Oem は、独自 UEFI バッテリ充電中のアプリケーション、Microsoft アプリケーションの代わりに使用されるを必要に応じて実装可能性があります。 このシナリオで UEFI バッテリが充電ドライバーを実装する必要がありますいない、 [UEFI バッテリの充電プロトコル](uefi-battery-charging-protocol.md)します。 Windows ブート マネージャーでは、ドライバーは、このプロトコルを実装している場合は、アプリケーションを課金 Microsoft UEFI バッテリを読み込みます。

**注**  このトピックの情報のほとんどは Microsoft によって提供されるアプリケーションを課金 UEFI バッテリを使用するデバイスに適用されます。 用語*UEFI バッテリの充電アプリケーション*このトピックでは、UEFI のバッテリ充電 mobilestartup.efi によって読み込まれるライブラリを指します。 Mobilestartup.efi の詳細については、次を参照してください。[ブートおよび UEFI](boot-and-uefi.md)します。

## <a name="understanding-the-boot-battery-charging-process-provided-by-microsoft"></a>ブート バッテリが充電 Microsoft によって提供されるプロセスを理解します。

次の手順では、Microsoft から提供されたアプリケーションを課金 UEFI バッテリを使用するデバイスがブート フロー中に課金プロセスについて説明します。

1. 電源に接続されている、または電源ボタンを押してのユーザーのデバイスの電源をします。

2. SoC 固有のファームウェア ブート ローダーを実行し、次の操作のいずれかを実行します。

    - ブート ローダーが接続されている電源を検出し、バッテリがデバイスでは、デバイスが少量のバッテリの充電が開始し、UEFI 環境にブート マネージャーの起動が続行されます。

    - ブート ローダーに電源が検出されない、UEFI 環境を起動するには、バッテリが小さすぎる場合は、デバイスがシャット ダウンします。

    - ブート ローダーが接続されている電源を検出したデバイスにバッテリがない場合、デバイスでは、UEFI バッテリの充電中のアプリケーションに UEFI 環境で起動が続行されます。 アプリケーションは、バッテリの充電を試みると、UEFI のバッテリ充電ドライバーは、バッテリが検出されないことを示すためにアプリケーションにエラーを返します。 アプリケーションでは、UI エラーを表示して、デバイスをシャット ダウンしてこのエラーを処理します。 詳細については、次を参照してください。 [UEFI バッテリが充電 Microsoft から提供されたアプリケーションのアーキテクチャ](architecture-of-the-uefi-battery-charging-application.md)します。

3. ブート マネージャーでは、バッテリの充電アプリケーションを実行します。

    - デバイスが接続されている電源を検出した場合、デバイスはバッテリの充電モードになります。 バッテリの充電アプリケーションは、UEFI バッテリを充電ドライバーとバッテリの充電を UEFI USBFn ドライバーとインターフェイスします。 詳細については、次を参照してください。 [UEFI バッテリの充電プロトコル](uefi-battery-charging-protocol.md)します。

    - 場合は、デバイスに接続されている電源が検出されないと、メインの OS を起動するには、バッテリが小さすぎる場合、デバイスがシャット ダウンします。

4. OEM カスタマイズのレジストリ値の値に応じてデバイスが、しきい値に達したかを行う前に、電源ボタンを保持するためにユーザーを待機した後、アプリケーションを充電中か、バッテリはブート プロセスを続行します。

次の図はこのブート バッテリを充電プロセスと関連するコンポーネント。 この図は、バッテリの充電プロセスに注目する多くの UEFI コンポーネントを意図的に省略されます。UEFI ブート プロセスのより包括的なビューは、次を参照してください。[ブートおよび UEFI](boot-and-uefi.md)します。

![起動前のバッテリの充電フロー](images/oem-preboot-battery-flow.png)

## <a name="charging-states-supported-by-the-microsoft-provided-battery-charging-application"></a>充電、Microsoft から提供されたバッテリの充電アプリケーションによってサポートされている状態

ブート バッテリの充電中のプロセスでは、UEFI バッテリの充電中のアプリケーションに達すると、デバイスは、構成方法によって異なるいくつかの状態を入力できます。 これらの状態が呼び出される*しきい値充電*と*電源オフ充電*します。

### <a name="threshold-charging"></a>充電しきい値

次の図は、既定のブート バッテリ充電プロセスを示します。 デバイスが起動をメインの OS に、バッテリが、特定のしきい値と呼ばれるに達するとすぐにこのプロセスで、*メイン OS しきい値ブート*します。 これとバッテリの充電プロセスの一部として定義されているその他のしきい値の詳細については、次を参照してください。[バッテリの充電しきい値](#battery-charging-thresholds)します。

![バッテリのフローの充電しきい値をプレブートします。](images/oem-preboot-battery-flow-threshold-charging.png)

次の手順では、この充電中のプロセスに対応する UI フローを説明します。

1. バッテリが満たすために十分な料金を持たないかどうか、*メイン OS をブート*しきい値を 10 秒間は、次のバッテリ UI 画面交互デバイス。 ユーザーは、この 10 の 2 番目の間隔内で [電源] ボタンを押すと、さらに 10 秒間の UI 画面次バッテリの間で交互にする、デバイスが続行されます。

    ![ブートしきい値の前に、バッテリ画面](images/oem-battery-charge-ui-empty-red.png)![ブートしきい値の前に、バッテリ画面](images/oem-battery-charge-ui-plug-red.png)

2. デバイスが 10 秒間アイドル状態である場合、デバイスがディスプレイをオフにします。

    ![黒のバッテリ画面](images/oem-battery-charge-ui-black.png)

3. デバイスに到達した後、*メイン OS をブート*しきい値では、デバイスが表示されます、OEM のブート ロゴおよびメインの OS をブートします。 次のスクリーン ショットでは、例 OEM ブート ロゴについて説明します。

    ![バッテリ画面 oem ロゴ](images/oem-battery-charge-ui-oem-logo.png)

### <a name="power-off-charging"></a>電源オフ充電中

Windows 10 には、ユーザーの視点からオフにする、デバイスが表示されますが、バッテリを充電する機能がサポートされています。 この機能は呼*電源オフ充電*します。 このドキュメントの今後のリリースでは、この機能を有効にする方法に関する情報が行われます。

> [!IMPORTANT]
> デバイス イメージの生成時に、電源オフ充電を構成のみできます。 Windows 10 の OS では、ユーザーが有効にまたは充電電源オフを無効にする方法は提供されません。

デバイスがバッテリの充電アプリケーションの制御下では電源オフ充電が有効になっている場合は、後も、*メイン OS をブート*しきい値に達しています。 ユーザーを保持電源ボタンを 2 秒以上、メインの OS にデバイスを起動するまでこの状態のデバイスに残ります。

でも電源オフ充電が有効な場合、ユーザーは常に経由しない電源オフ充電パス。 デバイスが再起動する場合 (などにより、更新、またはシステムの言語設定が変更されたため) で実行され、電源に接続されている、デバイスにスキップする電源オフ課金モードと直接ブート メイン OS ブート前の充電しきい値後達した。 電源オフ課金モードのダウン、電源ボタンがオンの状態、デバイスの再起動をユーザーが保持している場合はスキップし、電源に接続されているもされます。

次の図は、ブート バッテリの充電中電源オフが有効にすると、プロセスを充電を示します。

![電源オフ充電のバッテリのフローをプレブートします。](images/oem-preboot-battery-flow-power-off-charging.png)

次の手順は、電源オフ充電が有効になっている、対応する UI フローを説明します。

1. バッテリが満たすために十分な料金を持たないかどうか、*メイン OS をブート*しきい値を 10 秒間は、次の赤のバッテリ UI 画面交互デバイス。 ユーザーは、この 10 の 2 番目の間隔内で [電源] ボタンを押すと、さらに 10 秒間の UI 画面次バッテリの間で交互にする、デバイスが続行されます。

    ![ブートしきい値の前に、バッテリ画面](images/oem-battery-charge-ui-empty-red.png)![ブートしきい値の前に、バッテリ画面](images/oem-battery-charge-ui-plug-red.png)

2. デバイスが 10 秒間アイドル状態である場合、デバイスがディスプレイをオフにします。

    ![黒のバッテリ画面](images/oem-battery-charge-ui-black.png)

3. デバイスに到達した後、*メイン OS をブート*しきい値、メインの OS が直接起動するのではなく、10 秒間の次の白いバッテリ UI 画面交互デバイス。 ユーザーは、短い duraction (2 秒未満) の電源ボタンを押すと、この 10 の 2 番目の間隔内をさらに 10 秒間の次のバッテリの間で UI 画面を交互に、デバイスが続行されます。

    ![ブートしきい値後バッテリ画面](images/oem-battery-charge-ui-empty-white.png)![ブートしきい値は、バッテリ画面が表示されます。](images/oem-battery-charge-ui-plug-white.png)

4. デバイスが 10 秒間アイドル状態である場合、デバイスがディスプレイをオフにします。

    ![黒のバッテリ画面](images/oem-battery-charge-ui-black.png)

5. ユーザーは、2 秒以上、電源ボタンを押すと、デバイスは OEM ブート ロゴが表示し、メインの OS が起動されます。 次のスクリーン ショットでは、例 OEM ブート ロゴについて説明します。

    ![バッテリ画面 oem ロゴ](images/oem-battery-charge-ui-oem-logo.png)

## <a name="battery-charging-thresholds"></a>バッテリの充電しきい値

Microsoft では、いくつかのバッテリが充電しきい値を適切なバッテリの充電ユーザー エクスペリエンスを確認しますを定義します。 これらのしきい値の一部は、OEM が適切なバッテリの充電の動作を確認しますで実装する必要があります。 次の図は、課金のしきい値をまとめる方法を示します (この図の描画されていないスケールする)。

![バッテリの充電しきい値をプレブートします。](images/oem-preboot-battery-charging-thresholds.png)

図の左側にあるは、デバイスが充電中、ときに、ユーザー エクスペリエンスに影響を与えるすべてのしきい値を示し、図の右側にある場合、デバイスは放電してユーザー エクスペリエンスに影響を与えるすべてのしきい値を示しています。 次の表では、それぞれのしきい値について説明します。

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>しきい値</th>
<th>説明</th>
<th>構成ガイド</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>ファームウェアの充電しきい値</p></td>
<td><p>これは、位置、デバイスがハードウェア ベースのファームウェアに基づく課金充電から起動しきい値です。 課金およびファームウェアを起動するには小さすぎる場合、バッテリの保護にハードウェア充電フェーズでは、デバイスを保持する必要があります。</p></td>
<td><p>Oem がこのしきい値よりも少なくなるを設定する必要があります、<em>ブート UEFI しきい値</em>します。 このしきい値を変更する方法の詳細については、SoC ベンダーにお問い合わせください。</p></td>
</tr>
<tr class="even">
<td><p>しきい値の UEFI ブートします。</p></td>
<td><p>これは、位置、デバイスが充電 (UEFI) ベースの充電がファームウェア ベースから起動しきい値 (これは Microsoft によって提供されます)。 ファームウェアを起動するには小さすぎる場合は、バッテリを充電するファームウェア充電中のフェーズでは、デバイスを保持する必要があります。</p></td>
<td><p>Oem はこのしきい値よりも高く設定する必要があります、<em>充電しきい値ファームウェア</em>、それよりも小さい、<em>メイン OS をブート</em>しきい値。 このしきい値を変更する方法の詳細については、SoC ベンダーにお問い合わせください。</p></td>
</tr>
<tr class="odd">
<td><p>メインの OS のしきい値起動します。</p></td>
<td><p>これは、デバイスが充電 (UEFI) ベースのメインの OS がから起動されるしきい値<em>モードの充電しきい値</em>します。 メイン OS を起動するには低すぎると、バッテリを充電する UEFI フェーズの充電でデバイスを保持する必要があります。</p></td>
<td><p>Oem はこのしきい値よりも高く設定する必要があります、<em>ブート UEFI しきい値</em>と<em>しきい値をメインの OS がシャット ダウン</em>します。 このしきい値は、バッテリの完全な容量の割合で定義されます。 既定では、この値は 7% に設定します。 このドキュメントの今後のリリースでは、このしきい値を設定する方法についての情報が行われます。</p></td>
</tr>
<tr class="even">
<td><p>OS とデバイスの更新プログラムを起動しきい値をリセットします。</p></td>
<td><p>これにより、位置、デバイスが Update OS に充電 (UEFI) ベースから起動しきい値は、またはデバイス モード設定にリセットします。 更新プログラムまたはデバイスのリセットのプロセスを維持するためには小さすぎる場合は、バッテリを充電するフェーズを充電 UEFI でデバイスを保持する必要があります。</p></td>
<td><p>このしきい値に設定されて、<em>メイン OS しきい値ブート</em> + 8% です。</p></td>
</tr>
<tr class="odd">
<td><p>完全なバッテリ</p></td>
<td><p>これは、位置、バッテリは完全な容量の 100% のしきい値です。 このしきい値では、システム トレイのバッテリ アイコンには、完全なバッテリ アイコンが表示されます。</p></td>
<td><p>デバイスは、バッテリ容量をヒット常にできるように、Oem は、バッテリのプロファイルを調整する必要があります。</p></td>
</tr>
<tr class="even">
<td><p>バッテリー セーバーしきい値</p></td>
<td><p>これは、どのバッテリでスクリーン セーバーが自動的に有効に、ユーザーにバッテリー セーバーが設定されている場合、しきい値です。</p></td>
<td><p>このしきい値は、バッテリの完全な容量の 20% に設定されてし、これは、OEM によって変更できません。</p></td>
</tr>
<tr class="odd">
<td><p>メインの OS の警告のしきい値</p></td>
<td><p>これは、しきい値をデバイスには、バッテリが不足しているユーザーに通知が表示されます。</p></td>
<td><p>このしきい値は、バッテリの完全な容量の 10% に設定されてし、これは、OEM によって変更できません。</p></td>
</tr>
<tr class="even">
<td><p>しきい値をメインの OS がシャット ダウン</p></td>
<td><p>これは、位置、ソフトウェアに安全にシャット ダウン デバイス オフしきい値です。 システム メモリの破損を回避することが必要です。</p></td>
<td><p>OEM がこのしきい値よりも少なくなるを設定する必要があります、<em>メイン OS しきい値にブート</em>よりも小さい、<em>メイン OS 警告しきい値</em>します。 さらに、このしきい値は、2% 以上にある必要があります。 このしきい値は、 <strong>DefaultAlert1</strong>のメンバー、 <a href="https://msdn.microsoft.com/library/windows/desktop/aa372661.aspx" data-raw-source="[BATTERY_INFORMATION](https://msdn.microsoft.com/library/windows/desktop/aa372661.aspx)">BATTERY_INFORMATION</a>構造体。 このしきい値を変更する方法の詳細については、SoC ベンダーにお問い合わせください。</p></td>
</tr>
<tr class="odd">
<td><p>ハードウェアのしきい値をシャット ダウン</p></td>
<td><p>これは、位置、ハードウェア、デバイスの強制の電源オフしきい値です。 値が低すぎる放電中から、バッテリを保護するために必要になります。</p></td>
<td><p>このしきい値は、SoC ベンダーによって設定され、OEM によっては変更しないでください。</p></td>
</tr>
</tbody>
</table>

## <a name="related-topics"></a>関連トピック

[UEFI バッテリが充電 Microsoft から提供されたアプリケーションのアーキテクチャ](architecture-of-the-uefi-battery-charging-application.md)  
[ブートおよび UEFI](boot-and-uefi.md)  
