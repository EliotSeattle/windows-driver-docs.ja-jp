---
title: bp、bu、bm (ブレークポイントの設定)
description: Bp、bu、bm コマンドでは、1 つまたは複数のソフトウェアのブレークポイントを設定します。 場所、条件、およびさまざまな種類のソフトウェアのブレークポイントを設定するオプションを組み合わせることができます。
ms.assetid: 77d095fe-06d1-4842-ad49-8420ab4d5d72
keywords:
- bp、bu、bm (ブレークポイントの設定) の Windows デバッグ
ms.date: 05/28/2019
topic_type:
- apiref
api_name:
- bp, bu, bm (Set Breakpoint)
api_type:
- NA
ms.localizationpriority: medium
ms.openlocfilehash: e65f7a39b444c6c0c1a73ad7acd5b4d889fc39ee
ms.sourcegitcommit: e123b8b69473c0ebc0383ef722452866bf6662d3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/30/2019
ms.locfileid: "66394276"
---
# <a name="bp-bu-bm-set-breakpoint"></a>bp、bu、bm (ブレークポイントの設定)


**Bp**、 **bu**、および**bm**コマンドは、1 つまたは複数のソフトウェアのブレークポイントを設定します。 場所、条件、およびさまざまな種類のソフトウェアのブレークポイントを設定するオプションを組み合わせることができます。

ユーザー モード

```dbgcmd
[~Thread] bp[ID] [Options] [Address [Passes]] ["CommandString"] 
[~Thread] bu[ID] [Options] [Address [Passes]] ["CommandString"] 
[~Thread] bm [Options] SymbolPattern [Passes] ["CommandString"]
```

カーネル モード

```dbgcmd
bp[ID] [Options] [Address [Passes]] ["CommandString"] 
bu[ID] [Options] [Address [Passes]] ["CommandString"] 
bm [Options] SymbolPattern [Passes] ["CommandString"]
```

## <a name="span-idddkcmdsetbreakpointdbgspanspan-idddkcmdsetbreakpointdbgspanparameters"></a><span id="ddk_cmd_set_breakpoint_dbg"></span><span id="DDK_CMD_SET_BREAKPOINT_DBG"></span>パラメーター


<span id="_______Thread______"></span><span id="_______thread______"></span><span id="_______THREAD______"></span> *スレッド*   
ブレークポイントが適用されるスレッドを指定します。 構文の詳細については、次を参照してください。[スレッド構文](thread-syntax.md)します。 スレッドは、ユーザー モードでのみ指定できます。 スレッドを指定しない場合は、すべてのスレッドにブレークポイントが適用されます。

<span id="_______ID______"></span><span id="_______id______"></span> *ID*   
ブレークポイントを識別するための 10 進数を指定します。

デバッガーが割り当てられる、 *ID*ときに、ブレークポイントを作成しますを使用して変更することができます、 [ **br (ブレークポイント番号)** ](br--breakpoint-renumber-.md)コマンド。 使用することができます、 *ID*を後のデバッガー コマンド内のブレークポイントを参照してください。 表示する、 *ID* 、ブレークポイントの使用、 [ **bl (ブレークポイントの一覧)** ](bl--breakpoint-list-.md)コマンド。

使用すると*ID*でコマンドを入力しないで、コマンドの間にスペース (**bp**または**bu**) と ID 番号。

*ID*パラメーターは省略可能な常にします。 指定しない場合*ID*デバッガーは、最初のブレークポイントの使用可能な数値を使用します。 カーネル モードでは、32 個のブレークポイントを設定することができます。 ユーザー モードでは、任意の数のブレークポイントを設定できます。 どちらの場合の値に制限はありません、 *ID*数。 囲んだ場合*ID*角かっこで囲んで ( **\[\]** )、 *ID*任意の式を含めることができます。 構文の詳細については、次を参照してください。[数値式の構文](numerical-expression-syntax.md)します。

<span id="_______Options______"></span><span id="_______options______"></span><span id="_______OPTIONS______"></span> *オプション*   
ブレークポイントのオプションを指定します。 とおりを除く任意の数の次のオプションを指定できます。

<span id="_1"></span> **/1**  
「ワンショット」のブレークポイントを作成します。 このブレークポイントがトリガーされた後、ブレークポイントの一覧から削除されます。

<span id="_f_PredNum"></span><span id="_f_prednum"></span><span id="_F_PREDNUM"></span> **/f** *PredNum*  
(Itanium ベースのみ、ユーザー モードのみ)述語の数を指定します。 ブレークポイントは、対応する述語レジスタで実行されます。 (たとえば、 **bp/f 4** *アドレス*では、実行するブレークポイントを設定、 **p4**レジスタの述語)。

<span id="_p_EProcess"></span><span id="_p_eprocess"></span><span id="_P_EPROCESS"></span> **/p** *」プロセス*  
(カーネル モードのみ)このブレークポイントに関連付けられているプロセスを指定します。 *」プロセス*」プロセスの構造、PID ではないの実際のアドレスにする必要があります。 このプロセスのコンテキストで検出された場合にのみ、ブレークポイントがトリガーされます。

<span id="_t_EThread"></span><span id="_t_ethread"></span><span id="_T_ETHREAD"></span> **/t** *EThread*  
(カーネル モードのみ)このブレークポイントに関連付けられているスレッドを指定します。 *EThread* ETHREAD 構造体、スレッド ID ではないの実際のアドレスにする必要があります これがこのスレッドのコンテキストで発生した場合にのみ、ブレークポイントがトリガーされます。 使用する場合 **/p** *」プロセス*と **/t** *EThread*、任意の順序で入力することができます。

<span id="_c_MaxCallStackDepth"></span><span id="_c_maxcallstackdepth"></span><span id="_C_MAXCALLSTACKDEPTH"></span> **/c** *MaxCallStackDepth*  
呼び出しスタックの深さが場合にのみ、ブレークポイントがアクティブにより小さい*MaxCallStackDepth*します。 このオプションと共には使用できません **/C**します。

<span id="_C_MinCallStackDepth"></span><span id="_c_mincallstackdepth"></span><span id="_C_MINCALLSTACKDEPTH"></span> **/C** *MinCallStackDepth*  
呼び出しスタックの深さがより大きい場合にのみ、ブレークポイントがアクティブに*MinCallStackDepth*します。 このオプションと共には使用できません **/c**します。

<span id="_a"></span><span id="_A"></span> **/a**  
(の**bm**のみ) がデータ領域またはコードの領域であるかどうか、指定された場所のすべてのブレークポイントを設定します。 プログラムの障害はデータのブレークポイントが原因で発生するため、安全で認識されている場所でのみこのオプションを使用します。

<span id="_d"></span><span id="_D"></span> **/d**  
(の**bm**のみ)、ブレークポイントの位置をアドレスに変換します。 そのため、コードが移動された場合、ブレークポイントのままに従って設定されているのではなく、同じアドレス*SymbolPattern*します。 使用 **/d**モジュールがロードまたはアンロードされたときに、ブレークポイントに変更を再評価を回避するためにします。

<span id="__"></span> **/(**  
(の**bm**のみ) が含まれますパラメーター一覧については、記号の文字列を*SymbolString*を定義します。

この機能では、名前が異なるパラメーター リストが異なるオーバー ロードされた関数にブレークポイントを設定することができます。 たとえば、bm/(myFunc 両方にブレークポイントを設定する**myFunc(int a)** と**myFunc(char a)** します。 なし"/("、ブレークポイントが設定されている**myFunc**が示されませんので失敗**myFunc**関数のブレークポイントが対象としています。

<span id="_______dxObjectExpression______"></span><span id="_______dxObjectExpression______"></span><span id="_______DXOBJECTEXPRESSION______"></span> **/w dx オブジェクト式**dx オブジェクト式によって返されるブール値に基づく条件付きブレークポイントを設定します。 引数が true に評価されるデータ モデル (dx) 式 (– 条件に一致する中断) または false (– 条件と一致しませんは中断されません)。

この例では、[localvariable] の値に基づく条件付きブレークポイントを設定します。

```dbgcmd
bp /w "localVariable == 4" mymodule!myfunction
```

この例では、JavaScript を使用してブレークポイントを設定する方法を示します。

```dbgcmd
bp /w "@$scriptContents.myFunc(localVariable)" @rip
```

デバッガー オブジェクトの詳細については、次を参照してください。 [dx (表示デバッガー オブジェクト モデルの式)](dx--display-visualizer-variables-.md)します。

> [!NOTE] 
> /W オプションは、実験的なデバッガーの最新バージョンが必要です。 



<span id="_______Address______"></span><span id="_______address______"></span><span id="_______ADDRESS______"></span> *アドレス*   
ブレークポイントが設定されている命令の最初のバイトを指定します。 省略した場合*アドレス*、現在の命令ポインターを使用します。 構文の詳細については、次を参照してください。[アドレスとアドレス範囲の構文](address-and-address-range-syntax.md)します。

<span id="_______Passes______"></span><span id="_______passes______"></span><span id="_______PASSES______"></span> *パス*   
ブレークポイントがアクティブ化される実行パスの数を指定します。 指定したパスに到達するまで、デバッガーはブレークポイントの位置をスキップします。 値*パス*16 ビットまたは 32 ビット値を指定できます。

既定では、ブレークポイントがアクティブな初めてのアプリケーションがブレークポイントの位置を含むコードを実行します。 この既定のような状況の値に相当**1**の*パス*します。 アプリケーションのコードを少なくとも 1 回実行した後にのみ、ブレークポイントを有効にするには、値を入力します。 **2**以上。 たとえばの値**2** 2 回目のコードが実行される、ブレークポイントがアクティブになります。

このパラメーターは、コードを各パスでデクリメントするカウンターを作成します。 初期と現在の値を表示する、*パス*カウンターを使用して[ **bl (ブレークポイントの一覧)** ](bl--breakpoint-list-.md)します。

*パス*カウンターは、デクリメントの場合にのみアプリケーション*実行*への応答で、ブレークポイント以降を[ **g (移動)** ](g--go-.md)コマンド。 コードのステップまたはそれより前にトレースする場合は、カウンターはデクリメントされません。 ときに、*パス*カウンターに達すると**1**をクリアし、ブレークポイントをリセットすることによってのみ変更できます。

<span id="_______CommandString______"></span><span id="_______commandstring______"></span><span id="_______COMMANDSTRING______"></span> *CommandString*   
ブレークポイントがあるたびに実行されるコマンドの一覧に発生した指定した回数を指定します。 囲む必要があります、*クラスヒント*パラメーターを引用符で囲んで指定します。 セミコロンを使用して、複数のコマンドを区切ります。

デバッガーでのコマンド*クラスヒント*パラメーターを含めることができます。 標準 C コントロール文字を使用することができます (など **\\n**と **\\"** )。 引用符を 2 番目のレベルに格納されているセミコロン ( **\\"** ) 文字列を引用符で囲まれた、埋め込みの一部として解釈されます。

*クラスヒント*アプリケーションは、ブレークポイントに達した場合にのみコマンドが実行される*実行*への応答を[ **g (移動)** ](g--go-.md)コマンド。 コードのステップまたはこのポイント以降をトレースする場合は、コマンドは実行されません。

いずれかのプログラムのブレークポイントの後の実行を再開コマンド (など**g**または**t**) コマンドの一覧の実行を終了します。

<span id="_______SymbolPattern______"></span><span id="_______symbolpattern______"></span><span id="_______SYMBOLPATTERN______"></span> *SymbolPattern*   
パターンを指定します。 デバッガーは、既存のシンボルには、このパターンに一致して、パターン一致をすべてにブレークポイントを設定しようとします。 *SymbolPattern*さまざまなワイルドカード文字と指定子を含めることができます。 この構文の詳細については、次を参照してください。[文字列のワイルドカード構文](string-wildcard-syntax.md)します。 照合が大文字小文字を区別し、1 つの先頭のアンダー スコアがないため、これらの文字は、シンボルに一致するが、(\_) 任意の分量の先頭にアンダー スコアを表します。



### <a name="span-idenvironmentspanspan-idenvironmentspanspan-idenvironmentspanenvironment"></a><span id="Environment"></span><span id="environment"></span><span id="ENVIRONMENT"></span>環境

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><p><strong>モード</strong></p></td>
<td align="left"><p>ユーザー モードでは、カーネル モード</p></td>
</tr>
<tr class="even">
<td align="left"><p><strong>ターゲット</strong></p></td>
<td align="left"><p>ライブ デバッグのみ</p></td>
</tr>
<tr class="odd">
<td align="left"><p><strong>プラットフォーム</strong></p></td>
<td align="left"><p>すべての</p></td>
</tr>
</tbody>
</table>

 

### <a name="span-idadditionalinformationspanspan-idadditionalinformationspanspan-idadditionalinformationspanadditional-information"></a><span id="Additional_Information"></span><span id="additional_information"></span><span id="ADDITIONAL_INFORMATION"></span>追加情報

詳細とブレークポイント、他のブレークポイント コマンドや、ブレークポイントを制御する方法を使用する方法と、カーネル デバッガーからのユーザー領域でブレークポイントを設定する方法の例については、次を参照してください。[を使用してブレークポイント](using-breakpoints.md)します。 条件付きブレークポイントの詳細については、次を参照してください。 [、条件付きブレークポイント](setting-a-conditional-breakpoint.md)します。

<a name="remarks"></a>コメント
-------

**Bp**、 **bu**、および**bm**コマンドは、新しいブレークポイントを設定が異なる特性があります。

-   **Bp (ブレークポイントの設定)** コマンドで新しいブレークポイントを設定、*アドレス*のコマンドで指定されているブレークポイントの位置。 ブレークポイントが設定されている場合、デバッガーがブレークポイントの位置のアドレスの式を解決できない場合、 **bp**にブレークポイントを自動的に変換する**bu**ブレークポイント。 使用して、 **bp**モジュールのアクティブな場合は、不要になったブレークポイントを作成するコマンドが読み込まれていません。

-   **Bu (未解決のブレークポイントの設定)** コマンド セットを*遅延*または*未解決*ブレークポイント。 A **bu** (アドレス) ではなく、コマンドで指定され、参照を使用して、モジュールが解決されるたびにアクティブにするブレークポイントの位置への参照をシンボリックにブレークポイントを設定します。 これらのブレークポイントの詳細については、次を参照してください。[未解決ブレークポイント (bu ブレークポイント)](unresolved-breakpoints---bu-breakpoints-.md)します。

-   **Bm (シンボルのブレークポイントの設定)** コマンドでは、指定したパターンに一致するシンボルに新しいブレークポイントを設定します。 このコマンドは、1 つ以上のブレークポイントを作成できます。 既定では、パターンが一致すると後で**bm**ブレークポイントは、同じ**bu**ブレークポイント。 つまり、 **bm**ブレークポイントは、シンボル参照に設定されているブレークポイントを遅延します。 ただし、bm/d コマンドは、1 つまたは複数を作成**bp**ブレークポイント。 各ブレークポイントでは、一致した場所のアドレスに設定されており、モジュールの状態を追跡しません。

既存のブレークポイントの設定を使用してどのようなコマンドを使用しましたが不明の場合[ **.bpcmds (ブレークポイント コマンドが表示)** ](-bpcmds--display-breakpoint-commands-.md)を作成するために使用されたコマンドとすべてのブレークポイントを一覧表示します。

3 つの主な違いがある**bp**ブレークポイントと**bu**ブレークポイント。

-   A **bp**ブレークポイントの位置は、常に、アドレスに変換します。 モジュールの変更をコードを移動する場合、 **bp**ブレークポイントが設定された、同じアドレスも、ブレークポイントのままです。 一方で、 **bu**ブレークポイントままを使用したシンボリック値 (通常のシンボルとオフセット) に関連付け、そのアドレスが変更された場合でも、このシンボルの場所を追跡します。

-   場合、 **bp**ブレークポイント アドレスが、読み込まれたモジュールで検出され、そのモジュールが新しい場合は、アンロード、ブレークポイントは、ブレークポイントの一覧から削除されます。 その一方で、 **bu**繰り返しのアンロードと読み込みの後にブレークポイントを永続化します。

-   設定したブレークポイント**bp** WinDbg では保存されません[ワークスペース](using-workspaces.md)します。 設定されているブレークポイント**bu**ワークスペースに保存されます。

**Bm**シンボル パターンでブレークポイントを設定するワイルドカード文字を使用するときに便利です。 **Bm** *SymbolPattern*構文を使用すると、 [ **x SymbolPattern** ](x--examine-symbols-.md)しを使用して**bu**各結果にします。 たとえば、これらのシンボルのすべてのブレークポイントを設定する、 *Myprogram*文字列「メモリ最適化、」で始まるモジュールは、次のコマンドを使用します。

例

```dbgcmd
0:000> bm myprogram!mem* 
  4: 0040d070 MyProgram!memcpy
 5: 0040c560 MyProgram!memmove
  6: 00408960 MyProgram!memset
```

**Bm**コマンドは、ソフトウェアのブレークポイント (プロセッサ ブレークポイントではない) を設定、データの破損を回避するためにブレークポイントを設定するときのデータの場所は自動的に除外します。

使用する場合は、プログラムのアドレスではなく、データのアドレスを指定することは、 **bp**または bm/a コマンド。 ただし、場合でも、データの場所を指定すると、これらのコマンドは、ソフトウェアのブレークポイント、いないプロセッサ ブレークポイントを作成します。 実行可能コードの代わりにデータをプログラムでソフトウェア ブレークポイントを設定すると、データの破損になることができます。 したがって必要があります使用するデータの場所でこれらのコマンドの場合にのみ場所は、プログラムのデータではなく、実行可能コードとして使用することで格納されているメモリ。 それ以外の場合、使用する必要があります、 [ **ba (アクセスの切断)** ](ba--break-on-access-.md)コマンドを代わりにします。 詳細については、次を参照してください。[プロセッサ ブレークポイント (ba ブレークポイント)](processor-breakpoints---ba-breakpoints-.md)します。

など、C++ のパブリック クラスまたは含んでいる任意のテキスト文字列のメンバーは、文字を制限する場合より複雑な構文で指定された場所にブレークポイントを設定する方法の詳細を参照してください[ブレークポイント構文](breakpoint-syntax.md)します。

複数の物理行を 1 つの論理ソース行にまたがっている場合、ステートメントまたは呼び出しの最後の物理的な行でブレークポイントが設定されます。 デバッガーは、要求された位置にブレークポイントを設定することはできない場合、は、次の許可されている位置にブレークポイントを挿入します。

指定した場合*スレッド*、指定したスレッドにブレークポイントを設定します。 たとえば、  **~ \*bp**コマンドでは、すべてのスレッドにブレークポイントを設定 **~ \#bp**現在の原因になったスレッドにブレークポイントを設定例外、および **~ 123bp** 123 のスレッドにブレークポイントを設定します。 **~ Bp**と **~.bp**コマンドのブレークポイントを現在のスレッドのどちらも設定します。

カーネル モードを使用して設定したブレークポイントでマルチプロセッサ システムをデバッグする際に**bp**または[ **ba (アクセスの切断)** ](ba--break-on-access-.md)すべてのプロセッサに適用されます。 たとえば、入力すると、現在のプロセッサが 3 **bp MemoryAddress**にブレークポイントを配置する**MemoryAddress**します。 そのアドレス (プロセッサ 3 だけでなく) で実行されているすべてのプロセッサには、ブレークポイントのトラップが発生します。

**Bp**、 **bu**、および**bm**コマンドは、break 命令とプロセッサ命令を置き換えることで、ソフトウェアのブレークポイントを設定します。 読み取り専用のコードまたは変更できないコードをデバッグする ba e のコマンドを使用している**e**実行専用アクセスを表します。

過去の関数の最初の 12 バイトにブレークポイントを設定する次のコマンド**MyTest**します。 このブレークポイントは、コードの最初の 6 つのパスは無視されますが、コードの 7 番目のパスで実行が停止します。

```dbgcmd
0:000> bp MyTest+0xb 7 
```

次のコマンドのブレークポイントを設定する**RtlRaiseException**が表示されます、 **eax**登録、記号の値を表示します**MyVar**、しを続行します。

```dbgcmd
kd> bp ntdll!RtlRaiseException "r eax; dt MyVar; g"
```

次の 2 つ**bm**コマンドは、次の 3 つのブレークポイントを設定します。 表示される結果はで作成したブレークポイントを区別しないコマンドを実行する場合、 **/d**スイッチとなしで作成されたものです。 [ **.Bpcmds (ブレークポイント コマンドが表示)** ](-bpcmds--display-breakpoint-commands-.md)これら 2 つの種類を区別するために使用できます。 ブレークポイントがによって作成された場合**bm**せず、 **/d**切り替えるには、 **.bpcmds**表示、ブレークポイントの種類として**bu**、その後に評価の記号で囲まれた、 **@!""** (これは、リテラル文字いないな数値式またはレジスタを示します) トークンです。 ブレークポイントがによって作成された場合**bm**で、 **/d**切り替えるには、 **.bpcmds**としてブレークポイントの種類が表示**bp**します。

```dbgcmd
0:000> bm myprog!openf* 
  0: 00421200 @!"myprog!openFile"
  1: 00427800 @!"myprog!openFilter"

0:000> bm /d myprog!closef* 
  2: 00421600 @!"myprog!closeFile"

0:000> .bpcmds
bu0 @!"myprog!openFile";
bu1 @!"myprog!openFilter";
bp2 0x00421600 ;
```

 

 





