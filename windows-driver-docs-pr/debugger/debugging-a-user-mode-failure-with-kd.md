---
title: KD を使用したユーザーモード エラーのデバッグ
description: KD を使用したユーザーモード エラーのデバッグ
ms.assetid: c7ef3c04-45bf-4e7b-bcc6-35fe2ffa43d1
keywords:
- Kd でのユーザーモードデバッグ
ms.date: 05/23/2017
ms.localizationpriority: medium
ms.openlocfilehash: 52738f6b3c2bd3fefcbeaee7a54d1830b9b0149a
ms.sourcegitcommit: 238308264c1ee2c74ec0c8c303258dc00c79b902
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/28/2019
ms.locfileid: "70063913"
---
# <a name="debugging-a-user-mode-failure-with-kd"></a>KD を使用したユーザーモード エラーのデバッグ


## <span id="ddk_debugging_user_mode_failures_with_kd_dbg"></span><span id="DDK_DEBUGGING_USER_MODE_FAILURES_WITH_KD_DBG"></span>


ユーザーモードのエラーを適切にデバッグするには、CDB または WinDbg が必要です。 ただし、ユーザーモードの例外は、ユーザーモードのデバッガーが存在しないため、KD に分割されることがあります。 カーネルモードの問題をデバッグしているときに、特定のユーザーモードプロセスがどのような処理を行っているかを監視することが役立つ場合もあります。

既定では、カーネルデバッガーは、指定されたアドレスと一致する最初のユーザーモードシンボル ( **k**、 **u**、または**ln**コマンド) の読み込みを試みます。

残念ながら、ユーザーモードシンボルがシンボルパスに指定されていないか、最初のシンボルが正しいものではありません。 シンボルが存在しない場合は、シンボルをシンボルパスにコピーするか、 [ **. sympath (シンボルパスの設定)** ](-sympath--set-symbol-path-.md)コマンドを使用して完全なシンボルツリーをポイントした後、 [ **. reload (モジュールの再読み込み)** ](-reload--reload-module-.md)コマンドを使用します。 間違ったシンボルが読み込まれた場合は、を実行してシンボルを明示的に読み込むことができます **。 &lt;&gt;バイナリを再読み込み**します。

Windows Dll の多くは、さまざまなアドレスで読み込まれるようにリベースされていますが、例外もあります。 ビデオアダプターは、最も一般的な例外です。 すべて同じベースアドレスに読み込まれるビデオアダプターが多数あるため、KD はほとんど常に (最初のビデオシンボルである、アルファベット順に)、ati .dll を検索します。 ビデオについては、 [**lm**](lm--list-loaded-modules-.md)コマンドを使用して特定できる .sys ファイルも読み込まれています。 この情報を使用して、 **. リロード**を発行して、正しいビデオ dll を取得できます。 デバッガーが混乱し、特定のシンボルを再読み込みすると、適切なスタックが得られる場合もあります。 関数をアセンブルして、シンボルが正しく表示されるかどうかを確認します。

ビデオ Dll と同様に、ほとんどすべての実行可能ファイルは同じアドレスに読み込まれるため、KD はアクセスを報告します。 [アクセス] にスタックトレースが表示されている場合は、[**プロセス**](-process.md)を実行してから、指定した実行可能ファイルの名前を**再読み込み**します。 実行可能ファイルのシンボルパスにシンボルがない場合は、それをコピーして実行し**ます。再度読み込み**ます。

場合によっては、完全なシンボルツリーがシンボルパス内にある場合でも、KD または WinDbg で、正しいユーザーモードシンボルの読み込みに問題が発生することがあります。 この場合、必要となる最も一般的なシンボルは2つのうち、2つのうち最も一般的なシンボルです。 KD から CSRSS をデバッグする場合は、winsrv と csrsrv .dll も読み込まれる共通 Dll です。

 

 





