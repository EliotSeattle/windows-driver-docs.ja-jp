---
title: このメソッドのリモート デバッグを組み合わせる
description: このメソッドのリモート デバッグを組み合わせる
ms.assetid: 4f9a60ab-b221-4a60-b3d5-cd907e33ec19
ms.date: 11/28/2017
ms.localizationpriority: medium
ms.openlocfilehash: ba4ac0f24818d621af9580d54fff0559721fbccd
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56552221"
---
# <a name="combining-this-method-with-remote-debugging"></a>このメソッドのリモート デバッグを組み合わせる


## <span id="ddk_opening_a_crash_dump_dbg"></span><span id="DDK_OPENING_A_CRASH_DUMP_DBG"></span>


役立つ場合があります[カーネル デバッガーからユーザー モード デバッガーの制御](controlling-the-user-mode-debugger-from-the-kernel-debugger.md)としてユーザー モードのデバッガーを使用して、[サーバー デバッグ](remote-debugging-through-the-debugger.md)と同時にします。

たとえば、この構成は、ユーザー モードのシンボルがシンボル サーバーに配置されている場合に便利です。 カーネル デバッガーでは、2 つの相互作用からユーザー モード デバッガーの制御のデバッガーの標準構成で、同期では、小さな経過する可能性があり、これら過失がシンボル サーバーの認証を防ぐことができます。 ここで説明するより複雑な構成では、この問題を回避できます。

**注**  このシナリオの説明で*ターゲット アプリケーション*はデバッグ中は、ユーザー モード アプリケーションを*対象のコンピュータ*コンピューターを指しますをターゲット アプリケーションと、CDB、NTSD またはプロセスが含まれますと*ホスト コンピューター*カーネル デバッガーを格納しているコンピューターを参照します。

 

この手法を使用するには、次の操作を行う必要があります。

1.  -Ddefer および server コマンド ライン オプションで、目的のトランスポート オプションを指定する、対象のコンピューターか CDB、NTSD を起動します。 -サーバー オプションはコマンドラインで最初のパラメーターである必要があります。

    たとえば、次の構文を使用して実行中のプロセスにアタッチできます。

    ```console
    ntsd -server ServerTransport -ddefer [-y UserSymbolPath] -p PID 
    ```

    または、次の構文を使用して、ターゲットとして、新しいプロセスを開始できます。

    ```console
    ntsd -server ServerTransport -ddefer [-y UserSymbolPath] ApplicationName 
    ```

    これをインストールする事後分析をデバッガーとして場合、は、次の構文を使用します。 含む事後デバッガーにインストールするレジストリを手動で編集する必要がありますに注意してくださいは、server パラメーター。詳細については、次を参照してください。[事後のデバッグを有効にする](enabling-postmortem-debugging.md)します。

    ```console
    ntsd -server ServerTransport -ddefer [-y UserSymbolPath] 
    ```

    使用可能なトランスポートのオプションについては、次を参照してください。 [**デバッグ サーバー アクティブ化する**](activating-a-debugging-server.md)します。

2.  まるで、対象のコンピューターをデバッグしようとしていたが、実際に損なわれないターゲット コンピューターに、ホスト コンピューターでは、WinDbg または KD を起動します。 WinDbg を使用するには、次の構文を使用します。

    ```console
    windbg [-y KernelSymbolPath] [-k ConnectionOptions] 
    ```

    この手順の詳細については、次を参照してください[Live カーネル モードのデバッグを使用して WinDbg。](performing-kernel-mode-debugging-using-windbg.md)

    .

3.  デバッグのクライアントとサーバーを起動するために使用された同じトランスポート オプションで、WinDbg または CDB を起動します。 このデバッグのクライアントは、ホスト コンピューターで、または 3 つ目のコンピューターで実行できます。

    ```console
    cdb -remote ClientTransport 
    ```

    この手順の詳細については、次を参照してください。 [**デバッグ クライアントをアクティブ化する**](activating-a-debugging-client.md)します。

4.  デバッガーが実行されたら、`Input>`プロンプトが表示されたら、カーネル デバッガーを使用して、 [ **.sleep (デバッガーを一時停止)** ](-sleep--pause-debugger-.md)デバッガーを一時停止し、いくつかの実行対象のコンピュータを使用するコマンド秒数。 これにより、ユーザー モードのリモート サーバーとリモート クライアント間の接続を確立する、リモートのトランスポート プロトコルを処理するターゲット コンピューターの時刻です。

ユーザー モード デバッガーとして CDB を使用する場合 CDB に関連付けられているコマンド プロンプト ウィンドウでデバッグが続行中にロックされ、使用できないが残ります。 NTSD を使用する場合は、追加のウィンドウは作成されません、NTSD でターゲット コンピューターに関連付けられているプロセス ID も。

4 つのモードと、メソッドのトピックで説明されているそれらの間の切り替えの[モードの切り替え](switching-modes.md)この組み合わせの場合、相違点を次に適用されます。

-   2 つの異なるユーザー モードのデバッグ モードがあります。 デバッグ サーバーが他のリモート デバッグ セッション; のように、デバッグのクライアントによって制御される、ターゲット コンピューターが実行されている場合これは呼び出されます*リモート制御のユーザー モードのデバッグ*します。 対象のコンピュータにカーネル モードのデバッガーが壊れている場合、`Input>`プロンプトを表示すると、ユーザー モード デバッガーは、カーネル デバッガーによって制御されます。 これは呼び出されます*カーネル制御のユーザー モードのデバッグ*します。

-   同時には、これら 2 つのモードを使用できません。 カーネル デバッガーが対象のコンピュータに壊れている場合でも、ユーザー モード デバッガーをアクティブにできるは、対象のコンピュータは、リモートのトランスポート プロトコルを処理することし、そのため、ユーザー モード デバッガーでは、間でのリモートの入力を受信できません。この接続します。

-   シンボル サーバーで、ユーザー モードのシンボルが存在する場合は、リモート制御のユーザー モードのデバッグ モードではシンボルへのアクセスを必要とする任意のデバッガー コマンドを発行する必要があります。

-   リモート制御のユーザー モードのデバッグにカーネルによって制御されたユーザー モードのデバッグには、使用、 [ **.sleep (デバッガーを一時停止)** ](-sleep--pause-debugger-.md)コマンド。 ユーザー モード デバッガーは、sleep コマンドから再開、リモート制御のユーザー モードのデバッグ モードになります。

-   カーネル モードのデバッグをリモート制御のユーザー モードのデバッグには、入力から任意のコマンド、`Input>`プロンプト。 このプロンプトが表示されない場合に、カーネル モードのデバッグに切り替えるしを使用して、 [ **g (移動)** ](g--go-.md)のコマンドで、`kd>`プロンプト。

内部的には、- ddefer を使い始めるユーザー モード デバッガーはデバッグのクライアントからの入力に最初の優先順位とカーネル デバッガーからの入力に 2 番目の優先順位を与えます。 ただし、ことはありませんのでに設定できる競合同時の入力間でカーネル デバッガーが、ターゲット コンピューターに壊れている、リモート接続をご利用いただけません。

 

 





