---
title: デバッグ セッションと実行モデル
description: デバッグ セッションと実行モデル
ms.assetid: 1cc2c055-447c-44cd-94d4-ae3dfa8243fb
keywords:
- デバッガーエンジン、実行モデル
- 実行モデル
- デバッガーエンジン、デバッグセッション
ms.date: 05/23/2017
ms.localizationpriority: medium
ms.openlocfilehash: a19ec41c10d458c3921b702010af3ff99313f350
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72837768"
---
# <a name="debugging-session-and-execution-model"></a>デバッグ セッションと実行モデル


デバッガーエンジンでは、複数のターゲットを同時にデバッグできます。 *デバッグセッション*は、エンジンがターゲットを取得し、すべてのターゲットが破棄されるまで続行します。 現在のターゲットが中断されているときに、ターゲットの実行中に*アクセスでき*ても、デバッグセッションにアクセスすることは*できませ*ん。 エンジンは、セッションにアクセスできる間、ターゲットのチェックと操作にのみ使用できます。

デバッガーのメインループは、通常、実行状態を設定し、 [**Waitforevent**](https://docs.microsoft.com/windows-hardware/drivers/ddi/dbgeng/nf-dbgeng-idebugcontrol3-waitforevent)メソッドを呼び出して、生成された[イベント](events.md#events)を処理することで構成されます。 **Waitforevent**が呼び出されると、セッションにアクセスできなくなります。

ターゲットでイベントが発生すると、エンジンはすべてのターゲットを中断し、セッションにアクセスできるようになります。 次に、エンジンはイベントのイベントコールバックに通知し、イベントフィルター規則に従います。 イベントコールバックとイベントフィルターは、ターゲットの実行を続行する方法を決定します。 エンジンがデバッガーを中断する必要があると判断した場合、 **Waitforevent**メソッドはを返し、セッションはアクセス可能な状態のままになります。それ以外の場合、エンジンは、イベントコールバックとイベントフィルターによって決定された方法でターゲットの実行を再開し、セッションに再度アクセスできなくなります。

**Waitforevent**呼び出しの期間 (特に、イベントコールバックへの通知とフィルター規則の処理中) の場合、エンジンの状態は "待機中" と呼ばれます。 この状態では、 **Waitforevent**を呼び出すことはできません (再入可能ではありません)。

ターゲットで実行を開始するには、実行状態の設定と**Waitforevent**の呼び出しという2つの手順が必要です。 実行状態を設定するには、 [**Setexecutionstatus**](https://docs.microsoft.com/windows-hardware/drivers/ddi/dbgeng/nf-dbgeng-idebugcontrol3-setexecutionstatus)メソッドを使用するか、実行状態を設定するデバッガーコマンドを実行します。たとえば、 **g (開始)** や**p (ステップ)** などです。

一連のデバッガーコマンドが一緒に実行される場合 (例: "**g;?@ $ip**"--このコマンドがシーケンスの最後のコマンドではない場合、ターゲットでの実行を必要とするコマンドの後に*暗黙の待機*が発生します。 デバッガーエンジンが "待機中" の状態にあるときは、暗黙的な待機を行うことはできません。この場合、コマンドの実行は停止され、現在のコマンド (暗黙の待機の原因となったコマンド) は、ターゲットでの実行の進行状況を示すものとして解釈されます。 残りのコマンドは破棄されます。

**注**   セッションにアクセスできるかどうかを判断するときに、ターゲットの実行を制限する (ステップ実行など) ことは、エンジンによって実行されると見なされます。 制限された実行が完了すると、セッションにアクセスできるようになります。

 

### <a name="span-idhost_enginespanspan-idhost_enginespanhost-engine"></a><span id="host_engine"></span><span id="HOST_ENGINE"></span>ホストエンジン

リモートでデバッグする場合は、デバッガーエンジンの複数のインスタンスを使用できます。 これらのインスタンスの1つだけがデバッグセッションを維持します。このインスタンスは、*ホストエンジン*と呼ばれます。

すべてのデバッガー操作は、シンボルの読み込みや拡張機能の読み込みなど、ホストエンジンに対して相対的です。

 

 





