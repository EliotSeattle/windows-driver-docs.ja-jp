---
title: タイム トラベル デバッグ - トレース ファイルの使用
description: このセクションは、タイム トラベルのトレース ファイルを操作する方法を説明します
ms.date: 04/15/2019
ms.localizationpriority: medium
ms.openlocfilehash: 4af89ffd5225da70fb1ad1da0a9b60771c25b7af
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63379193"
---
![クロックが表示された短い時間旅行ロゴ](images/ttd-time-travel-debugging-logo.png) 

# <a name="time-travel-debugging---working-with-trace-files"></a>タイム トラベル デバッグ - トレース ファイルの使用

このセクションでは、作成、およびタイム トラベルのデバッグで使用されるファイルを操作する方法について説明します。

## <a name="trace-file-overview"></a>トレース ファイルの概要

タイム トラベルのデバッグは、次のファイルを使用して、デバッグ コードが実行します。

- トレース ファイルを選択し、コード実行の記録が含まれていますが、します。拡張機能を実行します。

- インデックス ファイルを選択し、トレース ファイルの情報にすばやくアクセスできますが、します。IDX 拡張機能。

- 記録のエラーとその他の記録の出力は、デバッガーのログ ファイルに書き込まれます。


## <a name="trace-run-files"></a>トレースします。ファイルを実行します。  

トレースします。使用して記録された後、実行ファイルを開くことができる**ファイル** > **デバッグを開始** > **トレース ファイルを開く**します。

![開いているトレースのオプションが強調表示を示すファイルを開くオプション](images/ttd-start-debugging-options.png) 

トレースのすべての出力ファイルは、既定では、ユーザーのドキュメント フォルダーに格納されます。 たとえば、User1 の TTD ファイルがここに保存。

```console
C:\Users\User1\Documents
```
記録を開始するときは、トレース ファイルの場所を変更できます。 詳細については、次を参照してください。[タイム トラベル デバッグ - 記録](time-travel-debugging-record.md)します。

ファイルの最近使用した一覧は、ターゲットの構成ファイルに以前使用したアクセスすばやくできます。 いずれかの最近使用したトレース ファイルまたはダンプ ファイルがも一覧表示します。 

![ファイルが最近 5 つを示す実行トレース ファイルの一覧を開くトレース ファイルの使用](images/ttd-recent-trace-files.png) 


## <a name="index-idx-files"></a>インデックス。IDX ファイル  

インデックス。IDX ファイルは、関連するトレースに作成されます。WinDbg のプレビューでのトレース ファイルを開くときに、ファイルを自動的に実行します。 使用してインデックス ファイルを手動で作成することができます、! コマンドのインデックスを作成します。 インデックスは、トレース情報にすばやくアクセスできます。 

IDX ファイルは大きくなることも通常 2 倍のサイズします。ファイルを実行します。  

## <a name="recreating-the-idx-file"></a>再作成します。IDX ファイル
再作成することができます、します。IDX ファイルから、します。実行ファイルを使用して、`!index`コマンド。 詳細については、次を参照してください。[時のデバッグ出張 -! インデックス (タイム トラベル)](time-travel-debugging-extension-index.md)します。

```dbgcmd
0:0:001> !index
Indexed 3/3 keyframes
Successfully created the index in 49ms.
```

## <a name="sharing-ttd-trace-run-files"></a>TTD トレースを共有します。ファイルを実行します。

TTD はローカル専用と、別のコンピューターにリモート接続は機能しません。

TTD トレース ファイルは、コピーして他のユーザーと共有できる、します。ファイルを実行します。 これは、問題を把握する同僚のヘルプを持つ場合に便利です。 クラッシュしているアプリをインストールまたはこの問題を再現しようとするその他の関連のセットアップを実行する必要がありません。 だけ、トレース ファイルの読み込みし、自分の PC にインストールされている場合に、アプリのデバッグができます。

TTD トレースを再生するマシンは、レコード コンピューター - たとえば AVX 命令で使用されていたすべての命令をサポートする必要があります。

日付やバグ番号などの追加情報を含めるよう、ファイルの名前を変更することができます。

します。IDX ファイルが再作成できますを使用して、コピーする必要はありません、! 上に示したコマンドのインデックスを作成します。

> [!TIP]
> 他のユーザーと共同作業をするときは、当面の問題に関連するすべての関連するトレース位置に渡します。 コラボレーターが使用できる、`!tt x:y`その正確なポイントで、コードの実行時に移動するコマンド。 時間位置の範囲は、考えられる問題が発生する可能性を追跡するためにバグの説明に含めることができます。
>


## <a name="error---log-file"></a>エラー - ログ ファイル

記録のエラーとその他の記録の出力は、デバッガーのログ ファイルに書き込まれます。 ログ ファイルを表示するには、次のように選択します。**ビュー** > **ログ**します。 

この例を起動し、実行可能ファイル、C:\Windows ディレクトリ内にない Foo.exe という名前を記録する際に、エラー ログのテキストを示します。

```console
2017-09-21:17:18:10:320 : Information : DbgXUI.dll : TTD: Output: 
Microsoft (R) TTD 1.01.02
Release: 10.0.16366.1000
Copyright (C) Microsoft Corporation. All rights reserved.
Launching C:\Windows\Foo.exe
2017-09-21:17:18:10:320 : Error : DbgXUI.dll : TTD: Errors: 
Error: Trace of C:\Windows\Foo.exe PID:0 did not complete successfully: status:27
Error: Could not open 'Foo.exe'; file not found.
Error: Corrupted trace dumped to C:\Users\User1\Documents\Foo01.run.err.
```



## <a name="trace-file-size"></a>トレース ファイルのサイズ

非常に大きな TTD トレース ファイルを取得でき、使用可能な十分な空きディスク領域があることを確認することが重要です。  数分でも、アプリまたはプロセスを記録するトレース ファイルのサイズが数ギガバイトになる可能性があります。  トレース ファイルのサイズは、以下に示す要因の数に依存します。  

TTD では、複雑なシナリオの実行時間が長いためにトレース ファイルの最大サイズは設定されません。 問題を迅速に再作成と、トレース ファイルのサイズが限り保持されます。
 
### <a name="trace-file-size-factors"></a>トレース ファイルのサイズの要因

入力し、正確に見積もることはできません、トレース ファイルのサイズがありますが、いくつかの経験則 TTD ファイルのサイズを理解するためです。

トレース ファイルのサイズは、次の要因の影響を与えることができます。

- 実行中のアプリまたはプロセスを記録するときに、すべてのスレッドで実行されるコード命令の数
- この中に、アプリまたはプロセスが記録された時間 (これには、記録コード命令の数に影響します) 場合にのみの長さ
- アプリまたはプロセスによって使用されるメモリのデータのサイズ
 
命令が実行され、記録の数は、トレース ファイルのサイズに影響する最も大きな要因です。  通常、トレースは、1 ビットと実行された命令あたり 1 バイトが必要です。  トレースは、録画した番組が少数の異なる機能を実行し、少数のデータセットを操作するときに、その範囲の始点となる方向にある可能性があります。  トレースは、録画した番組より多くの異なる機能を実行するかより大きなデータ セットに対して動作すると、その範囲の終点となる方向にある可能性があります。
 
### <a name="trace-file-size-rule-of-thumb"></a>ファイル サイズの目安をトレースします。

トレース ファイルは、ときに、作業中のアプリまたはトレース ファイルによって、プロセスを記録のサイズを上に示した要因の 1 秒あたり 50 MB を約 5 MB を拡大します。

アプリまたは記録中のプロセスがアイドル状態 (入力を待機している) 場合など、トレース ファイルは拡張されません。

現在のトレース ファイルの最大ファイル サイズ制限はありません。  WinDbg のプレビューでは、サイズのギガバイト数百にも、トレース ファイルを再生できます。
 
### <a name="index-file-size"></a>インデックス ファイルのサイズ

最初にトレースを開くときに、WinDbg Preview によってインデックス ファイルが自動的に作成します。  デバッガーは、トレースを再生し、メモリに関する情報をより効率的なクエリに役立つ情報が含まれています。  サイズは、一般に、トレース ファイルの 2 倍のサイズを 1 から範囲です。  サイズに影響する要因は、トレース ファイルのサイズに影響するものと似ています。
 
最初に、インデックス ファイルのサイズは、トレースの長さに関連したスケーリングします。  記録された命令の大きい番号が含まれるトレースは、大きいインデックスを通常があります。
 
次に、さまざまなメモリ アクセスの基準とした、インデックスのサイズをスケーリングします。  個別のメモリ位置の数が多いを頻繁に記録されたプログラムにアクセスした場合、インデックスは、一般によりも大きい記録されたプログラムが少ないの個別のメモリ位置にアクセスまたはメモリの場所へのアクセス頻度が低い場合。
 
これらの要因は、トレース ファイルのサイズに影響する要因に似ていますがため、インデックス ファイルのサイズは通常、インデックス ファイル (つまり 1 x 2 倍のトレース ファイルのサイズの間は通常の見積もり) のサイズを基準とスケーリングします。
 
### <a name="what-if-i-run-out-of-disk-space"></a>What-if ディスク領域不足を実行しますか。

TTD トレースとインデックスのファイルが書き込まれるディスクにします。 現在、トレース、またはインデックスのいずれかのファイルの最大ファイル サイズの制限はありません。 トレース ファイルのサイズが増加の記録を停止するか、使用可能なディスク領域の量を超えるまでです。
 
*記録: 中*TTD では、トレース ファイルに最後のページを記述し、書き込みをもう一度まで実質的に待機します。 WinDbg は記録ダイアログ ボックスを表示するのには続行されますが、記録中にディスク領域が不足した場合、エラー/警告メッセージを表示しません。  

コードの実行の不完全なレコードでは、トレース ファイルに結果を記録中にディスク領域が不足実行されています。 WinDbg のプレビューでは、不完全なトレース ファイルを開くことが、トレース ファイルを作成するときに、ディスク領域の不足した後は、エラーが発生した場合、いない実際の問題を含めることができます。

対応策 :ファイル エクスプ ローラーを開き (つまり、c: ドライブ) のディスクの空き領域が 0 に近いかを確認します。 代わりに、トレースをウォッチ (します。実行) は、ファイル エクスプ ローラー (ドキュメント フォルダー内の既定値) でファイルし、いない定期的に記録し、サイズの増大する場合も待機している可能性があります。 WinDbg で停止し、デバッグのボタンをクリックして、領域を解放するまたは別のディスクに保存および記録をもう一度開始します。
 
*: インデックス作成中には*デバッガーは、無効なインデックス ファイルを生成可能性があります、デバッガーで予期しない動作結果またはデバッガー エンジンのホストがクラッシュする可能性があります。

対応策 :デバッガーを終了し、任意のインデックス ファイル (.idx) が存在する、トレースを削除します。  解放するための十分なディスク領域、またはトレース ファイルを別のディスクに十分な空き領域に移動します。  デバッガーでトレースを再度開くし、実行! 新しい、適切なインデックスを作成するインデックス。  インデックスを作成しても、元のトレース ファイル (実行) は変更しませんデータがない失われているようにします。

## <a name="see-also"></a>関連項目

[旅行時間 - デバッグの概要](time-travel-debugging-overview.md)

---
