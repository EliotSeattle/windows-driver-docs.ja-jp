---
title: バグ チェック 0x139 KERNEL_SECURITY_CHECK_FAILURE
description: KERNEL_SECURITY_CHECK_FAILURE のバグ チェックでは、0x00000139 の値を持ちます。 このバグ チェックでは、カーネルの重要なデータ構造体の破損が検出されたことを示します。
ms.assetid: C0E5C625-13DB-4B3A-8080-69CEB963A299
keywords:
- バグ チェック 0x139 KERNEL_SECURITY_CHECK_FAILURE
- バグ チェック 0x139 KERNEL_SECURITY_CHECK_FAILURE
ms.date: 01/30/2019
topic_type:
- apiref
api_name:
- Bug Check 0x139 KERNEL_SECURITY_CHECK_FAILURE
api_type:
- NA
ms.localizationpriority: medium
ms.openlocfilehash: a4ec4a3fcabe13dede1109d22ebffe4d1efcd801
ms.sourcegitcommit: fb8b1d2e18dd727e8a479b04c9e6051e7e9fa484
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/18/2019
ms.locfileid: "59239665"
---
# <a name="bug-check-0x139-kernelsecuritycheckfailure"></a>バグ チェック 0x139:カーネル\_セキュリティ\_確認\_エラー


カーネル\_セキュリティ\_確認\_エラーのバグ チェックが 0x00000139 の値を持ちます。 このバグ チェックでは、カーネルの重要なデータ構造体の破損が検出されたことを示します。

> [!IMPORTANT]
> このトピックはプログラマーを対象としています。 コンピューターを使用しているときに、エラー コードがブルー スクリーンが受信した顧客の場合を参照してください。[トラブルシューティング ブルー スクリーン エラー](https://windows.microsoft.com/windows-10/troubleshoot-blue-screen-errors)します。


## <a name="bug-check-0x139-kernelsecuritycheckfailure-parameters"></a>バグ チェック 0x139 カーネル\_セキュリティ\_確認\_エラー パラメーター


| パラメーター | 説明                                                                 |
|-----------|-----------------------------------------------------------------------------|
| 1         | 破損の種類。 詳細については、次の表を参照してください。      |
| 2         | バグ チェックを原因となった例外をトラップ フレームのアドレス       |
| 3         | バグ チェックの原因となった例外の例外レコードのアドレス |
| 4         | 予約済み                                                                    |

 

次の表では、パラメーター 1 の使用可能な値について説明します。

| パラメーター 1 | 説明                                                                                                                                                                                                                                                                                                       |
|-------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0 | スタック ベースのバッファーがされました (レガシ/GS 違反) オーバーランが発生します。                                                                                                                                                                                                                                                     |
| 1  |  VTGuard インストルメンテーション コードは無効な仮想関数テーブルの使用を検出しました。 通常、C++ オブジェクトが破損しているし、仮想メソッドの呼び出しが、破損しているオブジェクトを使用しようとしましたし**この**ポインター。                                                                                     |
| 2  |  スタック cookie インストルメンテーション コードは、スタック ベースのバッファー オーバーラン (/GS 違反) を検出します。                                                                                                                                                                                                                          |
| 3  |  一覧\_(二重の削除など) のエントリが破損しています。 詳細については、次の「原因」セクションを参照してください。                                                                                                                                                                                                |
| 4  |  予約済み                                                                                                                                                                                                                                                                                                          |
| 5  |  無効なパラメーターは、無効なパラメーターを致命的と見なす関数に渡されました。                                                                                                                                                                                                                            |
| 6  |  スタック cookie のセキュリティ cookie はローダーによって正しく初期化されませんでした。 これは、Windows 8 上でのみ実行するためのドライバーを開発して Windows の以前のバージョンのドライバーのイメージを読み込もうとして発生する可能性があります。 この問題を回避するには、ドライバーを Windows の以前のバージョンで実行を構築する必要があります。 |
| 7  |  致命的なプログラムの終了が要求されました。                                                                                                                                                                                                                                                                               |
| 8  |  コンパイラによって挿入された配列の境界チェックには、無効な配列、インデックス作成操作が検出されました。                                                                                                                                                                                                                       |
| 9  |  呼び出し**RtlQueryRegistryValues** RTL を指定することが行われた\_クエリ\_レジストリ\_RTL ことがなく直接\_クエリ\_レジストリ\_入力、および対象の値は、信頼済みのシステム ハイブではありません。                                                                                                                             |
|   10 |  間接的な呼び出しガード チェックには、無効なコントロールの転送が検出されました。 |
|   11 | 書き込みガード チェックには、無効なメモリの書き込みが検出されました。 |
|   12 | 無効なファイバー コンテキストに切り替えが試行されました。 |
|   13 | 無効なレジスタのコンテキストの割り当てが試行されました。 |
|   14 | オブジェクトの参照カウントが無効です。 |
|   18 | 無効な jmp_buf コンテキストに切り替えが試行されました。 |
|   19 | 読み取り専用データが、安全でない変更しました。 |
|   20 | 暗号化自己テストに失敗しました。 |
|   21 | 無効な例外のチェーンが検出されました。 |
|   22 | 暗号化ライブラリ エラーが発生しました。 |
|   23 | 無効な呼び出しは、DllMain 内から行われます。 |
|   24 | 無効なイメージのベース アドレスが検出されました。 |
|   25 | 遅延読み込みのインポートの保護、回復不可能なエラーが発生しました。 |
|   26 | 安全でない拡張機能には、呼び出しが行われました。 |
|   27 | 非推奨のサービスが呼び出されました。 |
|   28 | 境界バッファーへのアクセスの不足が検出されました。 |
|   29 | RTL_BALANCED_NODE RBTree エントリが破損しています。 |
|   37 | スイッチ jumptable エントリの範囲の不足が呼び出されました。 |
|   38 | 無効なターゲットに longjmp が試行されました。 |
|   39 | 抑制エクスポート呼び出しの対象には、有効な呼び出しのターゲットを作成できませんでした。 |
 

<a name="cause"></a>原因
-----

パラメーター 1 テーブル、およびダンプ ファイルを使用して、それはこの型の多くのバグ チェックの原因を絞り込みます。

リスト\_エントリの破損には追跡しにくくなりますが、このバグを確認する (個々 のリストのエントリ要素に追加したときに検出または一覧から削除)、二重リンク リストに不整合が導入されていることを示します。 残念ながら、矛盾が必ずしも検出されない、破損の発生時に、ある程度調べなければは根本原因を識別するために必要なことがあります。

一覧のエントリの破損の一般的な原因は次のとおりです。

-   ドライバーには、(たとえば二重スレッドがその同じ KEVENT で引き続き待機している間、KEVENT の初期化または別のスレッドがその KEVENT を使用していたときに、スコープ外に移動するスタック ベース KEVENT を許可する) の KEVENT などのカーネル同期オブジェクトが破損しています。 この種類のバグ チェックは、通常、nt に発生します。Ke\*または nt!Ki\*コード。 これは、スレッド同期オブジェクトで、またはコードがシグナル状態にする同期オブジェクトを配置しようとしたときの待機は終了時に発生します。 通常、通知される同期オブジェクトでは、破損しているものです。 場合によっては、特別なプールの Driver Verifier が (破損している同期オブジェクトが既に解放されてプールのブロックである場合)、原因を突き止めるを支援することができます。
-   ドライバーには、定期的な KTIMER が破損しています。 この種類のバグ チェックは、通常、nt に発生します。Ke\*または nt!Ki\*コードし、タイマーのシグナルまたは挿入またはタイマーのテーブルからタイマーを削除する必要があります。 操作されるタイマーの破損した 1 つで、可能性がありますが、タイマーのテーブルを検査する必要があります[ **! タイマー** ](-timer.md) (またはタイマー一覧へのリンクを手動で徒歩) を識別するタイマーをされました破損しています。 場合によっては、特別なプールの Driver Verifier が (破損した KTIMER が既に解放されてプールのブロックである場合)、原因を突き止めるを支援することができます。
-   ドライバーが内部のリストを減り\_リンク リストの項目のスタイル。 典型的な例を呼び出すことは**RemoveEntryList** 2 つのリストのエントリを挿入し直すことがなく、同じ一覧のエントリを 2 回**RemoveEntryList**呼び出し。 他のバリエーションは、可能であれば、double、同じリストにエントリを挿入するなどです。
-   ドライバーの一覧を含むデータ構造が解放\_を後で以前のプールのブロックを再利用された後、一覧が調べられるときに検出する破損の原因とその対応するボックスの一覧から、データ構造を削除せずエントリ。
-   ドライバーの一覧が使用\_破損の更新プログラムの一覧にその結果、適切な同期しない同時実行方式で項目のスタイルの一覧。

ほとんどの場合、前方と後方リンクの一覧で、破損したデータ構造を識別できます (、 [ **dl** ](dl--display-linked-list-.md)と**dlb**コマンドは、このために役立つ目的) と、結果を比較します。 リストが前方と後方のウォークの間の一貫性は、通常、破損の場所です。 リンク リストの更新操作は、隣接する要素の一覧へのリンクを変更できるので参照してください、破損したリスト項目の近隣ノードに密接には、ように基になる原因があります。

多くのシステム コンポーネントが内部的にリストを利用するため\_エントリを一覧表示、さまざまな種類の Api では、システム管理のリンク リストにリンク リストの破損が生じるシステムを使用して、ドライバーによってリソースを正しく管理しません。

<a name="resolution"></a>解決方法
----------

この問題の原因は通常問題を判断するには、追加情報を収集するためにデバッガーを使用する必要があります。 複数のダンプ ファイルは、この停止コードが停止コードが表示されるときに実行されているコードなど、類似した特性を調べる必要があります。

詳細については、次を参照してください。 [Windows デバッガー (WinDbg) を使用してクラッシュ ダンプ分析](crash-dump-files.md)、[を使用して、! 拡張機能を分析](using-the--analyze-extension.md)と[! 分析](-analyze.md)します。

イベント ログを使用して、発生するより高いレベルのイベントが先頭までこの停止コードを参照してください。

一般的なトラブルシューティングのヒントが役立つ可能性があります。

-   最近削除または置換することをお試し、システムにハードウェアを追加した場合 または、更新プログラムが利用可能な製造元に確認します。

-   新しいデバイス ドライバまたはシステム サービスを最近では、追加されている場合を削除するか、それらを更新してみてください。 表示する新しいチェック コードをバグの原因となったシステムで変更内容を調べてください。

-   デバイスまたはエラーの原因となっているドライバーの特定に役立つ可能性がある追加のエラー メッセージをイベント ビューアーのシステム ログを確認します。 詳細については、次を参照してください。[イベント ビューアーを開く](https://windows.microsoft.com/windows/what-information-event-logs-event-viewer#1TC=windows-7)します。 ブルー スクリーンに同じ期間に発生したシステム ログの重大なエラーを探します。

-   検索対象**デバイス マネージャー**を任意のデバイスの感嘆符 (!) が付いてを参照してください。 任意のエラーが発生したドライバーのドライバーのプロパティに表示されるイベント ログを確認します。 関連するドライバーを更新してみてください。

-   ウイルス検出プログラムを実行します。 ウイルスに感染する可能性、Windows 用にフォーマットされたハード_ディスクのすべての種類と、結果として得られるディスクの破損は、システムのバグ チェックのコードを生成できます。 ウイルス検出プログラムへの感染マスター ブート レコードのチェックを確認します。

-   その他の一般的なトラブルシューティング情報を参照してください。 [**青い画面データ**](blue-screen-data.md)します。

## <a name="span-idseealsospansee-also"></a><span id="see_also"></span>参照してください。


[クラッシュ ダンプ分析の Windows デバッガー (WinDbg) の使用方法](crash-dump-files.md)

[WinDbg をカーネル モードのダンプ ファイルの分析](analyzing-a-kernel-mode-dump-file-with-windbg.md)

 

 




