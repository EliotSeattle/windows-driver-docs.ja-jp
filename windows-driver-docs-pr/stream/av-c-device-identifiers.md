---
title: AV/C デバイス識別子
description: AV/C デバイス識別子
ms.assetid: c2d108c7-5ea9-42c1-92d7-5ba90f2f4232
keywords:
- AV/C WDK、識別子
- id WDK AV/C
- デバイス Id WDK AV/C
- Avc 関数ドライバー WDK、識別子
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 99e935f243adab28b4337a82853e06147247010d
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72843363"
---
# <a name="avc-device-identifiers"></a>AV/C デバイス識別子





ユーザーが AV/C デバイスをコンピューターに接続すると、 *Avc*はデバイス上のアクティブなサブユニットを列挙し、デバイス識別子 (ID) 文字列を生成します。 AV/C デバイスのアクティブなサブユニットごとにデバイス id があります。 AV/C デバイスにアクティブなサブユニットがない場合、 *Avc*は、Av/c デバイス自体のデバイス識別子を生成します。

ピアサブユニットのデバイス id フィールドの形式は次のとおりです。

**AVC\\*ベンダ*&*Model*&*SubunitType*& * SubunitID***

仮想サブユニットのデバイス id フィールドの形式は次のとおりです。

**Vavc\\*Vendor*&*Model*&*SubunitType*& * SubunitID***

数値が使用されているフィールドでは、数字は16進数に変換され、英字は大文字に変換されます。 先頭に0はありません。 ドライバーの INF ファイルで指定されているデバイス識別子は、この形式と一致している必要があります。 ハードウェア識別子と互換性のある識別子のすべての数値フィールドには、次のようにタグが付けられます (特に例外があります)。

-   ***ベンダ***: **VEN\_** (ベンダテキストが使用可能な場合を除く)

-   ***モデル***: **MOD\_** (モデルテキストが使用可能な場合を除く)

-   ***SubunitType***: **TYP\_**

-   ***SubunitID***: **ID\_**

*Avc*は、外部 AV/C デバイス上に存在するアクティブなサブユニットごとにデバイスオブジェクトを作成します。 Ieee 1394 バスのリセットは、AV/C デバイスが IEEE 1394 バスに追加されるか、IEEE バスから削除されるたびにトリガーされます。 その後、 *Avc*は、接続されているすべての AV/C デバイス上のアクティブなサブユニットを再列挙します。 再列挙により、デバイスは、AV/C デバイスの動作モードが切り替わるたびに、Windows が*Avc*を再読み込みする必要なく、サブユニットを追加または削除するようにデバイスを再構成することができます。 たとえば、この機能は、DV カムコーダーがカメラモードと VTR モードを切り替えるときに適用されます。 そのため、サブユニットドライバーは、対応するアクティブなサブユニットが追加および削除されたときにのみ読み込まれ、アンロードされます。

*Avc*では、同じ***SubunitType***の複数のサブユニットを区別できないため、これらのサブユニットを追加して削除すると、対応するサブユニットドライバーが最高の***SubunitID***で読み込まれ、アンロードされます。

各サブユニットのデバイスオブジェクトには、1つまたは2つのハードウェア識別子と互換性のある複数の識別子があります。 ベンダーは、次に示すサブユニットドライバーの INF ファイルで、これらのハードウェアまたは互換性のある識別子を1つ以上指定する必要があります。 Windows では、デバイスがコンピューターに初めて接続されたときに、これらのデバイス識別子を使用して、各サブシステムに対して読み込む適切なドライバーを検索します。 AV/C デバイスのハードウェアおよび互換性のあるデバイス id の例については、Microsoft が提供する*61883*、 *msdv .Inf* 、および*Mstape*ファイルを調べることができます。 INF ファイルの実装の詳細については、「 [Inf ファイルのセクションとディレクティブ](https://docs.microsoft.com/windows-hardware/drivers/install/inf-file-sections-and-directives)」を参照してください。

デバイス id 文字列の個々の要素は次のとおりです。

<a href="" id="vendor"></a>***業者***  
ベンダ名テキストが IEEE 1394 Configuration ROM のユニット機能のルートディレクトリに存在する場合***は、vendor フィールドで***ベンダ名テキストが使用されます。 次に、例を示します。

**AVC\\Microsoft &*Model*&*SubunitType*& * SubunitID***

それ以外の場合は、ベンダーの固有の番号 (IEEE 1394 取引のアソシエーションによって割り当てられている) が***vendor***フィールドで使用されます。 次の例では、"50F2" は Microsoft の1394TA 仕入先番号です。

**AVC\\VEN\_50F2 &*Model*&*SubunitType*& * SubunitID***

ベンダー名テキストが存在しない場合は、IEEE 1394 Configuration ROM のルートディレクトリにあるモジュール\_Vendor\_ID エントリから数値が取得されます。 この直接エントリのコマンドとステータスレジスタ (CSR) のアーキテクチャキーは 0316 (16 進数) で、残りの24ビットは\_Vendor\_ID エントリの数値モジュールです。

<a href="" id="model"></a>***型***  
モデル名テキストが IEEE 1394 Configuration ROM のユニット機能に含まれている場合***は、モデルフィールドで***モデル名テキストが使用されます。 次に、例を示します。

**AVC\\Microsoft & DVCamcorder &*SubunitType*& * SubunitID***

それ以外の場合***は、モデルフィールドで***モデル番号が使用されます。 次に、例を示します。

**AVC\\Microsoft & MOD\_0 &*SubunitType*& * SubunitID***

1394 Configuration ROM のユニットディレクトリのモデルテキストが使用され、単位のディレクトリエントリに優先順位が付けられます。 優先順位は次のとおりです。

1.  単位ディレクトリからの数値識別子。

2.  ルートディレクトリからのモデルテキスト。

3.  ルートディレクトリからのモデル識別子。

<a href="" id="subunittype"></a>***SubunitType***  
***SubunitType***フィールドが使用可能な場合、サブユニットアドレスから抽出され、各バイトの16進値の文字列に変換されます。 サブユニットの種類が拡張されている場合にのみ、複数のバイトが存在します。 通常、最初のバイトは、アドレスバイトの最上位5ビットから抽出されます。詳細については、「 *AV/C Digital Interface Command Set General Specification, Rev 3.0*」の5.3.3 セクションを参照してください。

例: **AVC\\VEN\_50F2 & MOD\_0 & TYP\_4 & * SubunitID***

*Avc*がサポートするサブタイプの種類と、対応する数値の一覧については、「 [**AvcSubunitType**](https://docs.microsoft.com/windows-hardware/drivers/ddi/avc/ne-avc-_tagavcsubunittype)」を参照してください。

<a href="" id="subunitid"></a>***SubunitID***  
***SubunitType***フィールドが使用可能な場合は、 ***SubunitID***フィールドも使用できます。 *Avc*が AV/C デバイスでサブユニット情報を照会すると、デバイスは各種類のサブユニットの数で応答します。 この0から始まるカウントは、サブユニットごとにデバイス id を作成するために使用されます。 サブユニットアドレスの指定では、 ***SubunitID***フィールドを拡張することもできますが、このアスペクトはサブユニットドライバー (および INF ファイルの作成者) からは見えません。 常に0から始まるインスタンス番号が使用されます。 たとえば、 ***SubunitID***フィールドが270サブユニットをサポートするように拡張されている場合、270th サブユニットの識別子は 10d (269 decimal) になります。 次に、例を示します。

**AVC\\Microsoft & MOD\_0 & TYP\_4 & ID\_10D**

***SubunitType***または***SubunitID***を提供しない AV/C ユニットの場合、デバイス識別子文字列は、末尾にアンパサンド (&) を付けずに、***ベンダー***および***モデル***のフィールドのみで構成されます。

 

 




