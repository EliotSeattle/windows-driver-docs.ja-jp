---
title: USBCAMD2 カメラの構成
description: USBCAMD2 カメラの構成
ms.assetid: 9a0dd6f9-aefb-4134-8bd5-31420a16db4a
keywords:
- Windows 2000 カーネルストリーミングモデル WDK、USBCAMD2 ミニドライバーライブラリ
- ストリーミングモデル WDK Windows 2000 カーネル、USBCAMD2 ミニドライバーライブラリ
- カーネルストリーミングモデル WDK、USBCAMD2 ミニドライバーライブラリ
- USBCAMD2 カメラ構成 WDK Windows 2000 カーネルストリーミング
- USB ベースのストリーミングカメラの WDK USBCAMD2
- カメラ WDK USBCAMD2
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 58a8b181141f651c24217cacbe9bd2e8f35fd47e
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72841658"
---
# <a name="usbcamd2-camera-configurations"></a>USBCAMD2 カメラの構成


USB カメラをサポートするためのミニドライバーは、次の図に示すように、上から下にある、 *.sys*クラスドライバーのクライアントになります。

![usb カメラミニドライバーモデルを示す図](images/usbimdev.png)

図**のグループ構成では、** ミニドライバー writer は、 *.sys*クラスドライバー、カメラ、および USB バスにインターフェイスする必要があります。 グループ**B**の構成では、USBCAMD2 を使用するために記述されたミニドライバーには、デバイス固有のコードのみを含める必要があります。 つまり、USBCAMD2 を使用する場合は、ビデオ形式、プロパティセット、イメージの圧縮解除、および色空間の変換に対するサポートの実装に専念できます。 USBCAMD2 ミニドライバーライブラリは、クラスドライバーと USB バスドライバーへの接続を制御することにより、カメラミニドライバーの開発プロセスを簡略化*します。*

USBCAMD2 インターフェイスは、現在互換性のために残されて*いますが*、これは互換性のために残されていますが、USBCAMD2 でカメラミニドライバーを開発することは、独自の*スタンドアロンの*クラスまたは avstream ミニドライバーを記述するよりも簡単です。

USBCAMD2 の主な目的は、web カメラなどのストリーミングビデオカメラをサポートすることです。 ただし、USBCAMD2 では、カメラから送信された静止イメージをキャプチャするために、USB 一括および割り込み転送パイプを使用することもサポートされています。 この機能は、スナップショット機能を備えた USB カメラをサポートしており、フレームをキャプチャできます。

カメラが主にビデオをストリーミングし、必要に応じてスナップショット機能を提供する場合は、USBCAMD2 ミニドライバーを記述するだけで済みます。 ハイブリッドカメラのベンダー (主に静止写真を撮影し、ビデオをストリーミングすることもできます) は、ストリーミング機能をサポートするために USBCAMD2 ミニドライバーを作成します。また、静止画像ストレージをサポートするために、別の Windows イメージ取得 (WIA) のカメラドライバーを使用することもできます。および管理。 WIA と、静止イメージをキャプチャするデジタルカメラのサポートの詳細については、「 [Windows イメージ取得ドライバー](https://docs.microsoft.com/windows-hardware/drivers/image/windows-image-acquisition-drivers)」を参照してください。

USBCAMD2 ライブラリでは、データストリームと制御設定を転送するために、アイソクロナスパイプ、バルク i/o パイプ、または割り込みパイプを組み合わせて使用するカメラがサポートされています。 USBCAMD2 では、次の USB パイプ構成を実装するカメラがサポートされています。

-   ビデオの開始と終了や、データストリームに埋め込まれた静止フレームなどの同期情報を含む単一のアイソクロナスパイプ。 これらの種類のカメラでは、両方のビデオを多重化しながら、同じアイソクロナスパイプを使用したり、個々のビデオフレームを静止フレームとして再利用したりすることができます。

-   前の構成と同じです。また、割り込みパイプを追加して、登録されたアプリケーションに外部トリガーイベントの通知を通知します。

-   最初の構成と同じです。2つの一括 i/o パイプを追加して、カメラからのフレームの制御と取得を行います。

-   2つのアイソクロナスパイプ。 1つのパイプストリームデータともう一方のパイプには、ビデオの開始や終了などの同期情報が含まれています。 また、同じアイソクロナスパイプを使用してビデオと静止したフレームの両方を多重化したり、個々のビデオフレームを静止フレームとして再利用したりすることもできます。

-   2つの一括 i/o パイプとオプションの割り込みパイプ。 1つの一括パイプストリームビデオとその他のバルクパイプは、静止画像を転送します。 オプションの割り込みパイプは、登録されたアプリケーションに外部トリガーイベントの通知を送ります。

**注**   USBCAMD2 では、複数の代替設定を持つ1つの USB インターフェイスを使用したカメラがサポートされています。 すべての代替設定は、同じ種類と数のパイプを持つ必要があります。 この情報は、カメラを初期化して構成するときに[*CamConfigureEx*](https://docs.microsoft.com/windows-hardware/drivers/ddi/usbcamdi/nc-usbcamdi-pcam_configure_routine_ex)に渡す[**USBCAMD\_パイプ\_Config\_記述子**](https://docs.microsoft.com/windows-hardware/drivers/ddi/usbcamdi/ns-usbcamdi-_pipe_config_descriptor)型の配列で指定します。

 

Usb 1.1 デバイスは USB 2.0 バスに接続できますが、USBCAMD2 は USB 1.1 カメラデバイスのみをサポートするため、USB 1.1 バスの最大スループットに制限されます (たとえば、*フル*スピードモードでのアイソクロナスデータ転送)。 USBCAMD2 は、USB 2.0 のアイソクロナスデータ転送*の高速モード*をサポートしていません。 ただし、カメラが一括パイプのみを実装している場合は、USB 2.0 バスに接続して、より多くの使用可能な一括転送帯域幅があるという利点があります。

 

 




