---
title: ビデオ キャプチャ デバイスからのデータのストリーミング
description: ビデオ キャプチャ デバイスからのデータのストリーミング
ms.assetid: c83aae8e-70a7-4d65-a888-00a7c21eebdd
keywords:
- ビデオキャプチャ WDK AVStream、ストリーミングデータ
- ビデオの WDK AVStream、ストリーミングデータのキャプチャ
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: b2ce08a1c3c856e01b4fcb831732a49bd630d2fd
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72837671"
---
# <a name="streaming-data-from-a-video-capture-device"></a>ビデオ キャプチャ デバイスからのデータのストリーミング


ビデオストリームは、タイムスタンプの付いた、デジタル化されたビデオと関連情報 (垂直ブランキング間隔 (VBI) データ、タイムコードなど) で構成されています。 ストリームは、互いに独立して一時停止、開始、および停止することができます。 ストリームのサンプルは、100ナノ秒の解像度でタイムスタンプが付けられています。

ビデオキャプチャミニドライバーでは、圧縮されたビデオ、圧縮されていないビデオ、タイムコード、クローズドキャプション、未加工およびデコードされた VBI データ、カスタムデータ形式の複数の同時ストリームがサポートされています。 ミニドライバーは、他のデータ型と同時に生成できるデータ型ごとに新しいストリームを作成する必要があります。 AVStream またはストリームクラスのインターフェイスは、新しいストリームごとに個別の pin を公開します。 これらの pin は、Ksk プロキシによってミラー化され、ユーザーモードで Microsoft DirectShow フィルターとして表示されます。 DirectShow フィルターは、WDM フィルタードライバーではありません。 Pin とストリーミングの詳細については、「[カーネルストリーミング](kernel-streaming.md)」を参照してください。

各ビデオストリーミングピンは、さまざまなデータ形式をサポートしています。 たとえば、1つの pin で RGB16、RGB24、YUV9、および JPEG デジタルビデオをサポートできます。 ほとんどのデバイスは、これらの形式のうちのいくつかのみをサポートしています。 ストリーム形式の詳細と、サポートされている形式の範囲の指定については、「[ストリーム形式の指定](specifying-stream-formats.md)」を参照してください。

### <a name="vertical-blanking-interval-vbi-data"></a>垂直ブランキング間隔 (VBI) データ

垂直のブランキング間隔 (VBI) ストリームをキャプチャする場合、キャプチャデバイスは未加工のデコードされていない VBI サンプルを提供する必要があります。これにより、ダウンストリームのフィルターとコーデックがクローズドキャプション (CC)、北アメリカの放送文字放送規格 (NABTS)、文字放送を抽出できるようになります。生のサンプルからのその他の独自のデータ。

VBI デコーダーには、チューニングの変更をすぐに通知する必要があります。 たとえば、チューナーがあるチャネルから別のチャネルに切り替えた場合、VBI デコーダはチューニング操作の開始時に通知を受け、シグナルが不安定になっている間に一時的にデコードを停止できるようにする必要があります。 チューニング操作が完了すると、VBI デコーダーは、新しいチャネルと、発生した可能性のあるビデオの標準または国/地域コードの変更を通知する必要があります。

ミニドライバーは、クロスバーフィルターを使用して、そのチューナーフィルターから、キャプチャフィルターのアナログビデオ入力ピンにチューニングパケットを伝達する必要があります。 このパケットは、キャプチャフィルターに到達するまでユーザーモードでのみ使用できます。 ミニドライバーはこのチューニングパケットを、ミニドライバーのキャプチャフィルターのアナログビデオ入力ピンの[**TVTUNER\_変更\_INFO**](https://docs.microsoft.com/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-tagks_tvtuner_change_info)構造体と\_して受信します。

また、ミニドライバーは、[ビデオストリーム拡張ヘッダー](video-stream-extended-headers.md)を使用して、チューニングパケットをキャプチャフィルターの VBI 出力ピンに伝達する必要があります。 チェーンとして動作する VBI デコーダーは、同様に拡張ヘッダー情報を入力ピンから出力ピンに伝達する必要があります。

 

 




