---
title: Windows Hardware Error Architecture のコンポーネント
description: Windows Hardware Error Architecture のコンポーネント
ms.assetid: d038f2ce-7012-4b8d-bf2b-a722548a32ca
keywords:
- Windows ハードウェア エラー アーキテクチャ WDK のコンポーネント
- WHEA WDK、コンポーネント
- WDK WHEA、コンポーネントのハードウェア エラー
- WDK WHEA、コンポーネントのエラー
- WDK WHEA のコンポーネント
- 低レベル ハードウェア エラー ハンドラー WDK WHEA
- LLHEHs WDK WHEA
- プラットフォーム固有のハードウェア エラー ドライバー WDK WHEA
- PSHED WDK WHEA
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 3f121486c0b7b207e865f0ab9657a1a0c6cc2f90
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63327382"
---
# <a name="components-of-the-windows-hardware-error-architecture"></a>Windows Hardware Error Architecture のコンポーネント


次の図は、Windows ハードウェア エラー アーキテクチャ (WHEA) の主要なコンポーネントを示します。

![チェンジャー ドライバー、ユーザー モード アプリケーションとサービス、大容量記憶装置とポートのドライバー、およびチェンジャー デバイス間のリレーションシップを示す図](images/wheaarch.gif)

各ハードウェア[エラー ソース](hardware-errors-and-error-sources.md)が検出されたオペレーティング システムでは、対応する*低レベル ハードウェア エラー ハンドラー* (LLHEH)。 LLHEH では、ハードウェアのエラー状態への応答で実行されている最初のオペレーティング システム コードを示します。 LLHEH、割り込みハンドラー、例外ハンドラー、ポーリング ルーチンの場合、またはシステム ファームウェアによって呼び出されるコールバック ルーチンを使用できます。 各 LLHEH は最も適切なソフトウェア モジュールで実装されますそれぞれバス ドライバー; に存在する I/O のバスの。、プラットフォームのトラップ ハンドラーを、オペレーティング システム カーネルまたはハードウェア アブストラクション レイヤー (HAL) に存在することにします。

各 LLHEH は、次のタスクを実行します。

-   ハードウェア エラーを確認します。

-   ハードウェア エラーに関連する使用可能なエラー情報をキャプチャします。

-   オペレーティング システムにハードウェアのエラー状態を報告します。

通常、LLHEHs は、ハードウェアおよびハードウェアのエラー情報を取得するファームウェアと直接対話します。 LLHEHs は、すべてのハードウェア エラーに関連するハードウェアのエラー パケット情報をコンパイルします。 ファームウェアが最初に、ハードウェア エラーを処理場所の場合、対応する LLHEH エラー パケットを取得するファームウェアとやり取りします。 すべて LLHEHs は、一般的なエラー レポート関数をハードウェアのエラー パケット データを渡すことによって、Windows オペレーティング システムのカーネルにハードウェア エラーを報告します。

サービスに、LLHEHs と Windows カーネルの両方を描画、*プラットフォーム固有のハードウェア エラー ドライバー* (PSHED) プラットフォームに固有のエラー情報を収集します。 PSHED では、ハードウェア エラーの基になるプラットフォームの機能を報告するには、オペレーティング システムとプラットフォームのエラー処理機構の詳細を非表示化と、Windows オペレーティング システムに一貫性のあるインターフェイスを公開するの抽象化を提供します。 ハードウェア エラーのリソースを処理するシステム ファームウェア インターフェイスに関連するプラットフォームで、PSHED はファームウェアとやり取りを処理します。 これにより、エラー状態のみにアクセスするコア Windows コンポーネントの登録と見なされるアーキテクチャが使用されるメカニズムを提供する豊富なより詳細なプラットフォーム固有のハードウェアのエラー情報を取得できます。

(X 86、x64、および Itanium) ごとのプロセッサ アーキテクチャは、Microsoft は、コアのエラー処理のアーキテクチャに共通する動作を実装する PSHED を提供します。 プラットフォーム ベンダーは、プラットフォーム固有の機能を活用するよう PSHED にプラグインを提供することで、既定の PSHED 機能を補うことができます。 PSHED のプラグインは、特殊な Windows デバイス ドライバー、PSHED によって呼び出されるコールバック インターフェイスを実装します。 プラグインの PSHED では、補強したり、Microsoft 提供の PSHED の既定の動作をオーバーライドします。

PSHED のプラグインは、ハードウェア プラットフォームのハードウェアのエラー レポートと回復機能をソフトウェア インターフェイスとしてのプラットフォーム ベンダーによって実装されるものです。 プラグイン PSHED はどのようなプライベート インターフェイスを使用して、プラットフォーム ファームウェアと対話できます。 またはメカニズムは、プラットフォーム ベンダーによって定義されます。 これにより、既存のファームウェアを使用して、ハードウェア エラーの処理を続行する、プラットフォーム ベンダーができます。 時間では、Microsoft は、ハードウェア エラー レポートと回復機能を標準化することが必要です。 そのため一般的なエラー処理およびレポート用の PSHED プラグインの必要性が低下することなど PSHED プラグインが標準のハードウェア エラーの処理に加えて追加の値を提供するベンダー固有の機能をサポートするため必要のみになります機能。

プラグインの PSHED を実装する方法の詳細については、次を参照してください。[プラットフォームに固有のハードウェア エラー ドライバー プラグイン](platform-specific-hardware-error-driver-plug-ins2.md)します。

Windows ハードウェアのエラー状態の LLHEH で通知を受けたの作成、[エラー レコード](error-records.md)ハードウェア エラーの状態を説明する標準化された形式でします。 Windows は、ハードウェア エラーの状態を適切に記述するエラー レコードに追加のハードウェア エラー情報に追加できるように、PSHED に呼び出します。 PSHED のプラグインがインストールされているし、場合エラー情報の取得、PSHED で参加に登録されているはさらに PSHED がさらにそのようにプラグインへの呼び出しを補強エラー レコードの情報。 Windows がすべてエラー レコードにハードウェアのエラー情報のコンパイル後に、システム イベント ログにエラー情報を記録し、Event Tracing for Windows (ETW) イベントを発生させることによってユーザー モード アプリケーションを通知します。

特定のハードウェア エラーの状況でオペレーティング システムは、エラーから回復するシステムの再起動が強制されます。 このような場合は、Windows システム イベント ログにエラー情報を記録またはしません、システムの再起動後までのユーザー モード アプリケーションに通知します。 そのため、オペレーティング システムは、システムを再起動する前に、いくつかの形式の不揮発性ストレージにエラー レコードを保存する必要があります。 PSHED では、使用するオペレーティング システムを格納して、システムの再起動中にエラー情報が維持されるように、エラー レコードを取得、インターフェイスを提供します。 PSHED のプラグインがインストールされ、エラー レコードの永続化に参加するが登録されている場合は、プラグインの PSHED はプラットフォーム固有の実装を格納すると、エラー レコードの取得を提供できます。 システムが再起動されると、オペレーティング システムは、システム イベント ログに正しくログインし、ユーザー モード アプリケーションの通知を受け取るように、保存されたエラー レコードを取得します。

WHEA でハードウェア エラーを処理する方法の詳細については、次を参照してください。[エラー処理](error-processing.md)します。

エラー管理アプリケーションのユーザー モードが設定しハードウェア エラーのソース情報を取得、エラーの特定のエラーのソースの処理を構成してように、ハードウェアにハードウェア エラーを挿入に Windows がハードウェア エラー管理 API にも提供しますテストのためのプラットフォームです。

WHEA の管理アプリケーションを実装する方法の詳細については、次を参照してください。 [WHEA 管理アプリケーション](whea-management-applications.md)します。

 

 




