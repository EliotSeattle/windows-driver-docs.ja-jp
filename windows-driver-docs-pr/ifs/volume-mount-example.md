---
title: ボリュームのマウントの例
description: ボリュームのマウントの例
ms.assetid: d6645d05-a945-4454-ac7c-122219bbdc50
keywords:
- フィルター ドライバー WDK ファイル システムのボリュームのマウント プロセス
- ファイル システム フィルター ドライバー WDK ボリュームのマウント プロセス
- WDK のファイル システム ボリュームのマウント
- WDK ファイル システムのボリュームをマウント
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 2eee275923844f0def159692c13e85369457d7a0
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56571384"
---
# <a name="volume-mount-example"></a>ボリュームのマウントの例


## <span id="ddk_volume_mount_example_if"></span><span id="DDK_VOLUME_MOUNT_EXAMPLE_IF"></span>


次の図は、どの cdfs を含むようになりますがすべてのボリュームをマウントする前に示します。 この例では、2 つのフィルター自体にアタッチ cdfs を含むコントロールのデバイス オブジェクト。 (注。Cdfs を含むコントロールのデバイス オブジェクトが含まれるグローバル ファイル システムのキューは表示されません。)

![ボリューム マウントする前に cdfs を示す図](images/cdfsunmounted.png)

次の図には、cdfs を含むボリュームとしてマウントされていない CD-ROM の記憶域デバイスの一般的なドライバー スタックが表示されます。

![ボリューム マウントする前に cd-rom の記憶域デバイス スタックを示す図](images/cdromstack.png)

次の図は、どのようなファイル システム ドライバー スタック、スタックのボリューム、および記憶域デバイス スタックの CD-ROM のように、cdfs を含むファイル システムが CD-ROM デバイスでボリュームをマウントした後を示しています。

![マウントされた cdfs を含むボリュームを示す図](images/cdfsmountedstacks.png)

上記の図に関する注意事項:

-   Cdfs を含むコントロールのデバイス オブジェクトは、ファイル システム ドライバー スタックのベースを形成します。 このスタックは、記憶装置にマウントされていない、直接、Irp を受信できるし、ファイル システム フィルター デバイス オブジェクトを含めることもできます。 フィルターは、ボリュームのマウントを監視するファイル システム コントロール デバイス オブジェクトにアタッチ ([**IRP\_MJ\_ファイル\_システム\_コントロール**](https://msdn.microsoft.com/library/windows/hardware/ff548670)、IRP\_MN\_マウント\_ボリューム) 要求します。 ファイル システム コントロールのデバイス オブジェクトは、名前を指定するために必要です。 これは決してと呼ばれるファイル システム ボリューム デバイス オブジェクトとそれらを区別します。

-   Cdfs を含むボリュームがマウントされた後、CD-ROM の記憶域デバイス スタックの一番上に 2 つ目の記憶域フィルターをアタッチすることですが、図に示す、このフィルターはストレージ d に、ファイル システム スタックから渡される任意の Irp を受信しませんデバイスのスタックです。 ただし、記憶域デバイス スタックに直接送信されるすべての Irp を受け取る。

-   ファイル システムのボリュームがマウントした後、記憶域デバイス スタックは引き続き受信できます Irp 直接に注意してください。 Irp を具体的には、電源 (IRP\_MJ\_電源) は常に、ファイル システム スタックすることはありません、記憶域デバイス スタックを直接送信します。 (したがって、たとえば、ファイル システム フィルター ドライバーする必要がありますディスパッチ ルーチンに登録できない IRP\_MJ\_で電源の**DriverEntry**ルーチン)。

    ただし、Irp を PnP ([**IRP\_MJ\_PNP**](https://msdn.microsoft.com/library/windows/hardware/ff549268)) いずれかのスタックに送信できます。 ファイル システム ボリューム上にチェーンされているフィルター ドライバーは常に成功これら Irp まで [次へ] の下位のドライバー既定ではファイル システムのボリュームのデバイスが、記憶域デバイス スタックまで Irp を渡せるようにします。

 

 




