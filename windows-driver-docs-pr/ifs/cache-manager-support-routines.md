---
title: キャッシュマネージャーのサポートルーチン
description: キャッシュマネージャーのサポートルーチン
ms.assetid: 9ff905d9-8f85-4841-8bf5-437ccc3b3921
ms.date: 09/30/2019
ms.localizationpriority: medium
ms.openlocfilehash: d67eb197c8968c853ca21fc3ed35165d4eee45c0
ms.sourcegitcommit: c23a403b3ebea05bde96067b678a318ca9b0cabe
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/04/2019
ms.locfileid: "71955780"
---
# <a name="cache-manager-support-routines"></a>キャッシュマネージャーのサポートルーチン

次のシステム指定のキャッシュマネージャー関数とマクロは、カーネルモードのファイルシステムとファイルシステムフィルタードライバーによって呼び出すことができます。 これらはアルファベット順に表示されます。

**ヘッダーファイル:** *ntifs*

**プレフィックス: Cc * Xxx***

| 関数またはマクロ | 説明 |
| ----------------- | ----------- |
| **CcCanIWrite** | 呼び出し元がキャッシュされたファイルに書き込むことができるかどうかを判断します。 |
| **CcCoherencyFlushAndPurgeCache** | キャッシュの一貫性を確保するために、キャッシュをフラッシュまたは削除します。 |
| **CcCopyRead** | キャッシュされたファイルからユーザーバッファーにデータをコピーします。 |
| **CcCopyReadEx** | キャッシュされたファイルからユーザーバッファーにデータをコピーします。 操作の i/o バイト数は、発行元のスレッドに対して課金されます。 |
| **CcCopyWrite** | ユーザーバッファーからキャッシュされたファイルにデータをコピーします。 |
| **CcCopyWriteEx** | ユーザーバッファーからキャッシュされたファイルにデータをコピーします。 操作の i/o バイト数は、発行元のスレッドに対して課金されます。 |
| **CcCopyWriteWontFlush** | **Cccopywrite**の呼び出しでコピーされるデータの量が、 *Wait*を**FALSE**に設定して**cccopywrite**を呼び出す場合に、ディスクへの即時フラッシュを必要としないようにするかどうかを決定します。 |
| **CcDeferWrite** | キャッシュされたファイルへの書き込みを延期します。 |
| **CcFastCopyRead** | キャッシュされたファイルからメモリ内のバッファーへの高速コピーを実行します。 |
| **CcFastCopyWrite** | メモリ内のバッファーからキャッシュされたファイルへの高速コピー書き込みを実行します。 |
| **CcFlushCache** | キャッシュされたファイルのすべてまたは一部をディスクにフラッシュします。
| **CcGetDirtyPages** | 指定されたログハンドルに一致するすべてのファイル内のダーティページを検索します。 |
| **CcGetFileObjectFromBcb** | ファイルの固定バッファー制御ブロック (BCB) へのポインターを指定すると、は、そのファイルに対してキャッシュマネージャーが使用しているファイルオブジェクトへのポインターを返します。 |
| **CcGetFileObjectFromSectionPtrs** | キャッシュされたファイルのセクションオブジェクトポインターへのポインターを指定すると、は、キャッシュマネージャーがファイルに使用しているファイルオブジェクトへのポインターを返します。 |
| **CcGetFileObjectFromSectionPtrsRef** | キャッシュされたファイルの SECTION_OBJECT_POINTERS 構造体へのポインターを渡すと、はキャッシュファイルに対してキャッシュマネージャーが使用しているファイルオブジェクトへのポインターを返します。 |
| **CcGetFileSizePointer** | ファイルのファイルオブジェクトへのポインターを指定して、ファイルのサイズを返します。 |
| **CcGetFlushedValidData** | ディスクにフラッシュされたキャッシュファイルの量を決定します。 |
| **CcInitializeCacheMap** | ファイルシステムは、ファイルをキャッシュするためにこのルーチンを呼び出します。 |
| **CcIsFileCached** | ファイルがキャッシュされているかどうかを判断します。 |
| **Ccisruncommand Edirtydata** | マウントされたボリュームに、システムキャッシュ内のダーティデータを含むファイルが含まれているかどうかを判断します。 |
| **Ccisruncommand Edirtydataex** | マウントされたボリュームに、一時ファイルを含む、システムキャッシュ内のダーティデータを含むファイルが含まれているかどうかを判断します。 |
| **CcMapData** | キャッシュされたファイルの指定したバイト範囲をメモリ内のバッファーにマップします。 |
| **CcPinMappedData** | キャッシュされたファイルの指定したバイト範囲をピン留めします。 |
| **CcPinRead** | キャッシュされたファイルの指定したバイト範囲を固定し、ピン留めされたデータをメモリ内のバッファーに読み込みます。 |
| **Cc/Pinwrite** | キャッシュされたファイルの指定したバイト範囲を書き込みアクセス用にピン留めします。 |
| **CcPurgeCacheSection** | キャッシュされたファイルのすべてまたは一部をシステムキャッシュから消去します。 |
| **CcReadAhead** | キャッシュされたファイルで先行読み取り ("遅延読み取り" とも呼ばれます) を実行します。 |
| **CcRemapBcb** | 追加のマップと固定解除を実行する複数の呼び出しによって保持されるように、バッファー制御ブロック (BCB) を追加の時間としてマップします。 |
| **CcRepinBcb** | 次に**Ccunpindata**を呼び出すことによって解放されるのを防ぐために、bcb に追加の時間を固定します。 |
| **CcScheduleReadAhead** | キャッシュされたファイルで先行読み取り ("遅延読み取り" とも呼ばれます) を実行します。 **CcScheduleReadAhead**を直接呼び出すことはできません。代わりに**Ccreadahead**を呼び出してください。 |
| **CcScheduleReadAheadEx** | キャッシュされたファイルで先行読み取り ("遅延読み取り" とも呼ばれます) を実行します。 操作の i/o バイト数は、発行元のスレッドに対して課金されます。 |
| **CcSetAdditionalCacheAttributes** | キャッシュされたファイルで先行読み取り ("遅延読み取り" とも呼ばれます) または書き込み分離 ("レイジー書き込み" とも呼ばれます) を有効または無効にします。 |
| **CcSetAdditionalCacheAttributesEx** | キャッシュされたファイルに対する拡張キャッシュの動作を有効にします。 |
| **CcSetBcbOwnerPointer** | 固定バッファー制御ブロック (BCB) の所有者スレッドポインターを設定します。 |
| **CcSetDirtyPageThreshold** | キャッシュされたファイルのファイルごとのダーティページのしきい値を設定します。 |
| **CcSetDirtyPinnedData** | コンテンツが変更された固定バッファーのバッファー制御ブロック (BCB) をダーティとしてマークします。 |
| **CcSetFileSizes** | サイズが変更されたキャッシュファイルのキャッシュマップとセクションオブジェクトを更新します。 |
| **CcSetLogHandleForFile** | ファイルのログハンドルを設定します。 |
| **Ccsetreadaヘッドの粒度** | キャッシュされたファイルの先読み粒度を設定します。 |
| **CcUninitializeCacheMap** | キャッシュされたファイルのキャッシュを停止します。 |
| **CcUnpinData** | 以前に**Ccmapdata**、 **ccpinread**、または**cc/pinwrite**を呼び出してマップまたは固定された、キャッシュされたファイルデータを解放します。 |
| **CcUnpinDataForThread** | 以前の**CcSetBcbOwnerPointer**の呼び出しによってバッファー制御ブロック (bcb) が変更された、キャッシュされたファイルのページを解放します。 | **CcUnpinRepinnedBcb** | 再ピンされたバッファー制御ブロック (BCB) の固定を解除します。 |
| **CcWaitForCurrentLazyWriterActivity** | 遅延ライターアクティビティの現在のバッチが完了するまで、呼び出し元を待機状態にします。 |
| **Ccゼロデータ** | キャッシュされたファイルまたは noncached ファイル内の指定したバイト範囲をゼロにします。 |

次の**Cc * Xxx*** ルーチンは、キャッシュとの間の転送にメモリ記述子リスト (MDL) インターフェイスを提供します。 これらのルーチンは、主にファイルサーバーを対象としています。 他のすべてのユーザーは、FSRTL および FAのインターフェイスを使用する必要があります。

| 関数 | 説明 |
| -------- | ----------- |
| **Cc/Mdlwrite** | 呼び出し元がファイルにデータを書き込むことができるように、キャッシュされたファイルメモリに直接アクセスできるようにします。 |
| **CcMdlRead** | キャッシュされたファイルメモリへの直接アクセスを提供し、呼び出し元がファイルからデータを読み取ることができるようにします。 |
| **CcMdlReadComplete** | キャッシュされたファイルの**Ccmdlread**によって作成された MDL を解放します。 |
| **CcMdlWriteAbort** | 以前に Ccを呼び出したときに作成された MDL を**Cclwrite**に解放します。 |
| **CcMdlWriteComplete** | **Ccに**よって作成された MDL をキャッシュファイル用に解放します。 |
| **CcMdlRead** | キャッシュされたファイルメモリへの直接アクセスを提供し、呼び出し元がファイルからデータを読み取ることができるようにします。 |
