---
title: フィルター マネージャー モデルの利点
description: フィルター マネージャー モデルの利点
ms.assetid: 8e3449dc-7c78-4f78-97c4-89b20001e91b
keywords:
- フィルターマネージャー WDK ファイルシステムミニフィルター、利点
ms.date: 10/16/2019
ms.localizationpriority: medium
ms.openlocfilehash: b7af1129e8ee5dceacb0171660efe3c32f5b38b2
ms.sourcegitcommit: 2a1c24db881ed843498001493c3ce202c9aa03f1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/16/2019
ms.locfileid: "74128492"
---
# <a name="advantages-of-the-filter-manager-model"></a>フィルター マネージャー モデルの利点

フィルターマネージャーモデルでは、既存のレガシフィルタードライバーモデルよりも次の利点があります。

- **DAX ボリュームに接続する機能。** レガシファイルシステムフィルタードライバーは、直接アクセス (DAX) ボリュームにアタッチできません。

- **フィルターの読み込み順序をより細かく制御できます。** レガシフィルタードライバーとは異なり、ミニパスドライバーはいつでも読み込み、その高度によって決定される適切な場所に接続できます。

- **システムの実行中にアンロードできます。** システムの実行中にアンロードできない従来のフィルタードライバーとは異なり、ミニフィルタードライバーはいつでもアンロードできます。また、必要に応じて、それ自体がアンロードされないようにすることができます。 フィルタマネージャは、すべてのミニフィルタドライバ添付ファイルの安全な削除を同期し、ミニフィルタドライバがアンロードされた後に完了した操作を処理します。

- **必要な操作のみを処理する機能。** フィルターマネージャーでは、フィルター処理に使用する i/o 操作 (IRP ベース、高速 i/o、または FSFilter) の種類をミニフィルタードライバーで選択できるコールバックモデルが使用されます。 ミニフィルタードライバーは、コールバックルーチンが登録されている i/o 要求のみを受信します。 ミニフィルタードライバーは、一意の preoperation または postoperation コールバックルーチン、あるいはその両方を登録できます。また、ページング i/o やキャッシュ i/o など、特定の種類の操作を無視できます。

- **カーネルスタックをより効率的に使用します。** フィルターマネージャーは、使用するカーネルスタックの量を減らすように最適化されており、コールバックモデルにより、スタックへのミニフィルタードライバーの影響が大幅に減少します。 フィルターマネージャーは、スタック内の下位のドライバーによってのみ見られるフィルターによる i/o をサポートすることで、再帰 i/o の影響を軽減します。

- **より少ない冗長コード。** フィルターマネージャーを使用すると、複数のミニフィルタードライバーで使用する名前の生成とキャッシュファイル名のインフラストラクチャを提供するなど、さまざまな方法でミニフィルタードライバーに必要なコードの量を減らすことができます。 フィルターマネージャーはボリュームにアタッチし、ボリュームが使用可能になったときにミニフィルタードライバーに通知します。 フィルターマネージャーは、マルチプロセッサシステムをサポートするように最適化されています。これにより、ロックが効率的になり、エラーが発生しにくくなります。

- **複雑さが軽減されます。** フィルターマネージャーは、名前付け、コンテキスト管理、ユーザーモードとカーネルモード間の通信、ファイルシステム間のマスクの違いなど、一般的な機能のサポートルーチンを提供することで、i/o 要求のフィルター処理を簡略化します。 フィルターマネージャーは、保留中の Irp、列挙、ファイルシステムスタックへのアタッチなど、ミニフィルタードライバーに代わって特定のタスクを処理します。

- **新しい操作の追加が容易になりました。** ミニフィルタードライバーは処理する i/o 操作に対してのみ登録されるため、新しい操作のサポートをフィルターマネージャーに追加して、既存のミニフィルタードライバーを中断することはできません。

- **複数のプラットフォームのサポートの強化。** フィルタマネージャーをサポートする任意のバージョンの Windows で、ミニフィルタードライバーを実行できます。 実行時に使用できない i/o 操作をミニフィルタードライバーが登録した場合、フィルターマネージャーは、その操作に対してミニフィルタードライバーを呼び出しません。 ミニフィルタードライバーは、関数が使用可能かどうかをプログラムによって判断できます。また、フィルターマネージャー構造は拡張可能であるように設計されています。

- **ユーザーモードアプリケーションのサポートが強化されています。** フィルターマネージャーは、ユーザーモードのサービスと、ミニフィルタードライバーを操作するプログラムに共通の機能を提供します。 フィルターマネージャーのユーザーモードライブラリである Filterlib .dll を使用すると、ユーザーモードサービスまたはコントロールプログラムとミニフィルタードライバーの間の通信が可能になります。 Filterlib .dll には、管理ツールのインターフェイスも用意されています。
