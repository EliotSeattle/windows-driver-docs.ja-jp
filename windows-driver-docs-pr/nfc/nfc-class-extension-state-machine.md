---
title: NFC クラスの拡張機能のステート マシン
description: NFC CX のステート マシンの内部設計は、以下に示します。
ms.assetid: A131F881-C05A-44FF-A7A6-FD40BA344BD0
keywords:
- NFC
- 近距離無線通信
- proximity
- 近距離近接通信
- NFP
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 7f168eaf85514bea5602510b785d85707d359c76
ms.sourcegitcommit: fb7d95c7a5d47860918cd3602efdd33b69dcf2da
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2019
ms.locfileid: "67383569"
---
# <a name="nfc-class-extension-state-machine"></a>NFC クラスの拡張機能のステート マシン


NFC CX のステート マシンの内部設計は、以下に示します。 NFC CX および状態遷移が発生する内部および外部のイベントで指定されたさまざまな状態はダイアグラムにキャプチャされます。 いくつかの状態間のいくつかの遷移は、読みやすさについては、図に表示されないことに注意してください。 NCI RF のステート マシンへのマッピングと共に、状態は以下でさらに説明します。

![nfc cx のステート マシン](images/statemachine.png)

| 状態             | 説明                                                                                                                                                                                                                                                                                                                                             |
|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| StateIdle         | NFC デバイスの電源が入って、NCI のコマンドは、コント ローラーに送信されませんが、または NCI 操作中に回復不能なエラーが発生した時 StateIdle を入力します。                                                                                                                                                                                         |
| StateInit         | StateInit が入力したときにハードウェア\_NFC CX に送信されるアクションを開始します。 NCI のリセット、NCI の初期化と NFC チップセットの構成がこの状態で行われます。 後続のすべての状態 (以下のこのテーブルで) この状態の完了後に発生します。                                                                                                          |
| StateRfIdle       | NFC コント ローラーは正常に初期化されますが、RF ポーリング ループが無効になっている (つまり、両方をポーリングおよびリッスン フェーズが無効または未構成)。 NFC の操作が必要ないときに、デバイスは StateRfIdle を入力します。 この状態とチップセット、このタイマーの有効期限は時に初期化されない post で UMDF アイドル状態検出のタイマーが有効になっています。 |
| StateRfDiscovery  | NFC コント ローラーは、いずれかのポーリング用に構成された、検出のループがやフェーズをリッスンします。 いくつかの検出のパラメーターの構成は、検出のループを有効にする前にこの状態でも発生します。                                                                                                                                                    |
| StateRfDiscovered | RF のリモート エンドポイントが検出され、選択されているし、RF インターフェイスが通信するデバイスのホストのアクティブ化されました。 これは、移行の状態です。                                                                                                                                                                                      |
| StateRfDataXchg   | デバイスのホストと RF リモート エンドポイントのいずれかのポーリングでデータを交換する積極的にまたはリッスン モード。 この状態は、両方の状態 RFST をについて説明します\_ポーリング\_アクティブまたは RFST\_リッスン\_NCI RF のステート マシンでアクティブにします。                                                                                                                                             |
| StateRecovery     | NFC デバイスには、コアが送信されるときに、この状態が入力された\_RSET\_ホストに NTF NCI 操作中にタイムアウトが発生する場合、致命的な I/O エラーまたはします。 NFC CX は、リセットして、コント ローラーを再初期化して NCI の回復を実行しようとします。 通常の操作の再開、復旧が成功した場合、それ以外の場合、ステート マシンの移行 StateIdle にします。  |
| StateShutdown     | NFC デバイスがシャット ダウンします。 これは、移行の状態です。 この状態を完了すると、ステート マシンは StateIdle に遷移します。                                                                                                                                                                                                       |

 

 

 
## <a name="related-topics"></a>関連トピック
[NFC のデバイス ドライバー インターフェイス (DDI) の概要](https://docs.microsoft.com/windows-hardware/drivers/ddi/content/index)  
[NFC クラスの拡張機能 (CX) リファレンス](https://docs.microsoft.com/windows-hardware/drivers/ddi/content/index)  

