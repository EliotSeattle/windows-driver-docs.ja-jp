---
title: タグの書き込み
description: タグの書き込み
ms.assetid: 916150D9-9A98-4463-81BE-7F46DF2694F4
keywords:
- NFC
- 近距離無線通信
- proximity
- 近距離近接通信
- NFP
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 5b61266fffa648c57f55c630d2e5cd67c1cf508f
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63373596"
---
# <a name="tag-writing"></a>タグの書き込み


タグの書き込みは、カテゴリを指定します。一般に、NFC、および All です。 各カテゴリ内で、ドライバーは特定の種類のタグのみを認識します。

これらは、NearFieldProximity の任意のタグに書き込まれるメッセージを許可する特別なパブリケーションです。 タグの任意の既存のペイロードを上書きする必要があります。 追加 NFC に対してしかセマンティクスを定義します。 クライアントは、上書きする代わりに追加する場合は NDEF の元のメッセージを含む NDEF ペイロードを構築する必要があり、"NDEF:WriteTag"のパブリケーションに配置します。 これが必要です (では適用されません) を 0 個または 1"\*: タグ書き込み"特定の時点でアクティブになるパブリケーション。

## <a name="general-tag-writing"></a>一般的なタグの書き込み


タグの書き込みは、NFC が有効でない NFP プロバイダーの省略可能な機能です。 ドライバーは、次のタグの種類のパブリケーションのみを認識可能性があります。

-   “WindowsUri:WriteTag”
-   “WindowsMime:WriteTag”
-   「Windows: タグ書き込み」

## <a name="nfc-tag-writing"></a>NFC タグの書き込み


タグの書き込みのサポートは、NFC 対応 NFP プロバイダーに必要です。 これらの要件を満たす必要があります。

NFC として近接テクノロジが提供されると場合、ドライバーは次のタグの種類のパブリケーションのみを認識する必要があります。

-   “WindowsUri:WriteTag”
-   “WindowsMime:WriteTag”
-   「Windows: タグ書き込み」
-   "NDEF:WriteTag"

NFC フォーラムの仕様に従って、厳密な NDEF エンコードの規則が使用されます。 たとえば、NDEF メッセージ フラグメントをする必要があります書き込まれません (次の有効な NDEF メッセージも)。

**注**  の NFC タグ、タグが書式設定された NDEF 場合はメッセージ用にパブリッシュされた\*します。タグを書き込み、プロバイダーの NDEF にタグを書式設定し、ペイロードを書き込む必要があります。

 

## <a name="all-tag-writing"></a>タグのすべての書き込み


タグの書き込みが NFP プロバイダーによってすべてのサポートされている、ドライバーはすべての一覧表示されている要件に満たす必要があります。

### <a name="required-actions"></a>必要な操作

-   MUST NOT ドライバーでは、いずれかを認識"\*: タグ書き込み"サブスクリプション。
-   1 つ以上の場合"\*: タグ書き込み"パブリケーションが有効になっているし、ドライバーが使用できるか、MUST NOT タグの既存のペイロードで読み取られるその他のサブスクリプションに一致する目的で十分な領域を持つ書き込み可能なタグを検出します。 これにより、他のアプリまたはタグでメッセージをサブスクライブがサービスの切断をタグの記述アプリです。
-   MUST NOT ドライバーの送信 NFP の NFC が有効なプロバイダーは、"\*: タグ書き込み"パブリケーション (、NFC フォーラム タグ) ではなく、NFC フォーラムのデバイスに接続するとします。
-   1 つ以上の場合"\*: タグ書き込み"パブリケーションは、ドライバーが、ペイロードの少なくとも 1 つの使用可能な十分な領域を持つ書き込み可能なタグを検出した時点で有効になっている、ドライバーに書き込む必要が、ペイロードの 1 つだけタグ。 o は、複数のパブリケーションはアクティブ、小さくすれば、タグに書き込むことが最も最近作成または有効になっている"\*: タグ書き込み"パブリケーションは書き込まれる 1 つである必要があります。
-   場合、"\*: タグ書き込み"場合でもに、ドライバーが既に説明したとおりに、ドライバーする必要がありますをタグに、ペイロードを書き込むパブリケーションが作成または処理中、ドライバーがペイロードの使用可能な十分な領域を持つ書き込み可能なタグとの通信を有効になっている、タグ。
-   ドライバーは、以前の内容が上書きされるようにタグを記述する必要があります。
-   場合、"\*: タグ書き込み"ペイロードが正常に作成、タグに、ドライバーをトリガーする必要があります、 [ **IOCTL\_NFP\_取得\_次\_送信\_メッセージ**](https://msdn.microsoft.com/library/windows/hardware/jj853320)そのパブリケーション (上で指定した) として処理します。

 

 
## <a name="related-topics"></a>関連トピック
[NFC のデバイス ドライバー インターフェイス (DDI) の概要](https://msdn.microsoft.com/library/windows/hardware/mt715815)  
[フィールドの近接 DDI 参照の近く](https://msdn.microsoft.com/library/windows/hardware/jj866056)  

