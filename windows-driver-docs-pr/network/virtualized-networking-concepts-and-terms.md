---
title: 仮想ネットワークの概念と用語
description: 仮想ネットワークの概念と用語
ms.assetid: 467996B2-9319-47F9-BAEB-5AC1F20B6E01
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: efec1cbf7fdbb0c5d3f0fa9dcd150d60640ea041
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56553335"
---
# <a name="virtualized-networking-concepts-and-terms"></a>仮想ネットワークの概念と用語


次の一覧は、主要な概念と、ネットワーク仮想化のセクションで使用される用語の定義を示しています。 このセクションの他のトピックを読む前に、これらの用語について理解しておくことをお勧めします。

<a href="" id="child-partition"></a>子パーティション  
HYPER-V で子パーティションは、ソフトウェア ベース仮想マシン (VM) ホスト コンピューターの物理リソースへのアクセスを特権なしにします。

親パーティションを介して各子パーティションが作成されます。 HYPER-V ホスト コンピューターで実行する 1 つまたは複数の子パーティションがあります。 各子パーティションでは、ゲスト オペレーティング システムをホストします。

一般に、子パーティションでは、物理的なハードウェア リソースに直接アクセスすることはありませんし、仮想デバイスとリソースの仮想ビューが表示されます。 VM バス (VMBus)、またはこれらの要求が処理されますが親パーティションに、ハイパーバイザー、仮想デバイスへの要求がリダイレクトされます。 さらに、子パーティションは、他のパーティションを作成することはできません。

**注**  以降 Windows Server 2012 では、子パーティションはシングル ルート I/O 仮想化 (SR-IOV) をサポートする物理ネットワーク アダプターのリソースに直接アクセスします。

 

<a href="" id="emulated-network-adapter"></a>エミュレートされたネットワーク アダプター  
HYPER-V 子パーティションで実行されているゲスト オペレーティング システムで公開されている HYPER-V の拡張可能スイッチ イーサネット アダプター。 エミュレートされたネットワーク アダプターには、VM ネットワーク アダプターの一種です。 エミュレートされたネットワーク アダプターでは、Intel のネットワーク アダプターを模倣し、拡張可能スイッチ ポートとの間のパケットを転送するハードウェア エミュレーションを使用します。

このアダプターは、Windows XP、Windows Vista、または以降のバージョンの Windows ゲスト オペレーティング システムで公開されます。 このアダプターは、非 Windows オペレーティング システムであるゲスト オペレーティング システムにも公開されます。

<a href="" id="external-extensible-switch-"></a>外部の拡張可能スイッチ   

仮想イーサネットは、HYPER-V 親パーティション、1 つ以上の HYPER-V 子パーティション、およびホストの物理ネットワーク インターフェイスの間でパケットをルーティングに切り替えます。 この種類のスイッチでは、送信または受信、HYPER-V のすべてのパーティションと、ホストの物理ネットワーク インターフェイスの間にパケットを許可します。

また、アプリケーションと、管理オペレーティング システムで実行されているドライバーが送信または受信を介してこの種類のスイッチ パケット。

<a href="" id="external-network-adapter"></a>外部ネットワーク アダプター  
HYPER-V 親パーティションで実行されている管理オペレーティング システムで公開されている HYPER-V の拡張可能スイッチ イーサネット アダプター。 外部ネットワーク アダプターは、ホスト上の 1 つまたは複数の物理ネットワーク アダプターにバインドされます。

外部ネットワーク アダプターでは、HYPER-V パーティションと、ホストの物理ネットワーク インターフェイス間でパケットをルーティングします。

**注**  拡張可能スイッチの各インスタンスは複数の外部ネットワーク アダプターをサポートしています。

 

<a href="" id="extensible-switch-team"></a>拡張可能スイッチ チーム  
これは、拡張可能スイッチの外部ネットワーク アダプターが NDIS マルチプレクサー (マルチプレクサー) の中間ドライバーの仮想ミニポート端にバインドされている構成です。 MUX 中間ドライバーは、ホスト上の 1 つまたは複数の物理ネットワーク チームにバインドされます。

この構成で拡張可能スイッチ拡張機能は、チーム内のすべてのネットワーク アダプターに公開されます。 これにより、転送拡張機能が拡張可能スイッチのドライバー スタックを構成し、チーム内の個々 のネットワーク アダプターの使用を管理するの。 たとえば、拡張機能では、個々 のアダプターに送信されるパケットを転送することによって、over、チーム分散フェールオーバー (LBFO) のソリューション ロードのサポートを提供できます。 このような拡張機能と呼ばれる、*チーミング プロバイダー*します。

詳細については、[NDIS MUX 中間ドライバー](ndis-mux-intermediate-drivers.md)を参照してください。

<a href="" id="guest-operating-system"></a>ゲスト オペレーティング システム  
HYPER-V 子パーティションで実行されているオペレーティング システム。 各子パーティションでは、1 つだけのオペレーティング システムをホストできます。 ただし、多くのさまざまなオペレーティング システムの場合は、子パーティションでホストされていることができます。 これには、Windows と Linux の異なるバージョンが含まれます。

<a href="" id="hypervisor"></a>ハイパーバイザー  
HYPER-V では、ハイパーバイザーは、物理ハードウェアと、HYPER-V パーティションで実行されている 1 つまたは複数のオペレーティング システム間で実行されるソフトウェアのレイヤーです。

ハイパーバイザーの主な目的と呼ばれる分離された実行環境を提供する*パーティション*します。 ハイパーバイザーでは、一連のハードウェア リソースをこのようなメモリ、デバイス、および CPU サイクルの各パーティションを提供します。 ハイパーバイザーでは、制御し、各パーティションから基になるハードウェアへのアクセスを介しします。

<a href="" id="hyper-v-extensible-switch"></a>HYPER-V 拡張可能スイッチ  
管理オペレーティング システムで実行されている仮想イーサネット スイッチ。 拡張可能スイッチの各インスタンスは、HYPER-V 拡張可能スイッチのネットワーク アダプターに接続されているポート間のパケットをルーティングします。

詳細については、[Hyper-v 拡張可能スイッチ](hyper-v-extensible-switch.md)を参照してください。

**注**  NDIS 6.30 以降のバージョンの NDIS で HYPER-V 拡張可能スイッチがサポートされています。

 

<a href="" id="hyper-v-extensible-switch-extension"></a>HYPER-V 拡張可能スイッチの拡張機能  
HYPER-V 拡張可能スイッチの拡張機能は、拡張可能スイッチのドライバー スタックにアタッチする NDIS フィルター ドライバーです。 アタッチされると、拡張機能できますキャプチャ、フィルター、またはネットワーク パケットは、NDIS Oid を転送します。 パケットと Oid は、拡張可能スイッチ ポートに接続されているネットワーク アダプターに転送できます。

NDIS 6.30 以降のバージョンの NDIS では、HYPER-V 拡張可能スイッチの拡張機能がサポートされています。

**注**  Windows フィルタ リング プラットフォーム (WFP) は、インボックスの拡張可能スイッチ拡張機能 (Wfplwfs.sys) をフィルター処理を提供します。 この拡張機能は、WFP フィルターまたは HYPER-V 拡張可能スイッチのデータ パスに沿ったパケットをインターセプトするコールアウト ドライバーを使用します。 これにより、フィルターまたはコールアウト ドライバー WFP 管理とシステム関数を使用してパケット検査または変更を実行します。 WFP の概要については、[Windows フィルタ リング プラットフォーム](porting-packet-processing-drivers-and-apps-to-wfp.md)を参照してください。

 

<a href="" id="hyper-v-extensible-switch-network-adapter"></a>HYPER-V 拡張可能スイッチのネットワーク アダプター  
HYPER-V 拡張可能スイッチによって管理されているネットワーク アダプター。 これらのネットワーク アダプターは、拡張可能スイッチのポートに接続し、次の種類のアダプターで構成されます。

-   外部および内部のネットワーク アダプター、HYPER-V 親パーティションで実行されている管理オペレーティング システムで公開されています。

-   代理またはエミュレートされた VM ネットワーク アダプターを HYPER-V 子パーティションで実行されているゲスト オペレーティング システムで公開されます。

<a href="" id="internal-extensible-switch"></a>内部の拡張可能スイッチ  
仮想イーサネットは、HYPER-V 親パーティションと 1 つ以上の HYPER-V 子パーティションの間でルーティングするパケットを切り替えます。 この種類のスイッチでは、ホスト上の物理ネットワーク インターフェイスからパケット トラフィックを除外します。

また、アプリケーションと、管理オペレーティング システムで実行されているドライバーが送信または受信を介してこの種類のスイッチ パケット。

<a href="" id="internal-network-adapter"></a>内部ネットワーク アダプター  
HYPER-V 親パーティションで実行されている管理オペレーティング システムで公開されている HYPER-V の拡張可能スイッチ イーサネット アダプター。 内部ネットワーク アダプターを送信または HYPER-V のすべてのパーティション間でパケットを受信します。 ただし、内部ネットワーク アダプターでは、ホストの物理ネットワーク インターフェイスにバインドされていません。

<a href="" id="i-o-memory-management-unit--iommu-"></a>I/O メモリ管理ユニット (IOMMU)  
IOMMU は、物理メモリのアドレスを子パーティションで使用されるアドレスに再マップするために使用されます。 IOMMU がプロセッサによって使用されるメモリ管理のハードウェアとは独立して動作します。

<a href="" id="load-balancing-failover--lbfo--team"></a>負荷分散チームのフェールオーバー (LBFO)  
これは、LBFO プロバイダーの仮想ミニポート エッジに拡張可能スイッチの外部ネットワーク アダプターがバインドされて構成です。 LBFO プロバイダー自体は、1 つまたは複数の物理ネットワーク アダプターのチームにバインドできます。

この構成で拡張可能スイッチ拡張機能は、ネットワーク アダプターとしてを基になる仮想ミニポート エッジのみに公開されます。 これにより、複数の物理ネットワーク アダプターにバインドして、LBFO ソリューションをサポートするプロバイダーです。 これらのアダプターは、拡張可能スイッチのドライバー スタックで実行されている転送拡張機能で管理されていません。

<a href="" id="management-operating-system"></a>管理オペレーティング システム  
HYPER-V 親パーティションで実行されているオペレーティング システム。 親パーティションは、ホスト コンピューターで実行されているオペレーティング システムを実行します。 Hyper-v では、ホスト コンピューターが x64 を実行する必要がありますのバージョンの Windows Server 2008 または Windows Server の以降のバージョン。

<a href="" id="network-virtual-service-client--netvsc--driver"></a>ネットワークの仮想サービス クライアント (NetVSC) ドライバー  
HYPER-V 子パーティションのゲスト オペレーティング システムで実行されている NDIS ドライバー。 NetVSC 公開と呼ばれる仮想化されたネットワーク アダプター、 *VM ネットワーク アダプター*します。

NetVSC では、スイッチによって管理されるネットワーク インターフェイス上でパケットを転送するように、HYPER-V 拡張可能スイッチにアクセスします。 NetVSC は、関連する NetVSP ドライバーを VMBus 経由でメッセージを渡すことによって。 このドライバーは、HYPER-V 親パーティションの管理オペレーティング システムで実行されます。

ほとんどの場合、NetVSC は送信し、HYPER-V 拡張可能スイッチのポートに接続することでパケットを受信します。 ただし、SR-IOV 対応インターフェイスをサポートする物理ネットワーク アダプターの仮想機能 (VF) を接続する、NetVSC を構成する可能性があります。 ここで、NetVSC は送信し、基になる物理アダプター経由で直接パケットを受け取ります。

<a href="" id="network-virtual-service-producer--netvsp--driver"></a>ネットワークの仮想サービスのプロデューサー (NetVSP) ドライバー  
HYPER-V 親パーティションの管理オペレーティング システムで実行されている NDIS ドライバー。 このドライバーは、HYPER-V 子パーティションでネットワーク アクセスをサポートするためにサービスを提供します。

<a href="" id="nic-switch"></a>NIC のスイッチ  
NIC のスイッチは、シングル ルート I/O 仮想化 (SR-IOV) をサポートするネットワーク アダプターのハードウェア コンポーネントです。 アダプターの物理ネットワーク インターフェイスと物理機能 (PF) と、アダプターの 1 つまたは複数の VFs 間スイッチのブリッジ ネットワーク トラフィック。

<a href="" id="partition"></a>パーティション  
パーティションは、ハイパーバイザーによって管理されます。 各パーティションは、プロセッサおよびメモリ リソースの分離の論理単位を表します。 これにより、分離された複数のオペレーティング システムを 1 つのハードウェア プラットフォームを共有できます。

ハイパーバイザーでは、ホスト コンピューター上のメモリとデバイスのアクセスのポリシーも管理します。 これらのポリシーは、親と子パーティションの異なるです。

<a href="" id="parent-partition"></a>親パーティション  
HYPER-V では、親パーティションは、ホスト コンピューターの最初のパーティションです。 このパーティションには、メモリとデバイスへのアクセスなど、ホスト コンピューターの物理リソースへのアクセスは特権します。 さらに、親パーティションはハイパーバイザーを開始すると、子パーティションを作成します。

ホスト コンピューターで HYPER-V を実行する 1 つだけの親パーティションがあります。 親パーティションは、管理オペレーティング システムをホストします。

**注**  親パーティションとも呼ばれますが、*ルート*パーティション。

 

<a href="" id="physical-function--pf-"></a>物理機能 (PF)  
シングル ルート I/O 仮想化 (SR-IOV) インターフェイスをサポートする、PCI Express (PCIe) 関数。 SR-IOV は、同じ PCIe 物理ハードウェア リソースを共有する複数の Vm を有効にする、PCIe インターフェイスを拡張します。 PF には、その PCI 構成領域で PCIe SR-IOV 対応の拡張機能の構造が含まれています。

<a href="" id="pf-vf-backchannel"></a>PF/VF Backchannel  
PCIe 仮想機能 (VF) のミニポート ドライバーと PCIe 物理機能 (PF) 間でのソフトウェア ベースのプライベート通信インターフェイス。 各 VF ミニポート ドライバーは、PF ミニポート ドライバーに、バック チャネル経由で要求を発行できます。 PF のミニポート ドライバーは、個々 の VF のミニポート ドライバーのバック チャネル経由で状態の通知を発行できます。

バック チャネル インターフェイスを介して PF と VF のミニポート ドライバーの間で交換されるデータの使用では、 *VF 構成ブロック*します。 各 VF 構成ブロックは、各ブロックに独自の書式設定、長さ、およびブロック識別子がである、プロセス間通信 (IPC) メッセージと似た概念です。 独立系ハードウェア ベンダー (IHV) は、PF と VF ミニポート ドライバーの 1 つ以上の VF 構成ブロックを定義できます。

<a href="" id="private-extensible-switch-"></a>プライベートの拡張可能スイッチ   
仮想イーサネットは、1 つ以上の HYPER-V 子パーティション間でルーティングするパケットを切り替えます。 この種類のスイッチでは、HYPER-V 親パーティションと、ホストの物理ネットワーク インターフェイスからパケット トラフィックを除外します。

**注**  アプリケーションとドライバーが、管理オペレーティング システムで動作することはできません送信またはこの種類のスイッチを経由してパケットを受信します。

 

<a href="" id="single-root-i-o-virtualization--sr-iov-"></a>シングル ルート I/O 仮想化 (SR-IOV)  
SR-IOV は、PCIe ネットワーク アダプターをパーティション分割 1 物理機能 (PF) にメソッドと 1 つまたは複数の仮想機能 (VF) です。 アダプターの各関数には、一意の PCIe 要求者 ID が割り当てられます これにより、アダプターはメモリを適用し、適切な PF または VF に直接別のネットワーク トラフィックのストリームを配信できるように、翻訳を中断できます。 HYPER-V 拡張可能スイッチ コンポーネントを介してネットワーク トラフィックのルーティングを回避するには、SR-IOV 仮想化されたネットワーク環境入出力のオーバーヘッド削減します。

詳細については、[Single Root I/O Virtualization (SR-IOV)](single-root-i-o-virtualization--sr-iov-.md)を参照してください。

**注**  NDIS 6.30 以降のバージョンの NDIS で SR-IOV がサポートされています。

 

<a href="" id="synthetic-data-path"></a>合成データ パス  
ゲスト オペレーティング システムと、管理オペレーティング システムで HYPER-V 拡張可能スイッチのコンポーネントで公開されている VM ネットワーク アダプター間のネットワークのデータ パス。

<a href="" id="synthetic-network-adapter"></a>統合ネットワーク アダプター  
HYPER-V 子パーティションで実行されているゲスト オペレーティング システムで公開されている HYPER-V の拡張可能スイッチ イーサネット アダプター。 統合ネットワーク アダプターには、VM ネットワーク アダプターの一種です。 VM で実行されているネットワークの仮想サービス クライアント (NetVSC) は、この統合ネットワーク アダプターを公開します。 NetVSC は、関連付けられている NetVSP ドライバーに VM バス (VMBus) 経由でと、拡張可能スイッチ ポートのパケットを転送します。

このネットワーク アダプターは、Windows Vista または Windows の以降のバージョンであるゲスト オペレーティング システムで公開されます。

<a href="" id="virtual-function--vf-"></a>仮想機能 (VF)  
SR-IOV をサポートするネットワーク アダプター上の PF に関連付けられている PCIe 関数。 VF PF と同じ PF. に関連付けられているその他の VFs 物理のイーサネット ポートなど、アダプターの 1 つまたは複数の物理リソースを共有します。

<a href="" id="vf-data-path"></a>VF データ パス  
ゲスト オペレーティング システムと、SR-IOV ネットワーク アダプターに VF で公開されている VM ネットワーク アダプター間のネットワークのデータ パス。 このデータ パスで VM ネットワーク アダプターは、ゲスト オペレーティング システムで VF のネットワーク アダプターとチーミングします。 VF のミニポート ドライバーでは、VF に VM ネットワーク アダプターとの間のパケットを転送します。 NIC は、インターフェイス アダプターの物理ネットワークに VF との間のパケットの転送し、SR-IOV ネットワーク アダプターに切り替えます。

<a href="" id="vf-network-adapter"></a>VF のネットワーク アダプター  
VF のゲスト オペレーティング システムで公開されている仮想ネットワーク アダプター。 リソースは、VF 用に割り当てるし、子パーティションに、そのパーティションのゲスト オペレーティング システムで VPCI バス ドライバーは VF のネットワーク アダプターを公開します。 VPCI バス ドライバーでは、このアダプターの VF ミニポート ドライバーも読み込みます。

<a href="" id="virtual-machine--vm-"></a>仮想マシン (VM)  
ソフトウェアに実装され、物理ホスト コンピューターでホストされている仮想ゲスト コンピューター。 仮想マシンは、自己完結型の隔離ソフトウェア環境でのネットワーク アダプター、プロセッサからの完全なハードウェア システムをエミュレートします。 これにより、互換性のないオペレーティング システムの同時実行操作ができます。

各ゲスト オペレーティング システムは、隔離されたソフトウェア仮想マシンで実行されます。

**注**  で、HYPER-V 子パーティションは、VM でとも呼ばれます。

 

<a href="" id="virtual-machine-bus--vmbus-"></a>仮想マシン バス (VMBus)  
パーティション間で HYPER-V の親と子コントロールとデータのメッセージを通過する仮想通信バスです。 子パーティションがホスト コンピューター上の物理リソースへのアクセスは、仮想サービス クライアント (VSC) と仮想サービス プロバイダー (VSP) コンポーネントの間、VMBus 経由で渡されるメッセージを通じて行われます。

<a href="" id="virtual-machine--vm--network-adapter"></a>仮想マシン (VM) ネットワーク アダプター  
HYPER-V 子パーティションのゲスト オペレーティング システムで公開されている HYPER-V 拡張可能スイッチ仮想ネットワーク アダプター。

VM のネットワーク アダプターには、次の仮想化の種類がサポートされています。

-   VM のネットワーク アダプターのネットワーク アダプターの仮想化が代理可能性があります (*統合ネットワーク アダプター*)。 この場合、VM で実行されているネットワークの仮想サービス クライアント (NetVSC) は、この仮想ネットワーク アダプターを公開します。 NetVSC VM バス (VMBus) 経由でと、拡張可能スイッチ ポートのパケットを転送します。

-   VM のネットワーク アダプターの物理ネットワーク アダプターの仮想化がエミュレートされた可能性があります (*エミュレートされたネットワーク アダプター*)。 この場合、VM のネットワーク アダプターでは、Intel のネットワーク アダプターを模倣しと拡張可能スイッチ ポートのパケットを転送するようにハードウェアのエミュレーションを使用します。

VM のネットワーク アダプターは、HYPER-V ネットワークの外部、内部、またはプライベート インターフェイスへのアクセスを構成できます。

<a href="" id="virtual-machine-queue--vmq-"></a>仮想マシン キュー (VMQ)  
VMQ 対応のネットワーク アダプターでは、DMA を使用して、VM メモリに直接すべての着信フレームを転送します。 VMQ は、複数のプロセッサ間で複数の Vm のネットワーク トラフィックの処理を分散することによってネットワーク スループットも向上します。

詳細については、[仮想マシン キュー (VMQ)](virtual-machine-queue--vmq-.md)を参照してください。

**注**  NDIS 6.20 が動作し、以降のバージョンの NDIS で VMQ がサポートされています。

 

<a href="" id="virtual-pci--vpci--driver"></a>仮想 PCI (VPCI) ドライバー  
HYPER-V 子パーティションのゲスト オペレーティング システムで実行されている PCI バス ドライバー。 このドライバーでは、ゲスト オペレーティング システムの仮想ネットワーク アダプターとして、VF を公開します。

VPCI ドライバーでは、HYPER-V VSC し、HYPER-V 親パーティションの管理オペレーティング システムで実行されている VPCI VSP 通信します。 VMBUS を介して VPCI VSP と VSC コンポーネント間の通信が行われます。

VPCI インターフェイスの詳細については、[GUID\_PCI\_VIRTUALIZATION\_インターフェイス](https://msdn.microsoft.com/library/windows/hardware/hh451143)を参照してください。

<a href="" id="virtualization-stack"></a>仮想化スタック  
作成と、HYPER-V でのパーティションを子の実行を管理するソフトウェア コンポーネントのコレクション。 仮想化スタックでは、ホスト コンピューター上のハードウェア リソースへの子パーティションによって、アクセスを管理します。 仮想化スタックは、HYPER-V 親パーティションで実行されます。

 

 





