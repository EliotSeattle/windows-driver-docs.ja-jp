---
title: ミニポート ドライバー
description: ミニポート ドライバー
ms.assetid: d0b8f143-2966-4338-9d2f-96e7e9216b3a
keywords:
- ミニポートドライバー WDK ネットワーク、アーキテクチャ
- NDIS ミニポートドライバー WDK、アーキテクチャ
- コネクションレスドライバー WDK ネットワーク
ms.date: 11/26/2018
ms.localizationpriority: medium
ms.openlocfilehash: ae2096701724fbdfb1f14d908c5eef850b54dc1a
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72844365"
---
# <a name="miniport-drivers"></a>ミニポート ドライバー

*NDIS ミニポートドライバー*には、次の2つの基本的な機能があります。

-   NIC を介したデータの送受信を含む、ネットワークインターフェイスカード (NIC) の管理。

-   フィルタードライバー、中間ドライバー、プロトコルドライバーなど、上位レベルのドライバーとのやり取り。

ミニポートドライバーは、NDIS ライブラリを介して、Nic および上位レベルのドライバーと通信します。 NDIS ライブラリでは、ミニポートドライバーが呼び出す必要があるすべてのオペレーティングシステム関数をカプセル化する関数の完全なセット (**Ndism * xxx*** およびその他の**NDIS * xxx*** 関数) がエクスポートされます。 さらに、ミニポートドライバーは、NDIS が独自の目的のため、または上位レベルのドライバーに代わってミニポートドライバーにアクセスするために、一連のエントリポイント (*Miniportxxx*関数) をエクスポートする必要があります。

> [!NOTE]
> NDIS ドライバースタックと、4つのすべての NDIS ドライバーの種類の関係を示す図の詳細については、「 [Ndis ドライバースタック](ndis-driver-stack.md)」を参照してください。

次の送信および受信操作は、ミニポートドライバーと NDIS および上位レベルのドライバーとの相互作用を示しています。

- トランスポートドライバーは、送信するパケットを持っている場合、ndis ライブラリによってエクスポートされた**ndis * Xxx*** 関数を呼び出します。 次に、ミニポートドライバーによってエクスポートされた適切な*Miniportxxx*関数を呼び出すことによって、ミニポートドライバーにパケットを渡します。 次に、適切な**Ndis * Xxx*** 関数を呼び出すことによって、ミニポートドライバーがパケットを送信用の NIC に転送します。

- NIC が自身宛てのパケットを受信すると、NDIS または NIC のミニポートドライバーによって処理されるハードウェア割り込みを送信できます。 NDIS は、適切な*Miniportxxx*関数を呼び出すことによって、NIC のミニポートドライバーに通知します。 ミニポートドライバーは、NIC からのデータ転送を設定してから、適切な**Ndis * Xxx*** 関数を呼び出すことによって上位レベルのドライバーにバインドされた受信パケットの存在を示します。

## <a name="connectionless-and-connection-oriented-miniport-drivers"></a>コネクションレスと接続指向のミニポートドライバー

NDIS では、コネクションレス環境と接続指向環境の両方でミニポートドライバーがサポートされています。

*コネクションレスミニポートドライバー*は、イーサネットなどのコネクションレスネットワークメディアの nic を制御します。 コネクションレスのミニポートドライバーは、さらに、逆シリアル化およびシリアル化されたドライバーに分割されます。

  NDIS 6.0 以降のすべてのドライバーが逆シリアル化されている**ことに注意**してください。 

-   *逆シリアル化*されたドライバーは、独自の*miniportxxx*関数の操作をシリアル化し、内部的に受信したすべての送信パケットをキューに挿入します。 これにより、ドライバーの重要なセクション (一度に1つのスレッドのみを実行できるコード) が小さく保持されるので、完全な双方向のパフォーマンスが大幅に向上します。

-   *シリアル化*されたドライバーは、 *miniportxxx*関数の呼び出しをシリアル化し、送信キューを管理するために NDIS に依存します。

*接続指向のミニポートドライバー*は、ISDN などの接続指向ネットワークメディアの nic を制御します。 接続指向ミニポートドライバーは常に逆シリアル化されます。これらは常に独自の*Miniportxxx*関数の操作をシリアル化し、すべての受信送信パケットを内部でキューに配置します。

NDIS ミニポートドライバーは、非 NDIS エッジを持つことができます (次の図を参照してください)。

![ndis ミニポートドライバーのエッジが低い場合](images/nonndslo.png)

ミニポートドライバーでは、非 NDIS エッジを介してバスのクラスインターフェイス (ユニバーサルシリアルバス (USB) など) を使用してバス上のデバイスを制御します。 ミニポートドライバーは、バスに i/o 要求パケット (Irp) を送信するか、バスに接続されているリモートデバイスに直接送信して、デバイスと通信します。 ミニポートドライバーは、上端に標準の NDIS ミニポートドライバーインターフェイスを公開します。これにより、ミニポートドライバーは、それを超えた NDIS ドライバーと通信できるようになります。

## <a name="related-topics"></a>関連トピック

[NDIS ミニポートドライバー](ndis-miniport-drivers.md)

[NDIS ミニポートドライバーリファレンス](https://docs.microsoft.com/windows-hardware/drivers/ddi/_netvista/)