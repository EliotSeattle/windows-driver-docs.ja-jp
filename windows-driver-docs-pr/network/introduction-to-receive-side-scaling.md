---
title: Receive Side Scaling の概要
description: Receive Side Scaling の概要
ms.assetid: 492628a7-ca2e-40cd-bf81-53a925130422
keywords:
- receive side scaling についての受信側スケーリング WDK ネットワーク
- ネットワーク、receive side scaling について RSS WDK
- WDK の RSS CPU の決定
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: b4b3106fd9a3a588341d4025db11f76cad97172c
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56581018"
---
# <a name="introduction-to-receive-side-scaling"></a>Receive Side Scaling の概要





受信側が scaling (RSS) がネットワークを効率的に分散できるようにするネットワーク ドライバー テクノロジは、マルチプロセッサ システムで複数の cpu 処理を受信します。

**注**  同じコア プロセッサ共有と同じ実行エンジンは、上の Cpu のハイパー スレッドの影響がないため、複数のコア プロセッサを持つものとして同じです。 このため、RSS は、ハイパー スレッド プロセッサを使用しません。

 

受信したデータを効率的に処理するには、ミニポート ドライバーから割り込みサービス関数のスケジュールに遅延プロシージャ呼び出し (DPC) が表示されます。 RSS を使用しない一般的な DPC は DPC 呼び出し内で受信したすべてのデータを示します。 そのため、すべて、割り込みに関連付けられている受信処理の実行、CPU 上で受信割り込みが発生します。 RSS 以外の概要については、処理を受信を参照してください。[非 RSS 受信処理](non-rss-receive-processing.md)します。

NIC とミニポート ドライバーをスケジュールする機能を提供する RSS では、他のプロセッサの Dpc を受信します。 また、RSS 設計により、特定の接続に関連付けられている処理は、割り当てられた CPU 上にとどまることにします。 NIC は、ハッシュ関数を実装し、結果のハッシュ値が、CPU を選択するための手段を提供します。

次の図は、CPU を決定するための RSS メカニズムを示しています。

![cpu を決定するための rss メカニズムを示す図](images/rss.png)

NIC は、定義済みの領域 (ハッシュ型) にハッシュ値を計算するハッシュ関数を使用して、受信したネットワーク データ内で。 定義された領域は非連続にできます。

最下位ビット (LSBs) のハッシュ値の数は、間接指定テーブルをインデックス化に使用します。 間接指定テーブル内の値は、CPU に受信したデータの割り当てに使用されます。 間接指定テーブルに関する情報の詳細を参照してください。 [RSS 構成](rss-configuration.md)します。

シグナル メッセージを中断 (MSI) のサポート、NIC も関連付けられている CPU の割り込みです。 Msi の NDIS サポートの詳細については、[NDIS Msi-x](ndis-msi-x.md)を参照してください。

RSS は、減らすことで、ネットワーク システムのパフォーマンスを改善できます。

-   NIC から複数の cpu の処理の遅延を分散することによって受信処理します。

    これにより、CPU が大きく読み込まれていない別の CPU がアイドル状態を確認します。

-   ロックを同じ CPU にデータを共有するソフトウェア アルゴリズムを実行する確率を増やすことでオーバーヘッドが回転します。

    たとえば、スピン ロック CPU1 で実行されている関数にアクセスする必要があるデータを所有 CPU0 で関数の実行時にスピン ロックのオーバーヘッドが発生します。 CPU0 がロックを解放するまで、CPU1 は (待機) を回転します。

-   同じ CPU にデータを共有するソフトウェア アルゴリズムを実行する確率を増やすことで、キャッシュおよびその他のリソースの再読み込みします。

    このような再読み込みときに発生します、たとえば、CPU0、共有データへのアクセスされ、実行される関数が後続の割り込みで CPU1 で実行します。

セキュリティで保護された環境でこれらのパフォーマンス向上を実現するためには、RSS は、次のメカニズムを提供します。

-   分散処理

    RSS の処理を分散する受信に複数の Cpu で Dpc は特定の NIC から表示します。

-   注文の処理

    RSS には、受信したデータ パケットの配信の順序が保持されます。 各ネットワーク接続は、RSS プロセスは、関連付けられている CPU の兆候を受け取ります。 RSS の詳細については、処理を受信を参照してください。 [RSS の受信データのことを示す](indicating-rss-receive-data.md)します。

-   動的負荷分散

    RSS は、ホスト システムの負荷の変化に合わせて、Cpu 間でネットワーク処理負荷を再調整するための手段を提供します。 負荷を再調整するには、ドライバーを関連する間接指定テーブルを変更できます。 間接指定テーブルを指定する方法については、型のハッシュし、ハッシュ関数を参照してください[RSS 構成](rss-configuration.md)します。

-   送信側のスケーリング

    RSS は、プロセスの送信と受信側のデータを同じ CPU に特定の接続をドライバー スタックを使用できます。 通常、上にあるドライバー (たとえば、TCP) では、データ ブロックの一部を送信し、データのバランスを送信する前に受信確認を待機します。 受信確認し、それ以降のトリガーは、要求を送信します。 RSS の間接指定テーブルは、受信データの処理は、特定の CPU を識別します。 送信処理は、既定では、受信確認によってトリガーされた場合に同じ CPU に実行されます。 (たとえば、タイマーを使用して) 場合、ドライバーは、CPU も指定できます。

-   セキュリティで保護されたハッシュ

    RSS には、追加のセキュリティを提供する署名が含まれています。 この署名は、システムを強制的に不安定な状態にしようとする悪意のあるリモート ホストから、システムを保護します。

-   MSI X のサポート

    RSS、MSI の X のサポートは、DPC を後で実行される同じ CPU にまま割り込みサービス ルーチン (ISR) を実行します。 これには、スピン ロックのオーバーヘッドとキャッシュの再読み込みが削減されます。

次の図は、RSS のハードウェア サポートのレベルを示します。

![rss のハードウェア サポートのレベルを示す図](images/rss-hw.png)

ハードウェア サポートの RSS の考えられる 3 つのレベルがあります。

<a href="" id="hash-calculation-with-a-single-queue"></a>1 つのキューにハッシュの計算  
NIC は、ハッシュ値を計算し、ミニポート ドライバーは、Cpu に関連付けられているキューに受信したパケットを割り当てます。 詳細については、[RSS を 1 つのハードウェアが表示されるキュー](rss-with-a-single-hardware-receive-queue.md)を参照してください。

<a href="" id="hash-calculation-with-multiple-receive-queues"></a>複数のハッシュの計算には、キューが表示されます。  
NIC は、Cpu に関連付けられているキューに受信したデータ バッファーを割り当てます。 詳細については、[ハードウェア キューで RSS](rss-with-hardware-queuing.md)を参照してください。

<a href="" id="message-signaled-interrupts--msis-"></a>メッセージ シグナル割り込み (Msi)  
NIC は、受信したパケットを処理する必要があります CPU を中断します。 詳細については、[RSS メッセージ シグナル割り込みを](rss-with-message-signaled-interrupts.md)を参照してください。

NIC は、常に 32 ビットのハッシュ値を渡します。

 

 





