---
title: VMQ 受信キュー
description: VMQ 受信キュー
ms.assetid: 9c34b437-97f7-49fa-afcd-16f1c238828a
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 82f5b13b1f8b5289e20161bbb9175a3bbbc66c4f
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56571161"
---
# <a name="vmq-receive-queues"></a>VMQ 受信キュー





仮想マシン キュー (VMQ) のサービス プロバイダーは VMQ を割り当てますキューを受信します。 ネットワーク アダプターのハードウェアでは、パケットがキューに設定されているフィルター テストに合格する場合に、キューに着信ネットワーク データ パケットを割り当てます。

VMQ、受信キューには、次のプロパティ。

-   関連付けられているネットワーク アダプターに一意のキューの識別子です。

-   割り込みをプロセッサの関係。

-   キューに設定されているフィルター。

-   受信キューに割り当てられているバッファー。

次のプロパティを持つ既定のキューもです。

-   既定のキューが常に存在します。 他のキューを割り当てる必要があります。

-   既定のキューでは、他のキューのテストにフィルターを渡すことのできないパケットを受信します。

共有メモリの割り当て、VMQ に関連付けられている受信バッファーのミニポート ドライバー。 Windows Server のバージョンに応じてミニポート ドライバーは、次のセクションで説明されているバッファーの割り当てに関するガイドラインに従う必要があります。

-   [(Windows Server 2008 R2) をバッファー VMQ の受信共有メモリの割り当て](#windows7)

-   [VMQ 受信バッファー (Windows Server 2012 およびそれ以降のバージョン) の共有メモリの割り当てください。](#windows8)

VMQ が共有メモリの要件は、仮想マシン (Vm) の潜在的なセキュリティ問題に対処する設計されています。 VMQ セキュリティの問題に関する詳細については、次を参照してください。 [NDIS 仮想マシン (VM) の共有メモリのセキュリティ問題に](security-issues-with-ndis-virtual-machine--vm--shared-memory.md)します。

### <a href="" id="windows7"></a>(Windows Server 2008 R2) をバッファー VMQ の受信共有メモリの割り当て

Windows Server 2008 R2 で NDIS 6.20 が動作ミニポート ドライバーが、個別の lookahead バッファーにパケットにデータを分割をサポートしている場合に割り当てることができます共有メモリは次の方法で。

-   共有メモリは、ミニポート ドライバーは、HYPER-V 親パーティションで実行されている管理オペレーティング システムのアドレス空間から事前 lookahead バッファーを割り当てます。 プレ lookahead バッファーは、管理オペレーティング システムで検査されるパケットの部分です。

-   共有メモリは、ミニポート ドライバーは、HYPER-V 子パーティションで実行されているゲスト オペレーティング システムのアドレス空間から post lookahead バッファーを割り当てます。 Post lookahead バッファーは、ゲスト オペレーティング システムでは、検証するパケットの部分です。

    **注**  HYPER-V 子パーティションは、VM とも呼ばれます。

     

次の図は、キュー、管理オペレーティング システムおよびゲスト オペレーティング システムで共有メモリを示します。

![キュー、管理オペレーティング システム パーティション、および vm のパーティションで共有メモリを示す図](images/vmqaddress.png)

図では、管理オペレーティング システムのアドレス空間から割り当てられたヘッダー情報と、ゲスト オペレーティング システムのアドレス空間から割り当てられたデータで、キュー内の各パケットが表示されます。

### <a href="" id="windows8"></a>VMQ 受信バッファー (Windows Server 2012 およびそれ以降のバージョン) の共有メモリの割り当てください。

NDIS 6.30 以降、VMQ を分割受信バッファーに個別の lookahead バッファーがサポートされなくなりました。 ミニポート ドライバーでは、管理オペレーティング システムのアドレス空間には、各受信バッファーのメモリを割り当てる必要があります。

 

 





