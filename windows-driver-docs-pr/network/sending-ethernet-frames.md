---
title: イーサネット フレームの送信
description: イーサネット フレームの送信
ms.assetid: 9d1037b9-ef5c-4ed8-9204-5729eff2cea3
keywords:
- イーサネット WDK ネットワーク
- WDK ネットワークのフレーム
- イーサネットフレームの TCP/IP トランスポート (WDK ネットワーク)
- イーサネットフレームの送信
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: f84f914bf0c40a8d1f0c146e9cdd9d3249b69b23
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72841966"
---
# <a name="sending-ethernet-frames"></a>イーサネット フレームの送信





Windows TCP/IP トランスポートでは、イーサネットフレームを送信するための一連の要件がサポートされています。 送信要求を発信したドライバー (MUX 中間ドライバーまたはフィルタードライバーなど) は、TCP/IP トランスポートが実装する要件をサポートする必要があります。

**注**  ドライバースタック内のドライバーがこれらの要件に従っていない場合は、基になるミニポートドライバー、MUX 中間ドライバー、およびフィルタードライバーが予期しない動作をする可能性があります。

 

イーサネット送信要求の場合、ドライバーは次の要件をサポートする必要があります。

-   ドライバーが送信要求を発信した場合、ドライバーは、イーサネットフレームに対して[**NET\_BUFFER\_LIST**](https://docs.microsoft.com/windows-hardware/drivers/ddi/ndis/ns-ndis-_net_buffer_list)構造体を割り当てます。 各 NET\_BUFFER\_LIST 構造体の**NetBufferListInfo**メンバーには、特定の用途に必要な帯域外 (OOB) データが含まれている必要があります。 OOB データは、NET\_BUFFER\_LIST 構造に関連付けられているすべての[**net\_バッファー**](https://docs.microsoft.com/windows-hardware/drivers/ddi/ndis/ns-ndis-_net_buffer)構造に適用されます。

-   ドライバーが送信要求を発信した場合、ドライバーはイーサネットフレームに1つ以上の NET\_バッファー構造を割り当て、これらの構造を NET\_BUFFER\_LIST 構造体にリンクします。 Net\_BUFFER\_LIST 構造体にリンクされている各 NET\_バッファー構造は、1つのイーサネットフレームを表します。 ドライバーは、送信要求に複数の NET\_バッファー\_リスト構造をチェーンすることがあります。 

-   NET\_バッファー\_の一覧構造に関連付けられているすべての NET\_バッファー構造体は、イーサネットフレームの種類と IP プロトコルのバージョン (IPv4 または IPv6) が同じである必要があります。

-   NET\_バッファー\_の一覧構造に関連付けられているすべての NET\_バッファー構造には、同じソースおよび宛先の MAC アドレスを指定する必要があります。

-   ドライバーが TCP または UDP フレームを送信する場合は、NET\_バッファー\_の一覧構造に関連付けられているすべての NET\_バッファー構造が、同じ TCP または UDP 接続に関連付けられている必要があります。
    **注**  は、次の要件に従って、送信されるイーサネットフレームを分割できます。 つまり、送信要求では、複数のメモリ記述子リスト (MDLs) を NET\_のバッファー構造に関連付けることができます。

     

-   送信イーサネットフレームの MAC ヘッダーを複数の MDLs に分割しないでください。 仮想 LAN (VLAN) (または優先順位) フラグ (存在する場合) を MAC ヘッダーの一部として扱います。 そのため、このフラグは、MAC ヘッダーの残りの部分と同じ MDL に存在する必要があります。

-   ネットワーク\_バッファー構造内の MDL チェーン内のリンク、または net\_BUFFER\_リスト構造内の NET\_バッファーチェーン内のリンクをドライバーが変更した場合、ドライバーは、ネットワークの所有権を返す前に、元の構成へのリンクを復元する必要があります。\_バッファー\_一覧に表示されます。 ただし、ドライバーは、NET\_BUFFER\_LIST 構造体の間のリンクを復元するためには必要ありません。

 

 





