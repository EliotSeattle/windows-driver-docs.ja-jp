---
title: Hyper-V 拡張可能スイッチの概要
description: このセクションでは、HYPER-V 拡張可能スイッチの概要を示します
ms.assetid: 78181C72-FBFD-4860-A664-C297997D780F
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 33ef4da2acff5012ec9f058c1f29aaa7bc1eb4ab
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63373009"
---
# <a name="overview-of-the-hyper-v-extensible-switch"></a>Hyper-V 拡張可能スイッチの概要


Windows Server 2012 では、HYPER-V 拡張可能スイッチ (HYPER-V 仮想スイッチ)、これは、HYPER-V 親パーティションの管理オペレーティング システムで実行されている仮想イーサネット スイッチについて説明します。 このページでは、次の項目について説明します。

-   [バック グラウンドの読み取り](#background-reading)
-   [HYPER-V 拡張可能スイッチおよびネットワーク アダプターの種類](#types-of-hyper-v--extensible-switches-and-network-adapters)
-   [種類の拡張可能スイッチの拡張機能](#types-of-extensible-switch-extensions)
-   [HYPER-V 拡張可能スイッチのアーキテクチャ ダイアグラム](#hyper-v-extensible-switch-architectural-diagrams)

## <a name="background-reading"></a>バック グラウンドの読み取り


このテクノロジとその基盤の高度な技術概要については、次の TechNet ドキュメントを参照してください。

-   [Hyper-V 仮想スイッチの概要](https://technet.microsoft.com/library/hh831823.aspx)
-   [Hyper-V ネットワーク仮想化の概要](https://technet.microsoft.com/library/jj134230.aspx)
-   [HYPER-V の概要](https://technet.microsoft.com/library/hh831531.aspx)

## <a name="types-of-hyper-v-extensible-switches-and-network-adapters"></a>HYPER-V 拡張可能スイッチおよびネットワーク アダプターの種類


作成、構成、または、次の種類の 1 つまたは複数の拡張可能なスイッチを削除する HYPER-V の仮想ネットワーク マネージャーを使用できます。

-   1 つの外部ネットワーク アダプターと 1 つまたは複数の仮想マシン (VM) ネットワーク アダプターに接続するポートをサポートする外部拡張可能スイッチ。 この種類のスイッチでは、送信または受信、HYPER-V のすべてのパーティションと、ホストの物理ネットワーク インターフェイスの間にパケットを許可します。

    また、アプリケーションと、管理オペレーティング システムで実行されているドライバーが送信または受信を介してこの種類のスイッチ パケット。

-   1 つ以上の内部ネットワーク アダプターと 1 つまたは複数の VM ネットワーク アダプターに接続するポートをサポートする内部拡張可能スイッチ。 この種類のスイッチでは、送信または受信 HYPER-V 親パーティションと 1 つ以上の HYPER-V 子パーティションをホスト上の間にパケットを許可します。

    また、アプリケーションと、管理オペレーティング システムで実行されているドライバーが送信または受信を介してこの種類のスイッチ パケット。

-   1 つまたは複数の VM ネットワーク アダプターに接続するポートをサポートするプライベートの拡張可能スイッチ。 この種類のスイッチでは、送信または HYPER-V 子パーティション間でのみ受信するパケットを許可します。

    **注**  アプリケーションとドライバーが、管理オペレーティング システムで動作することはできません送信またはこの種類のスイッチを経由してパケットを受信します。

     

各拡張可能スイッチ モジュールは、HYPER-V 子と親パーティションによって使用されるネットワーク アダプターを経由の受信と送信パケットをルーティングします。 これらのネットワーク アダプターを以下に示します。

-   ホストで利用可能な物理ネットワーク インターフェイスへの接続を提供する外部ネットワーク アダプター。

    この種類のネットワーク アダプターの詳細については、次を参照してください。[外部ネットワーク アダプター](external-network-adapters.md)します。

    **注**  だけで外部の拡張可能なスイッチが外部ネットワーク アダプターへのアクセスを提供します。

     

-   HYPER-V 親パーティションの管理オペレーティング システムで実行されるプロセスの拡張可能スイッチへのアクセスを提供する内部ネットワーク アダプター。 これにより、これらのプロセスを拡張可能スイッチ経由でパケットを送受信できます。

    この種類のネットワーク アダプターの詳細については、次を参照してください。[内部のネットワーク アダプター](internal-network-adapters.md)します。

    **注**  外部および内部の拡張可能なスイッチを内部ネットワーク アダプターにアクセスを提供するだけです。

     

-   HYPER-V 子パーティションで実行されているゲスト オペレーティング システム内で公開されている VM のネットワーク アダプター。 VM のネットワーク アダプターでは、パケットを送信または子パーティションのゲスト オペレーティング システムで実行されるプロセスが受信した拡張可能スイッチへの接続を提供します。

    この種類のネットワーク アダプターの詳細については、次を参照してください。[仮想マシンのネットワーク アダプター](virtual-machine-network-adapters.md)します。

各 HYPER-V 子パーティションは、1 つまたは複数の VM ネットワーク アダプターを構成できます。 拡張可能スイッチのインスタンスに関連する各 VM のネットワーク アダプターが構成されます。 これにより、次のように構成する子パーティションです。

-   子パーティションは、拡張可能スイッチの 1 つのインスタンスに関連付けられている 1 つの VM ネットワーク アダプターを構成できます。

-   子パーティションは、拡張可能スイッチのインスタンスに関連付けられている各 VM ネットワーク アダプターを使用した、複数の VM ネットワーク アダプターを構成できます。

-   子パーティションは、拡張可能スイッチの同じインスタンスに関連付けられた 1 つまたは複数の VM ネットワーク アダプターで、複数の VM ネットワーク アダプターを構成できます。

## <a name="types-of-extensible-switch-extensions"></a>種類の拡張可能スイッチの拡張機能


HYPER-V 拡張可能スイッチには、独立系ソフトウェア ベンダー (Isv) が次の方法でスイッチ機能を拡張できるインターフェイスがサポートされています。

-   HYPER-V 拡張可能スイッチがインターフェイスと呼ばれる、NDIS フィルター ドライバーをサポートしている*拡張*、拡張可能スイッチのドライバー スタック内でバインドします。 これにより、キャプチャ、フィルター、および拡張可能スイッチ ポートにパケットを転送する拡張機能です。 これは、挿入、削除、またはパケットを HYPER-V パーティションで公開されているネットワーク アダプターに接続されているポートにリダイレクトする拡張機能もできます。

    拡張機能をインストールした後は、有効または HYPER-V 拡張可能スイッチのインスタンスを個別に無効になっていることができます。 詳細については、次を参照してください。[インストールの Hyper-v 拡張可能スイッチの拡張](installing-hyper-v-extensible-switch-extensions.md)します。

-   Windows フィルタ リング プラットフォーム (WFP) は、WFP フィルターまたは HYPER-V 拡張可能スイッチのデータ パスに沿ったパケットをインターセプトするコールアウト ドライバーを許可するボックスにフィルター拡張 (Wfplwfs.sys) を提供します。 WFP フィルターやコールアウト ドライバー WFP 管理とシステム関数を使用してパケット検査または変更を実行できます。

    WFP の概要については、次を参照してください。 [Windows フィルタ リング プラットフォーム](porting-packet-processing-drivers-and-apps-to-wfp.md)します。

    WFP コールアウト ドライバーの概要については、次を参照してください。 [Windows フィルタ リング プラットフォーム コールアウト ドライバー](windows-filtering-platform-callout-drivers2.md)します。

    **注**  WFP ベースの拡張可能スイッチ パケット トラフィックのフィルター処理を実行すると、Isv、WFP を拡張するだけでかまいませんがフィルター処理し、コールアウト ドライバーを使用する WFP 呼び出しとデータ型を拡張します。 Isv は、独自の拡張機能を開発する必要はありません。

     

拡張可能スイッチのインターフェイスには、次の種類の拡張機能がサポートされています。

<a href="" id="capturing-extensions"></a>キャプチャ拡張機能  
拡張機能データをキャプチャし、パケットのトラフィックを監視します。 この種類の拡張は、変更や、パケットを削除または拡張可能スイッチ ポートに配信されてからのパケットを除外することはできません。 ただし、取得拡張機能と拡張機能は、ホスト アプリケーションに送信するトラフィックの統計情報を含むパケットなどのパケットのトラフィックが発生することです。

キャプチャ拡張機能の複数のバインドし、拡張可能スイッチの各インスタンスで有効になっていることができます。

この種類の拡張機能の詳細については、次を参照してください。[キャプチャ拡張機能](capturing-extensions.md)します。

<a href="" id="filtering-extensions"></a>フィルター拡張機能  
これらの拡張機能では、取得拡張機能と同じ機能があります。 ただし、ポートやスイッチのポリシー設定に基づき、この種類の拡張できます検査し、パケットを破棄または拡張可能スイッチ ポートにパケット配信を除外します。 フィルター拡張機能できますも発信、複製、またはパケットを複製および拡張可能スイッチのデータ パスに挿入します。

複数のフィルター処理拡張機能は、バインドされ、拡張可能スイッチの各インスタンスで有効になっていることができます。

この種類の拡張機能の詳細については、次を参照してください。[拡張機能のフィルタ リング](filtering-extensions.md)します。

<a href="" id="forwarding-extensions"></a>転送拡張機能  
これらの拡張機能は、拡張機能をフィルター処理と同じ機能を備えてがコア パケットの転送を実行して、拡張可能スイッチのタスクをフィルター処理を担当します。 これらのタスクを以下に示します。

-   パケットが、NVGRE パケットでない限り、パケットの宛先ポートを決定します。 詳細については、次を参照してください。[ハイブリッド転送](hybrid-forwarding.md)します。

-   セキュリティ、プロファイル、または仮想 LAN (VLAN) のポリシーなどの標準ポート ポリシーの適用によってパケットのフィルター処理します。

**注**  パケットの宛先ポートだけでなく標準のポートの設定に基づいてパケットをフィルター処理、転送拡張機能をインストールしないと拡張可能スイッチで有効になっているは、スイッチを決定します。

 

1 つだけの転送拡張機能のバインドされ、拡張可能スイッチの各インスタンスで有効になっていることができます。

この種類の拡張機能の詳細については、次を参照してください。[転送拡張機能](filtering-extensions.md)します。

## <a name="hyper-v-extensible-switch-architectural-diagrams"></a>HYPER-V 拡張可能スイッチのアーキテクチャ ダイアグラム


次の図は、NDIS 6.40 (Windows Server 2012 R2) と後で拡張可能スイッチ インターフェイスのコンポーネントを示しています。

![説明する図ハイパー\-ndis 6.40 およびそれ以降の v 拡張可能スイッチのアーキテクチャ](images/vswitcharchitecture-ndis640.png)

次の図は、NDIS 6.30 (Windows Server 2012) の拡張可能スイッチのインターフェイスのコンポーネントを示します。

![sr-iov 対応の合成デバイスのデータ パスを示す図](images/vswitcharchitecture.png)

拡張可能スイッチのインターフェイスのコンポーネントの詳細については、次を参照してください。 [Hyper-v 拡張可能スイッチのアーキテクチャ](hyper-v-extensible-switch-architecture.md)します。

 

 





