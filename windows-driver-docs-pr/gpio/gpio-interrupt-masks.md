---
title: GPIO 割り込みマスク
description: 割り込み入力として構成されている汎用 i/o (GPIO) の pin は、有効または無効にするだけでなく、マスクとマスク解除が可能です。
ms.assetid: FD6537DA-2AAA-4646-896D-D5BC834526B6
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 41bcc661e3c8292f6fdb45589f5a6c655e9b9533
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72824973"
---
# <a name="gpio-interrupt-masks"></a>GPIO 割り込みマスク


割り込み入力として構成されている汎用 i/o (GPIO) の pin は、有効または無効にするだけでなく、マスクとマスク解除が可能です。

周辺機器からレベルでトリガーされる割り込みが有効でアクティブになっていても、カーネルトラップハンドラーがデバイスの割り込みサービスルーチン (ISR) をすぐに実行して割り込みをクリアできない場合、ハンドラーは GPIO ピンの割り込みをマスクして、pin を防止します。繰り返しによって、より多くの割り込みが発生します。 その後、ISR が実行され、割り込みがクリアされた後、割り込みを安全にマスク解除できます。

割り込みをマスクしても、割り込みはオフになりません。 GPIO 割り込みが有効になっていて、アクティブで、マスクされている場合、この割り込みにより、GPIO コントローラーデバイスはプロセッサに割り込み要求をマスク解除ます。

Gpio 割り込みが無効になっている間、GPIO 割り込みマスクビットは効果がありません。 [*クライアント\_EnableInterrupt*](https://docs.microsoft.com/windows-hardware/drivers/ddi/gpioclx/nc-gpioclx-gpio_client_enable_interrupt) callback 関数は、割り込みのマスクビットをゼロに設定します。つまり、割り込みは、有効になった後、最初はマスク解除されます。

マスクと GPIO 割り込み pin の無効化の重要な違いは、マスクによって pin の割り込み構成の設定が保持されるのに対し、pin を無効にすることはできないという点です。 GPIO 割り込みピンはマスクされていますが、以前にプログラミングされた割り込みモード (エッジトリガまたはレベルトリガ)、極性 (アクティブ-高、アクティブ-低、アクティブ-両方)、および debounce 設定を保持します。 これらの設定は、割り込みがマスク解除されるとすぐに有効になります。 ただし、割り込みが無効になっている場合は、pin のすべての割り込み構成設定が失われます。 Pin が有効になったら、必要な割り込み構成設定を使用して再度プログラムをプログラミングする必要があります。

一部の GPIO コントローラーでは、割り込みが有効なレジスタとは別個の個別の、割り込みマスクレジスタを実装しています。

ただし、その他の GPIO コントローラーは、割り込みマスク関数と割り込み有効化機能を組み合わせたハードウェアレジスタの1つのセットを提供します。 これらのコントローラーのドライバーは、ソフトウェアで個別の割り込みマスクと割り込みを有効にするレジスタをエミュレートします。 これを行うために、これらのドライバーは、割り込み有効ビットと割り込みマスクビットの論理的な状態を追跡し、ハードウェアレジスタ内の対応するビットを操作して、結合された論理割り込み有効化と割り込みマスクの動作を正確に反映します。各 GPIO 割り込みのビット。

 

 




