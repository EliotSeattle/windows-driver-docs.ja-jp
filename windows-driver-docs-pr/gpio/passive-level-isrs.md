---
title: パッシブレベルの ISR
description: Windows 8、カーネル モード ドライバー フレームワーク (KMDF) とユーザー モード ドライバー フレームワーク (UMDF) ドライバーを開始できます、オプションとして、登録、割り込みサービス ルーチン (Isr) パッシブ レベルで実行します。
ms.assetid: E7556046-D85C-4CD1-8C27-578BF5CAFF2B
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 39258d98e11655456236ef66f5edb3125f2ae24c
ms.sourcegitcommit: fb7d95c7a5d47860918cd3602efdd33b69dcf2da
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2019
ms.locfileid: "67383424"
---
# <a name="passive-level-isrs"></a>パッシブレベルの ISR


Windows 8、カーネル モード ドライバー フレームワーク (KMDF) とユーザー モード ドライバー フレームワーク (UMDF) ドライバーを開始できます、オプションとして、登録、割り込みサービス ルーチン (Isr) パッシブ レベルで実行します。

KMDF および UMDF ドライバーのパッシブ レベル isr を特定の詳細については、次のトピックを参照してください。

-   [割り込みパッシブ レベルをサポートしています。](https://docs.microsoft.com/windows-hardware/drivers/wdf/supporting-passive-level-interrupts)
-   [ハードウェアにアクセスして、割り込み処理](https://docs.microsoft.com/windows-hardware/drivers/wdf/accessing-hardware-and-handling-interrupts)

Windows 割り込みの抽象化が簡単に GPIO コント ローラーのハードウェア固有の詳細情報を無視するには、このデバイスのドライバーを有効の周辺機器は、プロセッサに割り込み要求をリレーする汎用の I/O (GPIO) ピン留めを使用している場合この pin が属しています。 GPIO 中継割り込みに応答でカーネルのトラップ ハンドラーを実行するとデバイスからの要求、このハンドラーに自動的にクリアまたはマスク、GPIO のハードウェア レジスタに割り込みを必須とします。 さらに、カーネルのトラップ ハンドラー直接呼び出し、デバイスの ISR、または別のスレッドで実行するには、この ISR をスケジュールします。

多くの場合、GPIO ハードウェア レジスタ、メモリ マップト、この場合、カーネル トラップ ハンドラーに直接アクセスできますに DIRQL で。 ただし、ハードウェア レジスタ、周辺機器のデバイスできない可能性がありますメモリ マップする場合は、周辺機器のデバイス ドライバーは、I/O 要求を使用してそれらにアクセスする必要があります。 そのため、周辺機器のデバイス ドライバの ISR は IRQL で実行する必要があります = パッシブ\_レベル I/O を使用できるように、割り込みをミュートまたは要求、割り込みの最初のサービスを実行します。 パッシブ レベル ISR 同期的に、I/O 要求を送信でき、必要に応じては、要求が完了するまでにブロックできます。

Edge によってトリガーされる割り込み要求シグナルを生成するための周辺機器のパッシブ レベル ISR をサポートするためには、カーネルのトラップ ハンドラーは、GPIO ピン、保留中の割り込みをクリアし、パッシブ レベル カーネル スレッドで実行する ISR にスケジュールします。

レベルによってトリガーされる割り込み要求シグナルを生成するための周辺機器のパッシブ レベル ISR をサポートするために、カーネル トラップ ハンドラー GPIO ピン、保留中の割り込みを使用して、ISR パッシブ レベル カーネル スレッドで実行するようにスケジュールします。 ISR は周辺機器の割り込み要求をクリアします。 ISR を返した後、カーネル スレッド GPIO ピン割り込みに対してマスク解除します。

割り込みは、ISR までマスクされたままであるため、デバイスのパッシブ レベル ISR がのみ、最初のサービス提供、割り込みを実行して、その他のデバイスのパッシブ レベル isr を特定の遅延を回避するために返す必要がありますを返します。 通常、ドライバーが ISR よりも低い優先順位で実行、割り込みワーカー スレッドに割り込みに関連する追加の処理を延期する必要があります。

 

 




