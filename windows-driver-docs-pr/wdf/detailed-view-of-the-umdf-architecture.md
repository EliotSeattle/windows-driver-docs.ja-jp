---
title: UMDF のアーキテクチャ
description: このトピックでは、ドライバー マネージャーが、ユーザー モード デバイス スタックを構築する方法と、ホスト プロセス、リフレクタ、およびドライバー マネージャーのアプリケーションがユーザー モード ドライバー フレームワーク (UMDF) ドライバーに送信する I/O 要求を処理する方法について説明します。
ms.assetid: 118e5fe8-ba1e-4012-9632-fd92f4cee6f1
keywords:
- ユーザー モード ドライバー フレームワーク WDK のアーキテクチャ
- UMDF WDK、アーキテクチャ
- ユーザー モード ドライバー WDK UMDF、アーキテクチャ
- WDK UMDF のアーキテクチャ
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: cb66dd12ef53c0176016e36aa09f3a3850a4f16f
ms.sourcegitcommit: 0cc5051945559a242d941a6f2799d161d8eba2a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63384588"
---
# <a name="architecture-of-umdf"></a>UMDF のアーキテクチャ


このトピックでは、ドライバー マネージャーが、ユーザー モード デバイス スタックを構築する方法と、ホスト プロセス、リフレクタ、およびドライバー マネージャーのアプリケーションがユーザー モード ドライバー フレームワーク (UMDF) ドライバーに送信する I/O 要求を処理する方法について説明します。

カーネル モード スタックと同様に、構築とユーザー モードのスタックの破棄によって左右されますプラグ アンド プレイ (PnP) イベント。 カーネル モード スタックがビルドされたら、reflector は、ドライバー マネージャーは、ユーザー モードのスタックの構築を開始を通知します。 ドライバー マネージャーは、ドライバーのホスト プロセスを起動し、実行中のプロセス、ユーザー モードのスタックを構築するための十分な情報を提供します。 これにより、ユーザー モードのスタックと見なすカーネル モード スタックの拡張機能。

ドライバーのホスト プロセスでは、ドライバーとルートのメッセージをユーザー モードのスタック内のドライバーの間ユーザー モードの実行環境を提供します。 Reflector は、メッセージ ベースのプロセス間通信メカニズムを使用して、ドライバー マネージャーとホスト プロセスと通信します。

![reflector でデバイス オブジェクトと下矢印を含む umdf コンポーネント](images/umdfarch4.gif)

UMDF ドライバーに、I/O 要求を送信するアプリケーションなどの呼び出し、Win32 ファイル I/O 関数では、 [ **CreateFile**](https://msdn.microsoft.com/library/windows/desktop/aa363858)、 **ReadFileEx**、 **CancelIoEx**、または[ **DeviceIoControl**](https://msdn.microsoft.com/library/windows/desktop/aa363216)します。 Reflector は、クライアント アプリケーションから要求を受信したときに、適切なドライバーのホスト プロセスに要求を送信します。 ドライバー ホスト要求を処理し、ルート、適切なユーザー モード デバイス スタックの先頭にします。

要求がユーザー モードのスタック内のドライバーのいずれかで完了したか、ドライバーを reflector のいずれかによって転送されます。 Reflector は、ユーザー モード ドライバー スタックからの要求を受信したときに、完了のカーネル モード スタック ダウン要求を送信します。

 

 





