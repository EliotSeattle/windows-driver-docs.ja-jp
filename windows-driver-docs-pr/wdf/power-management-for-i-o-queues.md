---
title: I/O キューの電源管理
description: I/O キューの電源管理
ms.assetid: 2e1bf9d2-615b-49b0-b677-f41b23c42eda
keywords:
- 電源管理 WDK KMDF、I/O キュー
- WDK KMDF、電源管理の I/O キュー
- I/O 要求の WDK KMDF、電源管理
- 電源管理対象の I/O キュー WDK KMDF
- 作業状態 WDK KMDF
- PowerManaged 設定 WDK KMDF
- 低電力状態 WDK KMDF
- 電源管理 WDK KMDF をスリープ状態します。
- 電源状態が WDK KMDF
- デバイスの電源状態が WDK KMDF
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 220f0df30c4791cebc058fff094be0b1cb3f740e
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56538606"
---
# <a name="power-management-for-io-queues"></a>I/O キューの電源管理


フレームワークでは、送信先、ドライバーのデバイスの 1 つの I/O 要求を受け取る、フレームワークに、要求が I/O キューに保存されます。 ドライバーは、要求ハンドラーを提供することで、またはキューをポーリングすることによって、I/O キューからの I/O 要求を取得できます。 I/O キューの詳細については、次を参照してください。 [Framework キュー オブジェクト](framework-queue-objects.md)します。

ドライバーを設計するときは、2 つのカテゴリには、ドライバーが受け取る I/O 要求をグループ化する必要があります。

1.  その作業 (D0) 状態にあるデバイスを必要とする要求を含みます。
    -   読み取りまたは書き込み要求からデータを読み取るデバイスの機能のドライバーを必要とするデバイスにデータを書き込みます。
    -   デバイスの制御は、関数またはバス ドライバーがデバイスにアクセスしなくてもサービスできませんを要求します。

2.  その作業 (D0) 状態にあるデバイスを必要としない要求を含みます。
    -   デバイスの制御は、関数またはバス ドライバーがデバイスにアクセスすることがなく処理できる要求します。
    -   場合によってすべての要求フィルター ドライバーを受信します。
    -   スタックが、ハードウェアと通信しませんソフトウェアのみのデバイスをサポートしている場合、ドライバー スタックのすべてのドライバーを受信するすべての要求。

フィルター ドライバーを作成しているか、ハードウェアと通信しませんスタックのドライバーは、ドライバーが受信する可能性がありますしない限り、いくつかあるその稼働状態にするデバイスを必要とするいくつかの要求は必要ありません。

これら 2 つの種類の要求をサポートするために、フレームワークは 2 種類の I/O キューを提供します: いる*電源管理対象*とそうではありません。 設定、ドライバーは、各の I/O キューを作成するとき、 **PowerManaged**でキューのメンバー [ **WDF\_IO\_キュー\_CONFIG** ](https://msdn.microsoft.com/library/windows/hardware/ff552359)するか、構造体**WdfTrue**または**WdfFalse**を次のいずれかを示すために。

-   ドライバーが設定されている場合**PowerManaged**に**WdfTrue**キューが電源管理します。

    I/O 要求が電源管理対象のキューで利用できる場合は、フレームワークは、デバイスの作業 (D0) 状態にある場合にのみ、ドライバーを要求を配信します。 そのため、ドライバーは、電源管理対象のキューからの要求を受信したときに、デバイスが使用可能なフレームワークが保証されます。 作業の状態で、デバイスがない場合、フレームワークは、デバイスが使用可能になるまでキューに要求を格納します。

    デバイスが省電力状態の場合、アイドル状態になり、フレームワークは、ドライバーの電源管理対象のキューのいずれかで、I/O 要求を配置、フレームワークは、ドライバーに要求を配信する前に、デバイスを動作状態に復元するドライバー スタックをかを確認します。

    デバイスが、システムでの作業 (S0) 状態でないし、まで、framework が待機する場合は、フレームワークは、ドライバーの電源管理対象のキューのいずれかで、I/O 要求を puts、ために低電力状態の場合、デバイスが作業 (D0) の状態を返し、要求を提供し、ドライバーに uest します。

    フレームワークに配信しない I/O 要求電源管理対象のキューから、ドライバー、デバイスで作業の状態でない場合があるため*の上にある、ドライバー、* [電源ポリシー所有者](power-policy-ownership.md) *ドライバーでスタックする必要がありますいないを使用して、電源管理対象の I/O キュー*します。 電源ポリシーの所有者の上にあるドライバーは、電源管理対象のキューを使用している場合、およびデバイスが省電力状態の場合は、ドライバーは、要求を受信しませんし、電源ポリシー所有者に渡すことはできません。 そのため、デバイスの電源の状態を制御するには、電源ポリシー所有者は、デバイスをスリープ解除されません。

-   ドライバーが設定されている場合**PowerManaged**に**WdfFalse**キューは電源管理対象ではありません。

    I/O 要求が電源管理されていないキューで利用できる場合は、フレームワークは、デバイスがその作業 (D0) 状態のかどうかに関係なく、ドライバーに要求を配信します。 キューを設定したデバイスへのアクセスを必要としない要求のみを受信するため場合に、ドライバーは、デバイスが使用できない場合でも、各要求を処理できます。

電源管理対象の I/O キューの詳細については、次を参照してください。 [Using Power-Managed I/O キュー](using-power-managed-i-o-queues.md)します。

いくつかのドライバーでは、プラグ アンド プレイ (PnP) する場合は、いくつかの直接制御と電源管理操作が必要です。 これらのドライバーを使用できる*I/O を自己管理*します。 詳細については、次を参照してください。 [Self-Managed I/O を使用して](using-self-managed-i-o.md)します。

 

 





