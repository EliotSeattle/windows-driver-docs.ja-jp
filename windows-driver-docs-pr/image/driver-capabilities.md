---
title: ドライバーの機能
description: ドライバーの機能
ms.assetid: 639eff56-655d-4b6a-95f0-daa1daf62fae
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: a620a85bc134e87b22c2cb1ffd383e4c9bd33be3
ms.sourcegitcommit: 4b7a6ac7c68e6ad6f27da5d1dc4deabd5d34b748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2019
ms.locfileid: "72840850"
---
# <a name="driver-capabilities"></a>ドライバーの機能





すべての WIA ミニドライバーは、通知イベントとコマンドを処理するデバイスの機能を定義する必要があります。 このセクションでは、これらのミニドライバー機能について説明します。

WIA ミニドライバーは、サポートされているすべてのイベントとコマンドを一覧表示するテーブルを作成する役割を担います。 次の図は、WIA ミニドライバーがビルドする機能テーブルを示しています。

![wia ミニドライバー capabilities テーブルを示す図](images/wia-capabilitiestable.png)

Capabilities テーブルは、 [**WIA\_DEV\_CAP\_DRV**](https://docs.microsoft.com/windows-hardware/drivers/ddi/wiamindr_lh/ns-wiamindr_lh-_wia_dev_cap_drv)構造体の配列として定義されています。 ミニドライバーはこの配列を構築し、wia サービスが[**IWiaMiniDrv::D rvgetcapabilities**](https://docs.microsoft.com/windows-hardware/drivers/ddi/wiamindr_lh/nf-wiamindr_lh-iwiaminidrv-drvgetcapabilities)メソッドを呼び出したときにそれを wia サービスに返す必要があります。

### <a name="defining-supported-events-and-commands"></a>サポートされているイベントとコマンドの定義

WIA ミニドライバーは、デバイスが WIA サービスに対してサポートするイベントとコマンドを記述する必要があります。

### <a name="events"></a>イベント

*イベント*は、デバイスレベルのアクションであり、ドライバーに報告する必要があります。 たとえば、スキャナーに "Scan" というラベルが付いた前面パネルボタンがあるとします。 ユーザーがこのボタンを押すと、スキャナーがスキャンを開始するか、少なくともアプリケーションがスキャンの開始を開始することが期待されます。

WIA では、次の2種類のイベントがサポートされています。

<a href="" id="action-event"></a>アクションイベント  
*アクションイベント*は、このようなイベントを処理するために登録されているアプリケーションを開始します。 たとえば、Microsoft スキャナーとカメラウィザードは、スキャンイベントの登録済みハンドラーです (他のアプリケーションもこのイベントに登録できます)。 ドライバーがスキャンイベントを送信すると、このイベントを処理するために、スキャナーとカメラのウィザードが開始されます。 この種類のイベントは、"*永続的なイベント*" と呼ばれることがよくあります。

<a href="" id="notification-event"></a>通知イベント  
*Notification イベント*は、既に実行中のアプリケーションに対してのみ送信され、このイベントを受信する必要があることを WIA サービスに示しています。 アプリケーションが実行されていない場合は、このイベントの処理は開始されません。

イベントには、アクションイベントと通知イベントの両方を指定できます。

### <a name="commands"></a>コマンド

WIA デバイスコマンドは、ミニドライバーに何らかのアクションを実行するように指示する wia ミニドライバーに対して (イメージングアプリケーションに代わって) 送信される要求です。 たとえば、WIA カメラミニドライバーは **[画像の撮影]** コマンドを処理する場合があります。 このコマンドは、デジタルカメラデバイスの注文をミニドライバーに指示して新しい画像を撮影するように指示します。

スキャナーとカメラウィザードでは、バックグラウンドでのクリーンアップがまだ行われている場合でも、すぐにユーザーに応答**する   ます**。 たとえば、ユーザーが操作の取り消しを要求すると、スキャナーとカメラウィザードのウィンドウがすぐに閉じます。ただし、スキャナーとカメラウィザードには、ウィンドウが閉じられた後も引き続き実行される、個別の取得スレッドがあります。 この個別のスレッドによって、ユーザーの要求に対してすぐに応答できるようになりますが、ユーザーエクスペリエンスに影響を与えることなく、完了まで中断できない必要なタスクとタスクを実行できます。

 

 

 




