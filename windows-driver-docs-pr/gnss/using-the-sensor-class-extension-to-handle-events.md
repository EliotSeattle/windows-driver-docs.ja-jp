---
title: センサー クラスの拡張機能を使用してイベントを処理するには
description: センサー クラスの拡張機能は、センサー ドライバーとセンサー API の間リンケージ イベントを処理します。
ms.assetid: A49489EF-1721-4F12-9793-6FBA76BA7976
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 795e5e55a545dc6fd42fc0979c79aeb86cb57e74
ms.sourcegitcommit: a33b7978e22d5bb9f65ca7056f955319049a2e4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2019
ms.locfileid: "56530610"
---
# <a name="using-the-sensor-class-extension-to-handle-events"></a>センサー クラスの拡張機能を使用してイベントを処理するには

> [!IMPORTANT] 
> このドキュメントと Windows 8.1 の地理的位置情報ドライバー サンプルが非推奨とされました。

センサー クラスの拡張機能は、センサー ドライバーとセンサー API の間リンケージ イベントを処理します。

センサーのアプリケーションがドライバーからイベント通知を受信登録することで、シミュレートされたセンサーのデータ フィールドを取得します。または、データ フィールドを取得するプロパティを呼び出すことによって。 ドライバーのサンプルでは、両方をサポートします。

データ更新イベントを登録、アプリケーション、ドライバーは、センサーからそのデータが到着するたびに、これらのイベントを発生させます。 これらのイベント通知の頻度は、現在のレポート間隔プロパティに対応します。

ドライバーのサンプルは、ドライバーは、センサーから到着した「新しい」のデータをシミュレーションするときにイベントを発生させるだけでなく、センサー データの送信を開始する準備ができたら、イベントも発生します。 このイベントは、状態変更イベントと呼ばれます。

サンプル ドライバーでサポートされている状態にある定数に対応して、 **SensorState**列挙体。

| イベントの状態定数 | 基準値                                                   |
|----------------------|----------------------------------------------------------------|
| センサー\_状態\_準備完了 | センサーが接続されていると、データを送信する準備完了であることを示します。 |

 

前述のように、センサー クラスの拡張機能は、ドライバーのサンプルとセンサー API の間イベント リンケージを処理します。 ドライバーを起動するたびに、 **ISensorClassExtension::PostStateChange** api メソッド、クラスの拡張機能の転送、通知します。 ドライバーのサンプルは内では、このメソッドを呼び出して**CSensorManager::SetState**します。 ドライバーを起動すると、 **ISensorClassExtension::PostEvent**クラスの拡張機能、データ更新イベントのプロパティのキーがセンサー API に通知を転送するメソッドを提供します。 ドライバーのサンプルは内では、このメソッドを呼び出して**CSensorManager::PostDataEvent**します。

2 つのセンサー manager メソッド::**SetState**と::**PostDataEvent**イベント サンプル ドライバーのスレッド プロシージャ内で呼び出される**CSensorManager::\_SensorEventThreadProc**します。 イベント ハンドラーは、イベントのアクティビティが (コールバック関数の場合) など、ドライバーの同期の手順をブロックするを防ぐために個別のスレッド プロシージャに保持されます。

## <a name="related-topics"></a>関連トピック
[センサー地理位置情報ドライバー サンプル](sensors-geolocation-driver-sample.md)  



